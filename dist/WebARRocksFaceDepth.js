 /**
 * WebAR.rocks.faceDepth - https://github.com/WebAR-rocks/WebAR.rocks.faceDepth
 *
 * Copyright 2022 WebAR.rocks ( https://webar.rocks )
 *
 * 
*/

var WEBARROCKSFACEDEPTH=(function(){window.WEBARROCKSFACEDEPTHGEN=function(){function ub(a){var c=null,d=null,h=null,k=0,p=this,q=null,n={Ka:[],ab:"none",Fb:!1,$a:null,grid:null};this.A=function(){this.ye(q.Ka);h.cg({ab:q.ab,Fb:q.Fb,$a:q.$a})};this.df=function(l){return c[l]};this.Qb=function(l){["s32","s34","s27"].forEach(function(t){C.M(t,[{type:"2f",name:"u20",value:l}])});c&&c.forEach(function(t){t.Qb(l)})};this.ye=function(l){var t=null;k=l.length;var x=null!==q.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),B=x?q.grid:[1,1];x&&this.Qb(B);
c=l.map(function(w,z){w=Object.assign({},w,{index:z,parent:p,Hb:t,tf:z===k-1,Xa:x,Z:B});return t=z=0===z?Nb.instance(w):Ob.instance(w)});d=c[0];h=c[k-1];c.forEach(function(w,z){0!==z&&w.Kf()})};this.V=function(l){l.h(0);var t=l;c.forEach(function(x){t=x.V(t,!1)});return t};this.sb=function(){return d.cf()};this.wd=function(){return h.F()};this.Wa=function(){return h.ff()};this.td=function(){return h.td()};this.m=function(){c&&(c.forEach(function(l){l.m()}),h=d=c=null,k=0)};"undefined"!==typeof a&&
(q=Object.assign({},n,a),this.A())}function eb(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function vb(a,c,d){var h=1,k=0;for(d=c+d-1;d>=c;--d)k+=h*eb(a,d),h*=2;return k}function wb(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var c=a.length,d=new Uint8Array(c),h=0;h<c;++h)d[h]=a.charCodeAt(h);return d}function fb(a){return"string"===typeof a?JSON.parse(a):a}function Pb(a){if("undefined"===typeof fb(a).nb){var c=fb(a);a=c.ne;var d=c.nf,h=c.n;c=wb(c);for(var k=
new Float32Array(h),p=new Float32Array(d),q=a+d+1,n=0;n<h;++n){var l=q*n,t=0===eb(c,l)?1:-1,x=vb(c,l+1,a);l=l+1+a;for(var B=p.length,w=0,z=l;z<l+B;++z)p[w]=eb(c,z,!0),++w;for(B=l=0;B<d;++B)l+=p[B]*Math.pow(2,-B-1);k[n]=0===l&&0===x?0:t*(1+l)*Math.pow(2,1+x-Math.pow(2,a-1))}a=k}else if(h=fb(a),a=h.nb,0===a)a=new Uint8Array(h.nb);else{d=h.n;h=wb(h);c=new Uint32Array(d);for(k=0;k<d;++k)c[k]=vb(h,k*a,a);a=c}return a}function Za(){return-1!==[ia.ready,ia.play,ia.pause].indexOf(ma)}function gb(){if(ma===
ia.play)return!1;ma=ia.play;Ia.stop();xb(0)}function yb(){if(ma!==ia.play)return!1;ra.stop();Ia.stop();ma=ia.pause;return!0}function Ja(a,c,d,h,k){a=4*(2*c+a)+d;return h+(ca.buffer[a]/255+ca.buffer[a+8]/65025)*(k-h)}function hb(){b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Ka.jf()}function zb(a,c,d,h,k,p,q){return aa.enableAsyncReadPixels?Z.Jb(a,c,d,h,k,p,q):Z.Xd(a,c,d,h,k)}function Qb(){var a=da.ta();ua.N();b.viewport(0,0,2,2*a);C.set("s62");ca.Aa.h(0);Q.l(!1,!1);return zb(0,0,2,2*a,ca.buffer,Ab,1)}
function xb(){ma!==ia.pause&&(aa.isCleanGLStateAtEachIteration&&(C.jd(),Q.reset(),Q.Da(),b.disable(b.DEPTH_TEST),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1),C.Ma()),ra.Cc(Rb,Qb,Sb,Ab,Tb,aa.animateProcessOrder))}function Rb(){ua.ea();if(!J.zb)if(J.yb)J.element.needsUpdate&&(J.I.ee(J.element.videoWidth,J.element.videoHeight),J.I.Pb(J.element.arrayBuffer),J.element.needsUpdate=!1);else{var a=J.element.currentTime,c=a-J.Ib;0>c&&(J.Ib=a,c=0);1E3*c<na.mg||(J.Ib+=c,J.I.refresh())}a=ra.ef();da.update(a,va);for(c=
0;c<a;++c){da.Nb(c);C.set("s64");var d=va[da.ud()];R.Ea&&C.H("u44",d.rz);da.ke("u43");Y.T.L();J.I.h(0);ca.Aa.h(1);Q.l(!1,!1);oa.track.V(Y.T)}ra.Nb();a=va[0];a.isDetected&&(C.set("s67"),wa.T.L(),J.I.h(0),C.H("u44",a.rz),C.Yf("u54",a.x,a.y,a.s),Q.l(!1,!1),oa.depth.V(wa.T))}function Ab(){ua.jg();aa.isCleanGLStateAtEachIteration&&(ua.reset(),X.reset(),b.enable(b.DEPTH_TEST));R.Tb&&R.Tb(da.Kd()?va:va[0]);aa.isCleanGLStateAtEachIteration&&(b.disable(b.BLEND),Q.reset(),Q.Da())}function Sb(){for(var a=0;a<
da.ta();++a)if(da.zf(a)){var c=a,d=Sa[c],h=[c],k=va[c],p=ib[c],q=2*c;d.jb=Ja(1,q,3,0,1);k.detected=Ba.oa(k.detected,d.jb,na.re);k.isDetected=Bb(k);d.x=Ja(0,q,1,-1,1);d.y=Ja(0,q,2,-1,1);d.ba=Ja(0,q,3,0,1);if(d.jb<aa.multiDetectionThresholdFactors[0]*aa.threshold)d.wa=Math.floor(d.wa/2),R.Ea&&(k.rz=0,k.ry=0);else{var n=ca.Zd;d.rx=Ja(1,q,0,-n[0],n[0]);d.ry=Ja(1,q,1,-n[1],n[1]);d.za=Ja(1,q,2,-n[2],n[2]);q=d.ba*ca.ae;h.dx=d.x-k.xRaw;h.dy=d.y-k.yRaw;h.bc=q-k.sRaw;h.Zb=d.rx-k.rx;h.$b=d.ry-k.ry;h.ac=R.Ea?
d.za:d.za-k.rz;n=ra.Xe();h=(1-jb.rc(sa.translationFactorRange[0],sa.translationFactorRange[1],Math.sqrt(h.dx*h.dx+h.dy*h.dy+h.bc*h.bc)/n))*(1-jb.rc(sa.rotationFactorRange[0],sa.rotationFactorRange[1],Math.sqrt(h.Zb*h.Zb+h.$b*h.$b+h.ac*h.ac)/n))*jb.rc(sa.qualityFactorRange[0],sa.qualityFactorRange[1],d.jb);c=p[++kb[c]%p.length]=h;for(n=0;n<p.length;++n)c=Math.min(c,p[n]);c=Math.max(.5,c);h=Math.min(c,h);p=Ba.oa(sa.alphaRange[1],sa.alphaRange[0],Math.pow(h,na.se));k.xRaw=Ba.oa(k.xRaw,d.x,p);k.yRaw=
Ba.oa(k.yRaw,d.y,p);k.sRaw=Ba.oa(k.sRaw,q,p);k.rx=Ba.oa(k.rx,d.rx,p);k.ry=Ba.oa(k.ry,d.ry,p);k.rz=R.Ea?k.rz+sa.followZRotAlphaFactor*p*d.za:Ba.oa(k.rz,d.za,p);q=k.sRaw*lb.Yb*Math.sin(k.ry);p=k.xRaw+Math.cos(k.rz)*q;q=k.yRaw+Math.sin(k.rz)*q/La;c=k.sRaw;h=sa.minDisplacementPx;n=.5*(p-k.x)/c*oa.track.sb();var l=.5*(q-k.y)/(c/La)*oa.track.sb();n*n+l*l>h*h&&(k.x=p,k.y=q,k.s=c);++d.wa}}}function Tb(){ma===ia.play&&Ia.Cc(xb)}function Cb(){Y.T=X.instance({isPot:!0,isFloat:!1,width:oa.track.sb()});var a=
{width:2,height:da.ta(),isFloat:!0,isPot:!1,array:da.Ne(new Float32Array([0,.5,.5,0,0,0,0,0]))};ca.Aa=Ub.instance(a);wa.T=X.instance({isPot:!0,isFloat:!1,width:oa.depth.sb()});wa.La=X.instance({isPot:!0,isFloat:!1,width:oa.depth.wd()*R.outputScaleFactor})}function mb(){C.M("s64",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u41",value:1},{type:"2f",name:"u42",value:Y.D},{type:"1f",name:"u43",value:.5},{type:"1f",name:"u44",value:0}]);C.M("s65",[{type:"1i",name:"u45",value:0},{type:"1i",name:"u41",
value:1},{type:"1f",name:"u48",value:na.hg},{type:"1f",name:"u49",value:aa.threshold},{type:"3f",name:"u47",value:[ca.R[0]*Y.D[0],ca.R[1]*Y.D[1],ca.R[2]]},{type:"1f",name:"u43",value:.5},{type:"1f",name:"u50",value:1},{type:"1f",name:"u44",value:0}]);C.M("s66",[{type:"1i",name:"u45",value:0}]);C.M("s62",[{type:"1i",name:"u41",value:0},{type:"1f",name:"u53",value:Y.D[0]},{type:"2f",name:"u52",value:[0,.5/da.ta()]}]);C.M("s67",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u42",value:Y.D}]);C.M("s68",
[{type:"1i",name:"u55",value:1},{type:"1i",name:"u56",value:0}])}function nb(){Y.D[0]=1;Y.D[1]=Y.v/Y.O;Ta.A({Gb:aa.overlapFactors,Qd:aa.nScaleLevels,v:Y.v,O:Y.O,$d:aa.scale0Factor,R:ca.R,Dc:aa.scanCenterFirst})}function Db(a,c,d){return new Promise(function(h){a?d("string"===typeof a?JSON.parse(a):a,h):$a.get(c,function(k){k=JSON.parse(k);d(k,h)})})}function Vb(a,c){var d=a.exportData;ca.Zd=d.rotationEulerAnglesFactors;if(d.translationScalingFactors){var h=d.translationScalingFactors,k=aa.translationScalingFactors;
ca.R[0]=h[0]*k[0];ca.R[1]=h[1]*k[1];ca.R[2]=h[2]*k[2]}ca.ae=d.dsMean?1+d.dsMean:1;lb.Yb=.7;"undefined"!==typeof d.fgDisplaceXFactor&&(lb.Yb=d.fgDisplaceXFactor);c(a)}function Wb(a,c){c(a)}function Xb(){if(Ka.A({ib:R.ga,width:Y.v,height:Y.O,debug:!1,xc:function(){Ma("GLCONTEXT_LOST")},antialias:R.antialias,premultipliedAlpha:!0}))return!0;Ma("GL_INCOMPATIBLE");return!1}function Yb(){var a=da.ud(),c=va[a];ca.Aa.Sf(1);b.viewport(0,a,1,1);C.set("s65");R.Ea&&C.H("u44",c.rz);da.ke("u43");var d=1,h=da.dg(Sa,
va,Y.v/Y.O);da.Kd()&&(h&&(d=0,Sa[a].wa=0,c.isDetected=!1,c.detected=0),C.H("u50",d));C.Zf("u46",Ta.get(a));Q.l(!1,!1);if(da.xf()||h)b.viewport(1,a,1,1),C.set("s66"),C.H("u50",d),Q.l(!1,!1);ca.Aa.sync()}function Zb(a){var c=va[0];C.set("s68");wa.La.L();a.h(0);wa.T.h(1);Q.l(!1,!1);C.set("s1");ua.N();wa.La.h(0);a=wa.La.F();Q.l(!1,!1);zb(0,0,a,a,c.RGBDBuf,null,1)}function Eb(){J.I&&J.I.remove();J.yb=J.element.isFakeVideo?!0:!1;if(J.yb){var a=Fb();a={isFlipY:!1,array:J.element.arrayBuffer,width:a.w,height:a.Ga,
isKeepArray:!0}}else a={J:J.element};J.Ic=X.instance(Object.assign({isPot:!1,isLinear:!0,isFloat:!1},a));J.I=J.Ic}function Na(){var a=[{type:"mat2",name:"u40",value:J.B}];C.M("s63",[{type:"1i",name:"u1",value:0}].concat(a));C.M("s64",a);C.M("s67",a)}function Oa(){var a=[.5,.5],c=J.D[1]/J.D[0];La=Ka.X()/Ka.F();90===Math.abs(qa.rotate)&&(c=1/c);c>La?a[1]*=La/c:a[0]*=c/La;C.M("s65",[{name:"u51",type:"1f",value:La}]);J.B[0]=0;J.B[1]=0;J.B[2]=0;J.B[3]=0;switch(qa.rotate){case 0:J.B[0]=a[0];J.B[3]=a[1];
break;case 180:J.B[0]=-a[0];J.B[3]=-a[1];break;case 90:J.B[1]=a[0];J.B[2]=-a[1];break;case -90:J.B[1]=-a[0],J.B[2]=a[1]}qa.flipX&&(J.B[0]*=-1,J.B[2]*=-1);J.zb||(J.B[1]*=-1,J.B[3]*=-1)}function Fb(){var a={w:J.element.videoWidth||J.element.width,Ga:J.element.videoHeight||J.element.height};if(!a.w||!a.Ga||4>a.w||4>a.Ga)throw Error("INVALID VIDEO DIMENSIONS - width = "+a.w+" height = "+a.Ga);return a}function ob(){var a=Fb(),c=J.D[0]!==a.w||J.D[1]!==a.Ga;c&&(J.D[0]=a.w,J.D[1]=a.Ga);return c}function ab(a,
c){if(ma===ia.error)return!1;J.element=a;ob();c&&c();return!0}function Gb(a,c,d){a&&a();J.Sa={video:{facingMode:{exact:qa.facingMode},width:{min:qa.minWidth,max:qa.maxWidth,ideal:qa.idealWidth},height:{min:qa.minHeight,max:qa.maxHeight,ideal:qa.idealHeight}},audio:!1};W.Yc(J.Sa,qa.deviceId);W.get(J.element?J.element:W.zd(),function(h){c&&c(h);d(h)},function(){Ma("WEBCAM_UNAVAILABLE")},J.Sa)}function Ma(a){ma!==ia.error&&(ma=ia.error,R.Ra&&R.Ra(a))}function Bb(a){return a.detected>aa.multiDetectionThresholdFactors[1]*
aa.threshold}var Ba={ph:function(a){return Math.ceil(Math.log2(a))},Kh:function(a){return Math.log2(a)},Hh:function(a){return 0===Math.log2(a)%1},yg:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},zg:function(a,c,d){return Math.min(Math.max(a,c),d)},Cg:function(a){return a*Math.PI/180},Rh:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},Sh:function(a){return Math.round(1E6*a)/1E6},qh:function(a,c){return(100*a/c).toFixed(3)},oa:function(a,
c,d){return a*(1-d)+c*d},Lh:function(a,c){return a[0]*(1-c)+a[1]*c},Me:function(a,c){return Ba.Ee(a-c)},Ee:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},Hg:function(a,c){return Math.abs(Ba.Me(a,c))},ng:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),Math.cos(a)+Math.cos(c))}},$a={get:function(a,c,d){var h=new XMLHttpRequest;h.open("GET",a,!0);h.withCredentials=!1;h.onreadystatechange=function(){4===h.readyState&&(200===h.status||0===h.status?c(h.responseText):
"undefined"!==typeof d&&d(h.status))};h.send()},gf:function(a){return new Promise(function(c,d){$a.get(a,c,d)})},mh:function(a,c,d){a+=d?"?"+$a.Qe(d):"";$a.get(a,function(h){c(JSON.parse(h))})},Nh:function(a,c,d){var h=new XMLHttpRequest;h.open("POST",a,!0);h.setRequestHeader("Content-type","application/x-www-form-urlencoded");h.onreadystatechange=function(){4!==h.readyState||200!==h.status&&0!==h.status||d(h.responseText)};h.send(c)},Qe:function(a){return"string"===typeof a?a:Object.keys(a).map(function(c){return encodeURIComponent(c)+
"="+encodeURIComponent(a[c])}).join("&")},$g:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},$b={create:function(a,c){for(var d=Array(c),h=0;h<c;++h)d[h]=a;return d},Dg:function(a,c){for(var d=0;d<a.length;++d)c[d]=a[d]},clone:function(a){for(var c=Array(a.length),d=0;d<a.length;++d)c[d]=a[d];return c},Vh:function(a,c,d){a.forEach(function(h,k){c[k]=h*d})},ci:function(a){for(var c=a.length-1;0<c;--c){var d=Math.floor(Math.random()*
(c+1)),h=a[c];a[c]=a[d];a[d]=h}},ei:function(a){return a.sort(function(c,d){return c-d})},gg:function(a){return Array.isArray(a)||a.constructor===Float32Array||a.constructor===Uint8Array}},pb={Wb:function(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=pb.Wb(a[d],c);return a},Gg:function(a){return JSON.parse(JSON.stringify(a))}},jb={di:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},rc:function(a,c,d){return Math.min(Math.max((d-
a)/(c-a),0),1)},Sg:function(a,c,d,h){return Math.pow(Math.min(Math.max((h-a)/(c-a),0),1),d)},ji:function(){return 0},Mh:function(){return 1},Jh:function(a){return a},Pg:function(a){return a*a},Ug:function(a){return a*(2-a)},Mg:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},Kg:function(a){return a*a*a},Tg:function(a){return--a*a*a+1},Lg:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Qg:function(a){return a*a*a*a},Vg:function(a){return 1- --a*a*a*a},Ng:function(a){return.5>a?8*a*a*a*a:1-8*--a*
a*a*a},Rg:function(a){return a*a*a*a*a},Wg:function(a){return 1+--a*a*a*a*a},Og:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},ac={Ue:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+c+"))-vec4(1.),"+c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},C=function(){function a(f,
m,H){m=f.createShader(m);f.shaderSource(m,H);f.compileShader(m);return f.getShaderParameter(m,f.COMPILE_STATUS)?m:null}function c(f,m,H){m=a(f,f.VERTEX_SHADER,m);H=a(f,f.FRAGMENT_SHADER,H);f===b&&n.push(m,H);var M=f.createProgram();f.attachShader(M,m);f.attachShader(M,H);f.linkProgram(M);return M}function d(f){return["float","sampler2D","int"].map(function(m){return"precision "+f+" "+m+";\n"}).join("")}function h(f,m){m.o=m.o?!0:!1;if(!m.o){m.Ba=m.Ba||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";
m.Ca=m.Ca||["a0"];m.sa=m.sa||[2];m.precision=m.precision||w;m.id=x++;void 0!==m.ce&&(m.ce.forEach(function(P,ea){m.g=m.g.replace(P,m.Kb[ea])}),m.ce.splice(0));m.Pc=0;m.sa.forEach(function(P){m.Pc+=4*P});var H=d(m.precision);m.ya=c(f,H+m.Ba,H+m.g);m.C={};m.i.forEach(function(P){m.C[P]=f.getUniformLocation(m.ya,P)});m.attributes={};m.Qa=[];m.Ca.forEach(function(P){var ea=f.getAttribLocation(m.ya,P);m.attributes[P]=ea;m.Qa.push(ea)});if(m.j){f.useProgram(m.ya);t=m;l=m.id;for(var M in m.j)f.uniform1i(m.C[M],
m.j[M])}m.va=!0}}function k(f){za.Wf(N);l!==f.id&&(N.S(),l=f.id,t=f,b.useProgram(f.ya),f.Qa.forEach(function(m){0!==m&&b.enableVertexAttribArray(m)}))}function p(f,m,H){h(f,m,H);f.useProgram(m.ya);f.enableVertexAttribArray(m.attributes.a0);l=-1;return t=m}function q(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var n=[],l=-1,t=null,x=0,B=!1,w="highp",z=["u1"],v=["u0"],E={u1:0},e={u0:0},A={u1:0,u2:1},K={u1:0,u3:1},y=["u1","u3","u4"],
D={u5:0},g=["u6","u7","u8","u9"],r={u6:0,u7:1},G={s0:q(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:z,j:E,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:A},s3:{g:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",i:["u1","u10","u11"],j:E,o:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:z,j:E},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],j:A},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:z,j:E},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:z,j:E},s8:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",
i:["u0","u10"],j:e},s9:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",i:["u0","u10"],j:e},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:z,j:E},s11:{g:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",
i:["u1","u12","u13"],j:{u1:0,u12:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",i:["u1","u14"],j:E},s13:{g:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",
i:z,j:E,o:!0},s14:{g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:z,j:E,o:!0},s15:{g:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],j:E},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:v,j:e,o:!0},s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:v,j:e,o:!0},s18:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:v,j:e,o:!0},s19:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:v,j:e,o:!0},s20:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:v,j:e},s21:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:v,j:e},s22:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:v,j:e,o:!0},s23:{g:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u16","u17"],j:{u0:0,u16:1},o:!0},s24:{g:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u18"],j:E},s25:{g:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],j:Object.assign({u19:2},r),o:!0},s26:{g:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:g,j:r},s27:{g:"uniform float u8,u9;uniform vec2 u20;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=c+fract(b*u8)/u20,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u7,f),h=texture2D(u6,d);gl_FragColor=g*h;}",
i:["u20"].concat(g),j:r,o:!0},s28:{g:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(g),j:Object.assign({u25:3,u22:4,u23:5,u24:6},r),o:!0},s29:{g:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h;b=floor(u28*b+.5*(u9-1.)*(f-u28));vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u7,j),o=texture2D(u6,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u27*u27+q)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(g),j:Object.assign({u3:2},r)},s30:{g:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],j:r,o:!0},s31:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:y,j:K},s32:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(y),j:K,o:!0},s33:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:y,j:K,o:!0},s34:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(y),j:K,o:!0},s35:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:y,j:K,o:!0},s36:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:z,j:E,precision:"lowp"},s37:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],j:E,precision:"lowp"},s38:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],j:E,precision:"lowp"},s39:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],j:A,o:!0},s40:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],j:A,o:!0},s41:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],j:D},s42:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
j:D,o:!0},s43:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:E,precision:"lowp",o:!0},s44:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
j:E,precision:"lowp",o:!0},s45:{g:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],j:{u1:0,u16:1,u31:2},o:!0}},L={s46:{g:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],Kb:["1.1111","gl_FragColor\\*=2.2222;"]},s47:{g:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),Kb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},u=null,O=null,N={Bb:function(){return B},A:function(){if(!B){u=pb.Wb(G,2);O=pb.Wb(L,2);w="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var f in u)h(b,u[f],f);C.set("s0");b.enableVertexAttribArray(0);B=!0}},eb:function(f){f.forEach(function(m){N.Zc(m)})},Zc:function(f){u[f.id]=f;h(b,f,f.id)},lf:function(f,
m,H){m||(m=f);u[m]=Object.create(O[f]);u[m].sf=!0;O[f].Kb&&O[f].Kb.forEach(function(M,P){u[m].g=u[m].g.replace(new RegExp(M,"g"),H[P])});h(b,u[m],m)},set:function(f){var m=u[f];m.o&&(m.o=!1,h(b,m,f));k(m)},bb:function(f){return p(f,q(),"s48")},Gc:function(f){return p(f,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:w},"s49")},Re:function(f){return"undefined"===typeof u[f]?!1:u[f].va},S:function(){-1!==l&&(l=-1,t.Qa.forEach(function(f){0!==f&&b.disableVertexAttribArray(f)}))},Hc:function(){var f=
0;t.Qa.forEach(function(m,H){H=t.sa[H];b.vertexAttribPointer(m,H,b.FLOAT,!1,t.Pc,f);f+=4*H})},jd:function(){b.enableVertexAttribArray(0)},Ma:function(){N.Lb(b)},Lb:function(f){f.vertexAttribPointer(t.Qa[0],2,f.FLOAT,!1,8,0)},Zh:function(f,m){b.uniform1i(t.C[f],m)},H:function(f,m){b.uniform1f(t.C[f],m)},W:function(f,m,H){b.uniform2f(t.C[f],m,H)},Xf:function(f,m){b.uniform2fv(t.C[f],m)},Zf:function(f,m){b.uniform3fv(t.C[f],m)},Yf:function(f,m,H,M){b.uniform3f(t.C[f],m,H,M)},$f:function(f,m,H,M,P){b.uniform4f(t.C[f],
m,H,M,P)},ge:function(f,m){b.uniform4fv(t.C[f],m)},$h:function(f,m){b.uniformMatrix2fv(t.C[f],!1,m)},ai:function(f,m){b.uniformMatrix3fv(t.C[f],!1,m)},bi:function(f,m){b.uniformMatrix4fv(t.C[f],!1,m)},M:function(f,m){N.set(f);m.forEach(function(H){switch(H.type){case "4f":b.uniform4fv(t.C[H.name],H.value);break;case "3f":b.uniform3fv(t.C[H.name],H.value);break;case "2f":b.uniform2fv(t.C[H.name],H.value);break;case "1f":b.uniform1f(t.C[H.name],H.value);break;case "1i":b.uniform1i(t.C[H.name],H.value);
break;case "mat2":b.uniformMatrix2fv(t.C[H.name],!1,H.value);break;case "mat3":b.uniformMatrix3fv(t.C[H.name],!1,H.value);break;case "mat4":b.uniformMatrix4fv(t.C[H.name],!1,H.value)}})},oh:function(){return"lowp"},m:function(){N.S();b.disableVertexAttribArray(0);for(var f in u){var m=u[f];m.va&&(m.va=!1,b.deleteProgram(m.ya));m.sf&&delete u[f]}n.forEach(function(H){b.deleteShader(H)});n.splice(0);x=0;B=!1;t=null;l=-1}};return N}(),b=null,Ka=function(){function a(v){console.log("ERROR in ContextFF: ",
v);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(v,E,e){v.setAttribute("width",E);v.setAttribute("height",e)}function h(v){function E(){Ea.m();Z.reset();A.getExtension("WEBGL_lose_context").loseContext()}if(c())return!1;var e=document.createElement("canvas");d(e,5,5);var A=null;try{A=e.getContext("webgl2",v)}catch(K){return!1}if(!A)return!1;k(A);Z.kd(A);v=Z.Xb(A);if(!v.ja&&!v.la)return E(),!1;v=Ea.$c(A,v);E();return v?!0:!1}function k(v){v.clearColor(0,
0,0,0);v.disable(v.DEPTH_TEST);v.disable(v.BLEND);v.disable(v.DITHER);v.disable(v.STENCIL_TEST);v.disable(v.CULL_FACE);v.GENERATE_MIPMAP_HINT&&v.FASTEST&&v.hint(v.GENERATE_MIPMAP_HINT,v.FASTEST);v.disable(v.SAMPLE_ALPHA_TO_COVERAGE);v.disable(v.SAMPLE_COVERAGE);v.depthFunc(v.LEQUAL);v.clearDepth(1)}var p=null,q=null,n=null,l=null,t=!0,x=null,B=null,w=[],z={F:function(){return p.width},X:function(){return p.height},fh:function(){return p},dh:function(){return b},ma:function(){return t},flush:function(){b.flush()},
jf:function(){ua.ea();z.Qf()},Qf:function(){X.reset();Q.reset();C.S();C.jd();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);Q.Da();C.Ma()},We:function(){x||(x=new Uint8Array(p.width*p.height*4));b.readPixels(0,0,p.width,p.height,b.RGBA,b.UNSIGNED_BYTE,x);return x},hh:function(){return p.toDataURL("image/jpeg")},ih:function(){ua.N();q||(q=document.createElement("canvas"),n=q.getContext("2d"));d(q,p.width,p.height);for(var v=z.We(),E=n.createImageData(q.width,q.height),e=q.width,A=q.height,K=E.data,y=0;y<
A;++y)for(var D=A-y-1,g=0;g<e;++g){var r=4*(y*e+g),G=4*(D*e+g);K[r]=v[G];K[r+1]=v[G+1];K[r+2]=v[G+2];K[r+3]=v[G+3]}n.putImageData(E,0,0);return q.toDataURL("image/png")},gh:function(v){!q&&v&&(q=document.createElement("canvas"),n=q.getContext("2d"));var E=v?q:document.createElement("canvas");d(E,p.width,p.height);(v?n:E.getContext("2d")).drawImage(p,0,0);return E},A:function(v){v=Object.assign({ka:null,xc:null,ib:null,ed:null,width:512,height:512,premultipliedAlpha:!1,qf:!0,antialias:!1,debug:!1,
Fg:!1},v);v.ka?(b=v.ka,p=v.ka.canvas):v.ed&&!v.ib?p=document.getElementById(v.ed):v.ib&&(p=v.ib);p||(p=document.createElement("canvas"));p.width=v.width;p.height=v.height;if(b)t=b instanceof WebGL2RenderingContext;else{t=!0;var E={antialias:v.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:v.premultipliedAlpha,stencil:!1,depth:v.qf,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(E.antialias=!1);var e=h(E);e||!E.antialias||c()||(E.antialias=!1,e=h(E));e&&(b=p.getContext("webgl2",E));b?t=!0:((b=p.getContext("webgl",E))||(b=p.getContext("experimental-webgl",E)),t=!1)}if(!b)return a("WebGL1 and 2 are not enabled");v.xc&&p.addEventListener&&(l=b.getExtension("WEBGL_lose_context"))&&(B=v.xc,p.addEventListener("webglcontextlost",B,!1));if(!Z.A())return a("Not enough GL capabilities");k(b);C.A();Q.A();Ea.$c(b,Z.Ve());w.forEach(function(A){A(b)});w.splice(0);return!0},tg:function(){return new Promise(function(v){b?
v(b):w.push(v)})},m:function(){b&&(Z.m(),C.m(),Ea.m());l&&B&&(p.removeEventListener("webglcontextlost",B,!1),l=B=null);b=x=n=q=p=null;w.splice(0)}};return z}(),za=function(){function a(){null===c&&("undefined"!==typeof C?c=C:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},Wf:function(d){c!==d&&(c&&c.S(),c=d)},Bb:function(){return c.Bb()},Ma:function(){return c.Ma()},Lb:function(d){return c.Lb(d)},Hc:function(){return c.Hc()},S:function(){return c.S()},set:function(d){a();
return c.set(d)},bb:function(d){a();return c.bb(d)},Gc:function(d){a();return c.Gc(d)}}}(),Da=function(){function a(f){b.bindTexture(b.TEXTURE_2D,f)}function c(f){L[0]=f;f=u[0];var m=f>>16&32768,H=f>>12&2047,M=f>>23&255;return 103>M?m:142<M?m|31744|((255==M?0:1)&&f&8388607):113>M?(H|=2048,m|(H>>114-M)+(H>>113-M&1)):m=(m|M-112<<10|H>>1)+(H&1)}function d(f){var m=new Uint16Array(f.length);f.forEach(function(H,M){m[M]=c(H)});return m}function h(){if(null!==O.kc)return O.kc;var f=p(d([.5,.5,.5,.5]),!0);
return null===f?!0:O.kc=f}function k(){if(null!==O.lc)return O.lc;var f=p(new Uint8Array([127,127,127,127]),!1);return null===f?!0:O.lc=f}function p(f,m){if(!za.Bb()||!E)return null;var H=null,M=Math.sqrt(f.length/4);try{var P=b.getError();if("FUCKING_BIG_ERROR"===P)return!1;H=N.instance({isFloat:!1,U:m,array:f,width:M});P=b.getError();if(P!==b.NO_ERROR)return!1}catch(ea){return!1}pa.N();b.viewport(0,0,M,M);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);za.set("s0");H.hb(0);la.l(!0,!0);f=4*M*M;
m=new Uint8Array(f);b.readPixels(0,0,M,M,b.RGBA,b.UNSIGNED_BYTE,m);M=!0;for(P=0;P<f;++P)M=M&&3>Math.abs(m[P]-127);H.remove();pa.ea();return M}var q=0,n=null,l=0,t=null,x=null,B=null,w=null,z=null,v=null,E=!1,e=[],A={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,J:null,jc:null,rf:!1,U:!1,G:null,Eb:4,sc:0},K=!1,y=null,D=null,g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],
r=!1,G=!1,L=new Float32Array(1),u=new Int32Array(L.buffer),O={kc:null,lc:null},N={A:function(){E||(z=[b.RGBA,null,b.RGBA,b.RGBA],v=[b.RGBA,null,b.RGBA,b.RGBA],n=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],r="undefined"!==typeof JEContext,G="undefined"!==typeof Z,r&&JEContext.Ih()&&n.push(b.TEXTURE8,b.TEXTURE9),t=[-1,-1,-1,-1,-1,-1,-1,-1],w=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],E=!0)},kf:function(){if(!x){for(var f=new Float32Array(16384),m=0;16384>m;++m)f[m]=
2*Math.random()-1;x={random:N.instance({isFloat:!0,isPot:!0,array:f,width:64}),oe:N.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}N.lg()},fe:function(f){b.framebufferTexture2D(pa.hc(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,f,0)},xh:function(){return x.oe},lg:function(){w[1]=Z.fc(b)},Uf:function(){v=z=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},Yd:function(f){C.set("s1");pa.N();var m=f.F(),H=f.X();b.viewport(0,0,m,H);f.h(0);la.l(!1,!1)},Ph:function(f,m){N.Yd(f);b.readPixels(0,0,f.F(),f.X(),
b.RGBA,b.UNSIGNED_BYTE,m)},Qh:function(f,m){N.Yd(f);return Z.Jb(0,0,f.F(),f.X(),m)},rd:function(f,m,H,M,P,ea,xa){f.activeTexture(f.TEXTURE0);var Fa=f.createTexture();f.bindTexture(f.TEXTURE_2D,Fa);P=P instanceof Float32Array?P:new Float32Array(P);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,
ea);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,H,M,0,f.RGBA,f.FLOAT,P);f.bindTexture(f.TEXTURE_2D,null);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);xa&&(pa.ea(),C.bb(f));f.viewport(0,0,H,M);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,m,0);f.bindTexture(f.TEXTURE_2D,Fa);xa?la.l(!0,!0):Q.pb(f);f.deleteTexture(Fa);E&&(t[0]=-1,B=null,q=0)},Sb:function(f){f!==q&&(b.activeTexture(n[f]),q=f)},instance:function(f){var m;function H(){T=void 0!==F.J.videoWidth?F.J.videoWidth:F.J.width;U=void 0!==
F.J.videoHeight?F.J.videoHeight:F.J.height}function M(I){var S=b.getError();if("FUCKING_BIG_ERROR"===S)return!1;b.texImage2D(b.TEXTURE_2D,0,ja,fa,ha,I);S=b.getError();S!==b.NO_ERROR&&fa!==b.RGBA&&(fa=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,ja,fa,ha,I));return!0}function P(){if(!Hb){a(ta);Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,Ca);F.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,F.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,F.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):
(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));F.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.jh().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.pg);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,F.isLinear?b.LINEAR:b.NEAREST);F.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,F.isMipmap&&!Pa?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,
F.isMipmap&&!Pa?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);fa=z[F.Eb-1];ja=v[F.Eb-1];ha=w[qb];if(Z.ma()){var I=Z.Ye();fa===b.RGBA&&ha===b.FLOAT?F.isMipmap||F.isLinear?ja=Ea.$e(b):Z.ad()?I&&(ja=I):ja=b.RGBA16F||b.RGBA:fa===b.RGB&&ha===b.FLOAT&&I&&(ja=I,fa=b.RGBA)}if(F.U&&!F.isFloat||F.isFloat&&F.isMipmap&&Ea.wf())ja=Z.Ze(),ha=Z.fc(b);F.sc&&(bb=F.sc);F.isSrgb&&4===F.Eb&&(fa=JEContext.vh());if(F.J)M(F.J);else if(F.url)M(Ha);else if(ya){I=ya;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,
0,ja,T,U,0,fa,ha,I),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,ja,T,U,0,fa,ha,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,T,U,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(oc){b.texImage2D(b.TEXTURE_2D,0,ja,T,U,0,fa,ha,null)}F.isKeepArray||(ya=null)}else I=b.getError(),"FUCKING_BIG_ERROR"!==I&&(b.texImage2D(b.TEXTURE_2D,0,ja,T,U,0,fa,ha,null),I=b.getError(),I!==b.NO_ERROR&&(fa=b.RGBA,F.U&&ha!==b.FLOAT&&(ha=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,ja,T,U,0,fa,ha,null))));if(F.isMipmap)if(!Pa&&
ba)ba.ec(),cb=!0;else if(Pa){I=Math.log2(Math.min(T,U));Ra=Array(1+I);Ra[0]=ta;for(var S=1;S<=I;++S){var ka=Math.pow(2,S),V=T/ka;ka=U/ka;var Qa=b.createTexture();a(Qa);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,ja,V,ka,0,fa,ha,null);a(null);Ra[S]=Qa}cb=!0}a(null);t[q]=-1;Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Ua=!0;F.G&&ba&&(F.G(ba),F.G=null)}}function ea(){for(var I=T*U,S=2*I,ka=3*I,V=
0;V<I;++V)Aa[0][V]=Va[V],Aa[1][V]=Va[V+I],Aa[2][V]=Va[V+S],Aa[3][V]=Va[V+ka]}function xa(){var I=T*U*4;Ga=[new Uint8Array(I),new Uint8Array(I),new Uint8Array(I),new Uint8Array(I)];Aa=[new Float32Array(Ga[0].buffer),new Float32Array(Ga[1].buffer),new Float32Array(Ga[2].buffer),new Float32Array(Ga[3].buffer)];db=new Uint8Array(4*I);Va=new Float32Array(db.buffer);Wa=!0}function Fa(){m=new Uint8Array(T*U*4);Ib=new Float32Array(m.buffer);rb=!0}var F=Object.assign({},A,f),Xa=l++;null===F.isFlipY&&(F.isFlipY=
F.url?!0:!1);F.data&&(F.array="string"===typeof F.data?Pb(F.data):F.isFloat?new Float32Array(F.data):new Uint8Array(F.data),F.isFlipY=!1);var qb=0,Jb=F.J?!0:!1,Ya=null,sb=null,Kb=!1;F.U=F.U||F.isFloat;F.U&&(qb=1);!F.rf&&F.isFloat&&G&&!Z.ad()&&(F.isFloat=!1);F.isFloat&&(qb=2);F.isAnisotropicFiltering&&r&&!JEContext.Bh()&&(F.isAnisotropicFiltering=!1);var ta=F.jc||b.createTexture(),Ha=null,ya=!1,T=0,U=0,Ua=!1,Hb=!1,Wa=!1,Aa=null,Ga=null,db=null,Va=null,ja=null,fa=null,ha=null,Ca=F.isFlipY,bc=(f=F.U&&
F.isMipmap)&&Ea.ze(),Pa=f&&!bc?!0:!1,Ra=null,bb=-1,Lb=-1,cb=!1;var rb=!1;var Ib=m=null;F.width&&(T=F.width,U=F.height?F.height:T);var ba={get:function(){return ta},F:function(){return T},X:function(){return U},yh:function(){return F.url},Ch:function(){return F.isFloat},Eh:function(){return F.U},Xh:function(I){ta=I},Fh:function(){return F.isLinear},ec:function(){b.generateMipmap(b.TEXTURE_2D)},we:function(I,S){Pa?(I||(I=ba.vd()),N.Sb(S),a(Ra[I]),t[S]=-1):ba.h(S)},vd:function(){-1===bb&&(bb=Math.log(T)/
Math.log(2));return bb},Te:function(I){I||(I=ba.vd());if(Pa){C.set("s12");N.Sb(0);for(var S=T,ka=U,V=1;V<=I;++V)S/=2,ka/=2,C.W("u14",.25/S,.25/ka),b.viewport(0,0,S,ka),a(Ra[V-1]),b.framebufferTexture2D(pa.hc(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,Ra[V],0),la.l(!1,1===V);t[0]=-1}else I!==Lb&&(Lb=I,b.TEXTURE_MAX_LEVEL&&b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAX_LEVEL,I)),ba.ec()},Yh:function(I){(Jb=!$b.gg(I))?(ya=null,F.J=I,H()):ya=I},h:function(I){if(!Ua)return!1;N.Sb(I);if(t[I]===Xa)return!1;a(ta);t[I]=
Xa;return!0},hb:function(I){b.activeTexture(n[I]);q=I;a(ta);t[I]=Xa},u:function(){B=ba;N.fe(ta)},L:function(){b.viewport(0,0,T,U);B=ba;N.fe(ta)},Nc:N.Nc,ee:function(I,S){T=I;U=S},resize:function(I,S){ba.ee(I,S);P()},clone:function(I){I=N.instance({width:T,height:U,U:F.U,isFloat:F.isFloat,isLinear:F.isLinear,isMirrorY:F.isMirrorY,isFlipY:I?!Ca:Ca,isPot:F.isPot});za.set("s0");pa.ea();I.L();ba.h(0);la.l(!0,!0);return I},ag:function(){b.viewport(0,0,T,U)},remove:function(){b.deleteTexture(ta);Hb=!0;e.splice(e.indexOf(ba),
1);ba=null},refresh:function(){ba.hb(0);Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Jb?b.texImage2D(b.TEXTURE_2D,0,ja,fa,ha,F.J):b.texImage2D(b.TEXTURE_2D,0,ja,T,U,0,fa,ha,ya);Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Wd:function(){Wa||xa();b.readPixels(0,0,T,4*U,b.RGBA,b.UNSIGNED_BYTE,db);ea();return Aa},Nf:function(){Wa||xa();return Z.Jb(0,0,T,4*U,db).then(function(){ea();return Aa})},Pf:function(){rb||Fa();b.readPixels(0,0,T,U,b.RGBA,b.UNSIGNED_BYTE,m);return Ib},Of:function(){rb||Fa();return Z.Jb(0,
0,T,U,m)},fd:function(I){pa.N();C.set("s15");ba.h(0);if(I)b.viewport(0,0,T,U),C.$f("u15",.25,.25,.25,.25),la.l(!1,!0);else for(I=0;4>I;++I)b.viewport(0,U*I,T,U),C.ge("u15",g[I]),la.l(!1,0===I)},Pb:function(I){var S=ha===w[0]&&!k();a(ta);Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);S?(Kb||(Ya=document.createElement("canvas"),Ya.width=T,Ya.height=U,sb=Ya.getContext("2d"),sb.createImageData(T,U),Kb=!0),null.data.set(I),sb.putImageData(null,0,0),b.texImage2D(b.TEXTURE_2D,0,ja,fa,ha,Ya)):b.texImage2D(b.TEXTURE_2D,
0,ja,T,U,0,fa,ha,I);t[q]=Xa;Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},ii:function(I,S){a(ta);S&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,ja,fa,ha,I);t[q]=Xa;S&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Wh:function(I,S){var ka=T*U,V=4*ka;I=F.U?I?"RGBE":"JSON":"RGBA";S&&(I=S);S=Z.ma()&&!1;var Qa=null;switch(I){case "RGBE":Qa="s13";break;case "JSON":Qa=S?"s0":"s15";break;case "RGBA":case "RGBAARRAY":Qa="s7"}Wa||("RGBA"===I||"RGBE"===I||"RGBAARRAY"===I?(Ga=new Uint8Array(V),
Wa=!0):"JSON"!==I||S||xa());pa.N();C.set(Qa);ba.h(0);V=null;if("RGBA"===I||"RGBE"===I||"RGBAARRAY"===I){b.viewport(0,0,T,U);la.l(!0,!0);b.readPixels(0,0,T,U,b.RGBA,b.UNSIGNED_BYTE,Ga);if("RGBAARRAY"===I)return{data:Ga};K||(y=document.createElement("canvas"),D=y.getContext("2d"),K=!0);y.width=T;y.height=U;ka=D.createImageData(T,U);ka.data.set(Ga);D.putImageData(ka,0,0);V=y.toDataURL("image/png")}else if("JSON"===I)if(S)V=new Float32Array(ka),b.viewport(0,0,T,U),la.l(!0,!0),b.readPixels(0,0,T,U,b.RGBA,
b.FLOAT,V);else{for(V=0;4>V;++V)b.viewport(0,U*V,T,U),C.ge("u15",g[V]),la.l(!V,!V);ba.Wd();V=Array(ka);for(S=0;S<ka;++S)V[4*S]=Aa[0][S],V[4*S+1]=Aa[1][S],V[4*S+2]=Aa[2][S],V[4*S+3]=Aa[3][S]}return{format:I,data:V,width:T,height:U,isMirrorY:F.isMirrorY,isFlipY:"RGBA"===I?F.isFlipY:!F.isFlipY}}};F.isMipmap&&!Pa&&Ua&&!cb&&(ba.ec(),cb=!0);if(F.url)a(ta),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Ha=new Image,Ha.Eg="Anonymous",Ha.crossOrigin="Anonymous",Ha.src=F.url,Ha.onload=
function(){T=Ha.width;U=Ha.height;P()};else if(F.J){var Mb=function(){H();T?P():setTimeout(Mb,1)};Mb()}else F.array?(F.U&&!F.isFloat?F.array instanceof Uint16Array?(ya=F.array,P()):h()?(ya=d(F.array),P()):(P(),N.rd(b,ta,ba.F(),ba.X(),F.array,Ca,!0)):(ya=F.isFloat?F.array instanceof Float32Array?F.array:new Float32Array(F.array):F.array instanceof Uint8Array?F.array:new Uint8Array(F.array),P()),F.isKeepArray||(ya&&ya!==F.array&&(ya=null),delete F.array)):F.jc?Ua=!0:P();ba.th=ba.F;F.G&&Ua&&(F.G(ba),
F.G=null);e.push(ba);return ba},N:function(f){f!==q&&(b.activeTexture(n[f]),q=f);t[f]=-1;a(null)},sg:function(f){x.random.h(f)},Nc:function(){B=null;b.framebufferTexture2D(pa.hc(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==q&&b.activeTexture(n[0]);for(var f=0;f<n.length;++f)t[f]=-1;q=-1},Th:function(){q=-1},ig:function(){for(var f=0;f<n.length;++f)N.N(f)},sd:function(){x&&(x.random.remove(),x.oe.remove())},hi:function(f,m){if("RGBA"===f.format||"RGBE"===f.format){var H=new Image;
H.src=f.data;H.onload=function(){N.instance({isMirrorY:f.isMirrorY,isFlipY:f.isFlipY,isFloat:!1,J:H,G:function(M){if("RGBA"===f.format)m(M);else{var P=f.width,ea=f.height,xa=N.instance({isMirrorY:f.isMirrorY,isFloat:!0,width:P,height:ea,isFlipY:f.isFlipY});pa.ea();b.viewport(0,0,P,ea);C.set("s14");xa.u();M.h(0);la.l(!0,!0);N.N(0);m(xa);Z.flush();M.remove()}}})}}else"JSON"===f.format?m(N.instance({isFloat:!0,isFlipY:f.isFlipY,width:f.width,height:f.height,array:new Float32Array(f.data)})):m(!1)},Ge:d,
m:function(){B&&(ua.ea(),N.Nc(),ua.N());N.ig();e.slice(0).forEach(function(f){f.remove()});e.splice(0);E=!1;l=0;"undefined"!==typeof Ea&&Ea.m();x=null}};return N}(),Ub=function(){return{instance:function(a){var c=[Da.instance(a),Da.instance(a)],d=[c[1],c[0]],h=d,k={Sf:function(p){h[1].u();h[0].h(p);k.ie()},Tf:function(p){h[1].L();h[0].h(p);k.ie()},ie:function(){h=h===c?d:c},refresh:function(){h[0].refresh();h[1].refresh()},h:function(p){h[0].h(p)},hb:function(p){h[0].hb(p)},rg:function(p){h[1].h(p)},
nh:function(){return h[0]},rh:function(){return h[1]},Pb:function(p){h[0].Pb(p);h[1].Pb(p)},remove:function(){h[0].remove();h[1].remove();h=null},sync:function(){k.Tf(0);C.set("s0");Q.l(!1,!1)}};return k}}}(),la=function(){function a(l){var t={ca:null,indices:null};t.ca=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,t.ca);l.bufferData(l.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),l.STATIC_DRAW);t.indices=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,t.indices);l.bufferData(l.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2]),l.STATIC_DRAW);return t}var c=null,d=0,h=!1,k=[],p=-2,q=-2,n={reset:function(){q=p=-2},A:function(){h||(c=a(b),n.Da(),h=!0)},instance:function(l){var t=d++,x=l.indices?l.indices.length:0,B="undefined"===typeof l.mode?b.STATIC_DRAW:l.mode,w=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,w);b.bufferData(b.ARRAY_BUFFER,l.ca instanceof Float32Array?l.ca:new Float32Array(l.ca),B);p=t;var z=null,v=null,E=null;if(l.indices){z=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,z);
var e=null;65536>l.indices.length?(e=Uint16Array,v=b.UNSIGNED_SHORT,E=2):(e=Uint32Array,v=b.UNSIGNED_INT,E=4);e=l.indices instanceof e?l.indices:new e(l.indices);b.bufferData(b.ELEMENT_ARRAY_BUFFER,e,B);q=t}var A={xe:function(K){p!==t&&(b.bindBuffer(b.ARRAY_BUFFER,w),p=t);K&&za.Hc()},ue:function(){q!==t&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,z),q=t)},bind:function(K){A.xe(K);A.ue()},Ig:function(){b.drawElements(b.TRIANGLES,x,v,0)},Jg:function(K,y){b.drawElements(b.TRIANGLES,K,v,y*E)},remove:function(){b.deleteBuffer(w);
l.indices&&b.deleteBuffer(z);A=null}};k.push(A);return A},Da:function(){-1!==p&&(b.bindBuffer(b.ARRAY_BUFFER,c.ca),p=-1);-1!==q&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.indices),q=-1)},l:function(l,t){l&&la.Da();t&&za.Ma();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},pb:function(l){l=l||b;var t=a(l);l.bindBuffer(l.ARRAY_BUFFER,t.ca);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,t.indices);za.Lb(l);l.clear(l.COLOR_BUFFER_BIT);l.drawElements(l.TRIANGLES,3,l.UNSIGNED_SHORT,0);l.flush();l.bindBuffer(l.ARRAY_BUFFER,
null);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,null);l.deleteBuffer(t.ca);l.deleteBuffer(t.indices);n.reset();h&&(n.Da(),za.Ma())},sd:function(){var l=b,t=c;l.deleteBuffer(t.ca);l.deleteBuffer(t.indices)},m:function(){n.sd();k.forEach(function(l){l.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);n.reset();h=!1;k.splice(0);d=0}};return n}(),pa=function(){var a=null,c=null,d=null,h=!1,k=[],p={K:-2,qd:1},q={Bb:function(){return h},A:function(){if(!h){a=b.createFramebuffer();
var n=Z.ma();c=n&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=n&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;h=!0}},kh:function(){return c},af:function(){return d},hc:function(){return b.FRAMEBUFFER},sh:function(){return p},bh:function(){return a},instance:function(n){void 0===n.Dd&&(n.Dd=!1);var l=n.I?n.I:null,t=n.width,x=void 0!==n.height?n.height:n.width,B=a,w=null,z=!1,v=!1,E=0;l&&(t=t?t:l.F(),x=x?x:l.X());var e={de:function(){z||(B=b.createFramebuffer(),z=!0,E=p.qd++)},qe:function(){e.de();
e.u();w=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,w);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,t,x);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,w);b.clearDepth(1)},bind:function(A,K){E!==p.K&&(b.bindFramebuffer(c,B),p.K=E);l&&l.u();K&&b.viewport(0,0,t,x);A&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},qg:function(){E!==p.K&&(b.bindFramebuffer(c,B),p.K=E)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Ag:function(){b.clear(b.COLOR_BUFFER_BIT)},
Bg:function(){b.clear(b.DEPTH_BUFFER_BIT)},ag:function(){b.viewport(0,0,t,x)},u:function(){E!==p.K&&(b.bindFramebuffer(c,B),p.K=E)},rtt:function(A){l=A;p.K!==E&&(b.bindFramebuffer(b.FRAMEBUFFER,B),p.K=E);A.u()},N:function(){b.bindFramebuffer(c,null);p.K=-1},resize:function(A,K){t=A;x=K;w&&(b.bindRenderbuffer(b.RENDERBUFFER,w),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,t,x))},remove:function(){B===a||v||(b.bindFramebuffer(c,B),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,
null,0),w&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(B),w&&b.deleteRenderbuffer(w));v=!0}};n.Dd&&e.qe();k.push(e);return e},N:function(){b.bindFramebuffer(c,null);p.K=-1},jg:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);Z.he();p.K=-1},reset:function(){p.K=-2},ea:function(){0!==p.K&&(b.bindFramebuffer(c,a),p.K=0)},clear:function(){Z.he();b.clear(b.COLOR_BUFFER_BIT)},m:function(){q.N();k.forEach(function(n){n.remove()});
null!==a&&(b.deleteFramebuffer(a),a=null);q.reset();h=!1;k.splice(0);p.qd=1}};return q}(),Z=function(){function a(){n="undefined"===typeof Ka?JEContext:Ka;l=!0}function c(g,r,G){for(var L=0;L<r.length;++L){var u=G.getExtension(r[L]+"_"+g);if(u)return u}return null}function d(){null!==e.Ob&&(clearTimeout(e.Ob),e.Ob=null);e.Ha=!1}function h(g){if(0===e.ua.length){e.Y=b.PIXEL_PACK_BUFFER;e.ua.splice(0);e.tb.splice(0);for(var r=0;r<e.Ta;++r)e.ua.push(b.createBuffer()),e.tb.push(-1);e.ia=0;e.vc=0}b.bindBuffer(e.Y,
e.ua[e.ia]);g.byteLength!==e.tb[e.ia]&&(b.bufferData(e.Y,g.byteLength,b.STREAM_READ),e.tb[e.ia]=g.byteLength);e.zh=!0}function k(){b.bindBuffer(e.Y,null)}function p(){e.Fa.forEach(function(g){b.deleteSync(g)});e.Fa.splice(0)}function q(){e.ia=(e.ia+1)%e.Ta;++e.vc}var n=null,l=!1,t={Fd:!1,Jc:null,Kc:null,Id:!1,vf:!1,Lc:null,Jd:!1,Mc:null,Gd:!1,Ub:null,mf:!1,Vb:null,pf:!1},x=null,B={ja:!0,la:!0,dc:!0,Vd:!1},w=null,z=!0,v=null,E=null,e={He:1,Ta:-1,ia:0,vc:0,Ha:!1,ua:[],Fa:[],tb:[],Y:null,Ob:null},A=
"EXT WEBGL OES MOZ_OES WEBKIT_OES KHR".split(" "),K=["OES","MOZ_OES","WEBKIT_OES"],y="undefined"===typeof window?{}:window,D={A:function(){if(l)return!0;D.reset();l||a();var g=b;if(!x.Fd){x.Jc=D.nd(g);y.GL_EXT_FLOAT=x.Jc;x.Id=x.Jc?!0:!1;if(x.Id||D.ma())x.Kc=D.od(g),x.vf=x.Kc?!0:!1,y.GL_EXT_FLOATLINEAR=x.Kc;x.Fd=!0}if(!x.Gd){x.Lc=D.mb(g);x.Lc&&(x.Jd=!0,y.GL_EXT_HALFFLOAT=x.Lc);if(x.Jd||D.ma())x.Mc=D.pd(g),y.GL_EXT_HALFFLOATLINEAR=x.Mc;x.Ah=x.Mc?!0:!1;x.Gd=!0}x.Ub=D.ld(g);x.mf=x.Ub?!0:!1;y.GL_EXT_COLORBUFFERFLOAT=
x.Ub;x.Vb=D.md(g);x.pf=x.Vb?!0:!1;y.GL_EXT_COLORBUFFERHALFFLOAT=x.Vb;pa.A();Da.A();if(!D.Je())return!1;la.A();Da.kf();return!0},reset:function(){x=Object.assign({},t);w=Object.assign({},B)},F:function(){l||a();return n.F()},X:function(){l||a();return n.X()},ma:function(){l||a();return n.ma()},kd:function(g){D.ld(g);D.md(g);D.nd(g);D.od(g);D.mb(g);D.pd(g)},ld:c.bind(null,"color_buffer_float",A),md:c.bind(null,"color_buffer_half_float",A),nd:c.bind(null,"texture_float",K),od:c.bind(null,"texture_float_linear",
K),mb:c.bind(null,"texture_half_float",K),pd:c.bind(null,"texture_half_float_linear",K),fc:function(g){var r=D.mb(g);return r&&r.HALF_FLOAT_OES?r.HALF_FLOAT_OES:g.HALF_FLOAT||g.FLOAT},Ye:function(){return E||b.RGBA32F||b.RGBA},Ze:function(){return v||b.RGBA16F||b.RGBA},Ve:function(){return w},ad:function(){return w.ja},vg:function(){return w.la},ug:function(){return w.dc},Ae:function(){return w.Vd&&z},le:function(g){z=g;!g&&e.Ha&&(p(),b.bindBuffer(e.Y,null),e.Ha=!1)},Gh:function(){return e.Ha},Mb:function(g,
r,G){function L(){g.bindTexture(g.TEXTURE_2D,null);g.bindFramebuffer(u,null);g.deleteTexture(f);g.deleteFramebuffer(N)}var u=g.FRAMEBUFFER,O=g.NEAREST,N=g.createFramebuffer();g.bindFramebuffer(u,N);var f=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,f);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,O);g.texParameteri(g.TEXTURE_2D,
g.TEXTURE_MIN_FILTER,O);g.texImage2D(g.TEXTURE_2D,0,r,3,3,0,g.RGBA,G,null);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,f,0);if(g.checkFramebufferStatus(g.READ_FRAMEBUFFER||g.FRAMEBUFFER)!==g.FRAMEBUFFER_COMPLETE)return L(),!1;za.Gc(g);g.clearColor(0,0,0,0);g.viewport(0,0,3,3);g.disable(g.DEPTH_TEST);g.clear(g.COLOR_BUFFER_BIT);la.pb(g);g.bindFramebuffer(u,null);za.bb(g);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,f);la.pb(g);r=new Uint8Array(36);g.readPixels(0,
0,3,3,g.RGBA,g.UNSIGNED_BYTE,r);L();for(G=0;36>G;++G)if(3!==G%4&&3<Math.abs(r[G]-127))return!1;return!0},Xb:function(g){var r={ja:!1,la:!1};g.disable(g.BLEND);g.clearColor(0,0,0,0);g.clear(g.COLOR_BUFFER_BIT);g.RGBA32F&&D.Mb(g,g.RGBA32F,g.FLOAT)&&(r.ja=!0,E=g.RGBA32F);!r.ja&&D.Mb(g,g.RGBA,g.FLOAT)&&(r.ja=!0,E=g.RGBA);var G=D.fc(g);v=null;g.RGBA16F&&D.Mb(g,g.RGBA16F,G)&&(r.la=!0,v=g.RGBA16F);!r.la&&D.Mb(g,g.RGBA,G)&&(r.la=!0,v=g.RGBA);return r},Ke:function(){var g=pa.instance({width:2});g.de();var r=
Da.instance({width:2,isFloat:!0,Eb:3});g.u();r.u();D.flush();b.checkFramebufferStatus(pa.af())!==b.FRAMEBUFFER_COMPLETE?(Da.Uf(),w.dc=!1):w.dc=!0;g.remove();r.remove()},Le:function(){var g=!1;D.ma()&&(g="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(r){return"undefined"!==typeof b[r]}));w.Vd=g},Je:function(){var g=D.Xb(b);Object.assign(w,g);if(!w.ja&&!w.la)return!1;D.Ke();D.Le();return!0},Xd:function(g,r,G,L,u){b.readPixels(g,
r,G,L,b.RGBA,b.UNSIGNED_BYTE,u);return Promise.resolve(u,!1)},Jb:function(g,r,G,L,u,O,N){if(!D.Ae())return D.Xd(g,r,G,L,u);e.Ta=N||e.He;h(u);b.readPixels(g,r,G,L,b.RGBA,b.UNSIGNED_BYTE,0);e.Fa[e.ia]=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);D.flush();var f=!1;return new Promise(function(m,H){function M(){if(!e.Ha)return d(),k(),q(),H(),!1;var P=(e.ia+1)%e.Ta;switch(b.clientWaitSync(e.Fa[P],0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:break;default:return d(),b.deleteSync(e.Fa[P]),e.Fa[P]=null,
b.bindBuffer(e.Y,e.ua[P]),b.getBufferSubData(e.Y,0,u),k(),q(),m(u,f),!0}e.Ob=setTimeout(M,0);return!1}d();e.vc+1<e.Ta?(k(),q(),m(u,!1)):(e.Ha=!0,M()||!O||f||(f=!0,O()))})},he:function(){b.viewport(0,0,D.F(),D.X())},flush:function(){b.flush()},m:function(){d();p();Da.m();pa.m();la.m();e.ua.forEach(function(g){b.deleteBuffer(g)});e.ua.splice(0);za.reset();l=!1}};return D}(),Q=la,ua=pa,X=Da,Ea=function(){function a(g,r,G,L){e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,L?e.NEAREST_MIPMAP_NEAREST:
e.LINEAR);var u=null;if(null!==G)try{u=e.getError();if("FUCKING_BIG_ERROR"===u)return!1;e.texImage2D(e.TEXTURE_2D,0,g,4,4,0,e.RGBA,r,G);u=e.getError();if(u!==e.NO_ERROR)return!1}catch(O){return!1}L&&e.generateMipmap(e.TEXTURE_2D);e.clear(e.COLOR_BUFFER_BIT);Q.pb(e);u=e.getError();if("FUCKING_BIG_ERROR"===u)return!1;e.readPixels(0,0,2,2,e.RGBA,e.UNSIGNED_BYTE,x);u=e.getError();u===e.INVALID_OPERATION&&"undefined"!==typeof e.PIXEL_PACK_BUFFER&&(e.bindBuffer(e.PIXEL_PACK_BUFFER,null),e.readPixels(0,
0,2,2,e.RGBA,e.UNSIGNED_BYTE,x),u=e.getError());if(u!==e.NO_ERROR)return!1;G=!0;for(L=0;16>L;++L)G=G&&4>Math.abs(x[L]-127);G&&(l.Sd=r,l.Cd=g);return G}function c(g,r){return A.ja&&a(g,e.FLOAT,new Float32Array(B),r)?(n=q.Xc,!0):!1}function d(g,r,G){if(!A.la)return!1;var L=Da.Ge(B),u=Z.mb(e);if(u&&u.HALF_FLOAT_OES&&a(g,u.HALF_FLOAT_OES,L,r)||e.HALF_FLOAT&&a(g,e.HALF_FLOAT,L,r))return n=q.Pa,!0;L=new Float32Array(B);if(a(g,e.FLOAT,L,r))return n=q.Pa,!0;e.bindTexture(e.TEXTURE_2D,G);e.texImage2D(e.TEXTURE_2D,
0,e.RGBA,2,2,0,e.RGBA,e.UNSIGNED_BYTE,null);e.bindFramebuffer(l.kb,D);Da.rd(e,G,2,2,L,!1,!1);e.bindFramebuffer(l.kb,null);e.bindTexture(e.TEXTURE_2D,G);return a(g,null,null,r)?(n=q.Pa,!0):!1}function h(g,r,G){t=!0;if(d(g,!0,G)||c(r,!0))return!0;t=!1;return d(g,!1,G)||c(r,!1)?!0:!1}function k(g){if(n===q.S){e=g||b;n=q.RGBA8;t=!0;Z.kd(e);A||(A=Z.Xb(e));ua.reset();D=e.createFramebuffer();l.kb=e.DRAW_FRAMEBUFFER||e.FRAMEBUFFER;e.bindFramebuffer(l.kb,null);e.clearColor(0,0,0,0);e.viewport(0,0,2,2);C.S();
K=C.bb(e);g=e.createTexture();e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,g);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);y=g;var r=g=e.RGBA,G=e.RGBA16F,L=e.RGBA32F;L&&(g=L);G&&(r=G);if((G||L)&&h(r,g,y))return p(),!0;g=r=e.RGBA;if(h(r,g,y))return p(),!0;n=q.RGBA8;p();return!1}}function p(){e.deleteProgram(K.ya);e.deleteTexture(y);y=K=null}for(var q={S:-1,Xc:3,
Pa:2,RGBA8:0},n=q.S,l={Sd:null,Cd:null,kb:null},t=!0,x=new Uint8Array(16),B=Array(64),w=0;4>w;++w)for(var z=0;4>z;++z){var v=0===(z+w)%2?1:0,E=4*w+z;B[4*E]=v;B[4*E+1]=v;B[4*E+2]=v;B[4*E+3]=v}var e=null,A=null,K=null,y=null,D=null;return{ze:function(g){k(g);return t},$c:function(g,r){n===q.S&&(typeof("undefined"!==r)&&(A=r),k(g));return n!==q.RGBA8},Dh:function(g){k(g);return n===q.Xc},wf:function(g){k(g);return n===q.Pa},lh:function(g){k(g);return l.Sd},$e:function(g){k(g);return l.Cd},m:function(){e=
null;t=!0;n=q.S;A=null}}}(),Nb=function(){return{instance:function(a){function c(){w&&w.remove();w=X.instance({isFloat:!1,isPot:!1,width:a.size*a.Z[0],height:a.size*a.Z[1]})}var d=null,h=!1,k=!1,p=null,q=!1,n=!1,l=null,t="undefined"===typeof a.preprocessing?!1:a.preprocessing,x="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(h=!0,na&&void 0!==na.te&&(a.mask=na.te+a.mask),d=X.instance({isFloat:!1,url:a.mask}));var B=!1;a.customInputShader&&(B="s50",C.Zc({name:"_",id:B,
g:a.customInputShader,gi:["uSource"],precision:"lowp"}),C.M(B,[{type:"1i",name:"_",value:0}]));switch(t){case "sobel":l="s39";q=!0;break;case "meanNormalization":l="s40";q=!0;break;case "grayScale":l="s36";q=!1;break;case "grayScaleTilt":l="s37";n=!0;q=!1;break;case "rgbGrayTilt":l="s38";n=!0;q=!1;break;case "copy":l=B?B:"s0";break;case "inputLightRegulation":l=B?B:"s36";p=cc.instance({Bd:x,Rd:a.size,Pd:a.nBlurPass,$:!1});k=!0;break;case "inputMix0":l="none";p=dc.instance({v:x,pa:a.varianceMin,fa:a.blurKernelSizePx,
gain:a.gain||1,$:!1});k=!0;break;case "inputMix1":l="none";p=ec.instance({v:x,pa:a.varianceMin,fa:a.blurKernelSizePx,gain:a.gain||1,$:!1});k=!0;break;case "inputCut4":l="none";p=fc.instance({v:x,pa:a.varianceMin,fa:a.blurKernelSizePx,gain:a.gain||1,Ya:a.isNormalized||!1,Bc:a.overlap||0,$:!1});x*=p.bf();k=!0;break;case "direct":case "none":case "abort":l="abort";break;default:l="s4"}x=Math.ceil(x);n&&C.M(l,[{name:"u29",type:"1f",value:a.tilt}]);h&&(l+="Mask");var w=null;c();var z={F:function(){return a.size},
cf:function(){return x},ic:function(){return z.F()},ff:function(){return k?p.Wa():w},Qb:function(v){a.Z=v;c()},V:function(v){ua.ea();if("abort"===l)return v.h(0),v;"none"!==l&&(C.set(l),q&&C.H("u30",1/a.size),w.L(),h&&d.h(1),Q.l(!1,!1),w.h(0),v=w);k&&p.process(v)},m:function(){w.remove();h&&d.remove()}};return z}}}(),Ob=function(){return{instance:function(a){function c(){if(D.Na){k.input&&(k.input.remove(),k.wb.remove());var r=a.size*a.sparsity;y=Math.log(r/a.size)/Math.log(2);k.input=X.instance({isMipmap:!0,
isFloat:!0,isPot:!0,width:r*a.Z[0],height:r*a.Z[1],sc:y});k.wb=X.instance({isFloat:!0,isPot:!0,width:a.size*a.Z[0],height:a.size*a.Z[1]})}}function d(){k.xa&&k.xa.remove();k.xa=X.instance({isFloat:!0,isPot:!q,isLinear:!q&&n.isLinear,width:a.size*a.Z[0],height:a.size*a.Z[1]})}function h(r){n.buffer.forEach(function(G,L){n.results[L][0]=r[0][G];n.results[L][1]=r[1][G];n.results[L][2]=r[2][G];n.results[L][3]=r[3][G]});return n.results}a.normalize=a.normalize||!1;var k={input:null,bias:null,wb:null,xa:null,
Ac:null,yc:null,zc:null},p=null,q=!0,n={type:"undef",G:null,isLinear:!1,buffer:[],results:[],xb:!1},l=-1,t=a.isReorganize?a.isReorganize:!1,x=a.kernelsCount?!0:!1,B=[a.Xa?"s32":"s31",a.Xa?"s34":"s33","s35"][a.shiftRGBAMode||0],w={isEnabled:!1},z=1/a.size;a.tf?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.Hb.ic(),q=!1):"full"===a.connectivityUp&&(a.sparsity=a.Hb.ic());var v={elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],E=a.sparsity*
a.sparsity,e=!1,A=a.size,K="";if(a.maxPooling){switch(a.maxPooling.size){case 2:K="s41";break;case 4:K="s42"}e=!0;A/=a.maxPooling.size;k.yc=X.instance({isFloat:!0,isPot:!1,width:A})}var y=-1,D=null;q&&d();k.bias=X.instance(a.bias);var g={F:function(){return a.size},ic:function(){return A},td:function(){return a.classesCount},ve:function(r){p.h(r)},Kf:function(){a.remap&&a.remap.isEnabled&&(w={isEnabled:!0,Cf:X.instance(a.remap.maskTexture),Ka:a.remap.layers.map(function(r){return a.parent.df(r)}),
depth:a.remap.depth})},Vf:function(){switch(a.connectivityUp){case "direct":D=gc.instance(a.connectivity);break;case "square":D=hc.instance(a.connectivity);break;case "squareFast":D=ic.instance(a.connectivity,a.activation);break;case "full":D=jc.instance(Object.assign({Xa:a.Xa},a.connectivity));break;case "conv":l=a.kernelsCount,D=kc.instance(a.connectivity),t&&(k.Ac=X.instance({width:A,isFloat:!0,isFlipY:!1,isPot:!1}))}c()},V:function(r,G){p=r;D.Na?(k.input.L(),x&&k.bias.h(2),D.V(w),k.input.h(0),
k.input.Te(y),k.wb.L(),x?C.set("s0"):(C.set(B),C.H("u4",E),k.bias.h(1)),k.input.we(y,0),Q.l(!1,!1),C.set(v),k.xa.u(),k.wb.h(0),Q.l(!1,!1)):(k.xa.L(),k.bias.h(1),D.V());if(q)return G=k.xa,e&&(k.yc.L(),G.h(0),C.set(K),C.W("u14",z,z),Q.l(!1,!1),G=k.yc),t&&(k.Ac.u(),C.set("s24"),C.W("u18",l,A/l),G.h(0),Q.l(!1,!1),G=k.Ac),G.h(0),G;var L=k.xa;if(a.normalize||n.xb)r=a.normalize,C.set(n.xb?"s9":"s8"),C.H("u10",r?z:1),k.zc.L(),L.h(0),Q.l(!1,!1),L=k.zc;r=null;switch(n.type){case "cpuRGBA2Float":L.fd(!1);G?
r=g.Lf(L).then(n.G):(L=g.Mf(L),n.G(L));break;case "cpuMeanFloat":L.fd(!0);if(G)r=L.Of().then(n.G);else{L=L.Pf();for(var u=0;u<L.length;++u);n.G(L)}break;case "gpuRawAvg":case "gpuRaw":L.h(0);case "none":null!==n.G&&n.G(L)}G&&null===r&&(r=Promise.resolve());return r},Qb:function(r){a.Z=r;c();d()},cg:function(r){r&&(n.type=r.ab||"none",n.G=r.$a||null,n.isLinear=r.Fb?!0:!1);d();r="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var G=0,L=0,u=0;G<r;++G)n.buffer.push(L+
(a.size-1-u)*a.size),n.results.push([-1,-1,-1,-1]),++L,L===a.size&&(L=0,++u);n.xb="gpuRawAvg"===n.type||"cpuMeanFloat"===n.type;if(a.normalize||n.xb)k.zc=X.instance({isFloat:!0,isPot:!0,width:a.size})},Lf:function(r){return r.Nf().then(h)},Mf:function(r){r=r.Wd();h(r);return n.results},m:function(){for(var r in k){var G=k[r];G&&G.remove()}D&&(D.m(),D=null)}};a.Hb&&g.Vf(a.Hb);return g}}}(),gc=function(){return{instance:function(a){var c=X.instance(a.weights);return{Na:!0,rb:function(){return 1},m:function(){c.remove()},
hf:function(){return c},V:function(){C.set("s30");c.h(1);Q.l(!1,!1)}}}}}(),jc=function(){return{instance:function(a){var c=a.fromLayerSize,d=X.instance(a.weights),h=a.Xa?"s27":"s26";return{Na:!0,rb:function(){return c},m:function(){d.remove()},V:function(k){if(k.isEnabled){C.set("s28");k.Cf.h(3);for(var p=Math.min(k.Ka.length,k.depth),q=0;q<p;++q)k.Ka[q].ve(4+q)}else C.set(h);C.H("u8",a.toLayerSize);C.H("u9",a.fromLayerSize);d.h(1);Q.l(!1,!1)}}}}}(),hc=function(){return{instance:function(a){for(var c=
a.fromLayerSize,d=a.toLayerSize,h=a.toSparsity,k=h*d,p=k/c,q=c/d,n=0,l=0,t=0,x=Array(h*d*h*d*4),B=Array(h*d*h*d*4),w=Array(c*c),z=0;z<w.length;++z)w[z]=0;z=Math.floor(h/2);for(var v=.5/d,E=.5/c,e=.5/k,A=0;A<d;++A)for(var K=Math.round(A*q),y=0;y<d;++y){var D=Math.round(y*q),g=A/d,r=y/d;g+=v;r+=v;for(var G=0;G<h;++G){var L=K+G-z;0>L&&(L+=c);L>=c&&(L-=c);for(var u=0;u<h;++u){var O=n/k,N=l/k,f=D+u-z;0>f&&(f+=c);f>=c&&(f-=c);var m=L/c,H=f/c;N=1-N-1/k;m+=E;H+=E;O+=e;N+=e;var M=A*h+G,P=y*h+u;P=d*h-P-1;M=
P*d*h+M;x[4*M]=O;x[4*M+1]=N;x[4*M+2]=m;x[4*M+3]=H;H=w[f*c+L]++;M=H%p;m=L*p+M;f=f*p+(H-M)/p;f=c*p-1-f;f=f*c*p+m;B[4*f]=O;B[4*f+1]=N;B[4*f+2]=g;B[4*f+3]=r;++n>=k&&(n=0,++l);++t}}}w=null;var ea=X.instance(a.weights);delete a.weights.data;var xa=X.instance({width:k,isFloat:!0,array:new Float32Array(B),isPot:!0});B=null;var Fa=X.instance({width:k,isFloat:!0,array:new Float32Array(x),isPot:!0});x=null;return{Na:!0,rb:function(){return p},m:function(){xa.remove();Fa.remove();ea.remove()},V:function(){C.set("s25");
ea.h(1);Fa.h(2);Q.l(!1,!1)}}}}}(),kc=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,h=d*a.toLayerSize/a.fromLayerSize,k=a.inputScale||[1,1],p=X.instance(a.weights);return{Na:!0,rb:function(){return h},wh:function(){return d},hf:function(){return p},m:function(){p.remove()},V:function(){C.set("s29");C.Xf("u28",k);C.H("u26",c);C.H("u27",d);C.H("u8",a.toLayerSize);C.H("u9",a.fromLayerSize);p.h(1);Q.l(!1,!1)}}}}}(),ic=function(){return{instance:function(a,c){var d=a.fromLayerSize,
h=a.toLayerSize,k=a.toSparsity,p=a.stride?a.stride:1,q=k*h/d,n=h<d,l=d/h,t=X.instance(a.weights),x="s51"+[d.toString(),h.toString(),k.toString(),p.toString(),c].join("_");C.Re(x)||(a=ac.Ue(c,"gl_FragColor","gl_FragColor"),h=[{type:"1f",name:"u8",value:h},{type:"1f",name:"u32",value:p}],n&&h.push({type:"1f",name:"u9",value:d}),d=[(n?q:k).toFixed(1),a],n&&d.push(l.toFixed(1)),C.lf(n?"s47":"s46",x,d),C.M(x,h.concat([{type:"1i",name:"u6",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u7",value:3}])));
return{Na:!1,rb:function(){return q},m:function(){t.remove()},V:function(){C.set(x);t.h(3);Q.l(!1,!1)}}}}}(),cc=function(){return{instance:function(a){var c=a.Pd?a.Pd:3,d=a.Bd?a.Bd:64,h=a.Rd?a.Rd:64,k=a.$?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var p=X.instance(a),q=X.instance(a),n=X.instance(a),l=X.instance(a),t=X.instance({isFloat:!0,width:h,isPot:!1,isFlipY:!1}),x=1/d;return{process:function(B){C.set("s43");l.u();Q.l(k,!1);C.set("s44");for(var w=0;w<c;++w)p.u(),C.W("u14",x,0),Q.l(k,!1),
n.u(),l.h(0),Q.l(k,!1),q.u(),p.h(0),C.W("u14",0,x),Q.l(k,!1),l.u(),n.h(0),Q.l(k,!1),w!==c-1&&q.h(0);C.set("s45");t.u();B.h(0);q.h(1);l.h(2);Q.l(k,!1);t.h(0)},Wa:function(){return t}}}}}(),dc=function(){return{instance:function(a){function c(x){return X.instance({isFloat:x,width:d.v,isPot:!1,isFlipY:!1})}var d=Object.assign({pa:.1,fa:9,v:128,gain:1,$:!1},a),h=c(!1),k=[c(!1),c(!1),c(!1)],p=[c(!1),c(!1),c(!1)],q=c(!0),n=[h,p[0],p[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.fa-1)/2).toFixed(2)).replace("2.2222",(1/d.v).toFixed(6));var l="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.pa.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),t={u1:0};C.eb([{id:"s53",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:t,i:["u1"],precision:"lowp"},{id:"s54",name:"_",g:a,j:t,i:["u1","u33"],precision:"lowp"},{id:"s55",name:"_",g:l,j:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){C.set("s53");h.L();Q.l(d.$,!1);C.set("s54");for(var x=0;3>x;++x)C.W("u33",1,0),k[x].u(),n[x].h(0),
Q.l(!1,!1),C.W("u33",0,1),p[x].u(),k[x].h(0),Q.l(!1,!1);C.set("s55");q.u();h.h(0);p[0].h(1);p[1].h(2);p[2].h(3);Q.l(!1,!1);q.h(0)},Wa:function(){return q}}}}}(),ec=function(){return{instance:function(a){function c(t){return X.instance({isFloat:t,width:d.v,isPot:!1,isFlipY:!1})}var d=Object.assign({pa:.1,fa:9,v:128,gain:1,$:!1},a),h=c(!1),k=c(!1),p=c(!1),q=c(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.fa-1)/2).toFixed(2)).replace("2.2222",(1/d.v).toFixed(6));var n="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.pa.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),l={u1:0};C.eb([{id:"s56",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
j:l,i:["u1"],precision:"lowp"},{id:"s57",name:"_",g:a,j:l,i:["u1","u33"],precision:"lowp"},{id:"s58",name:"_",g:n,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){C.set("s56");h.L();Q.l(d.$,!1);C.set("s57");C.W("u33",1,0);k.u();h.h(0);Q.l(!1,!1);C.W("u33",0,1);p.u();k.h(0);Q.l(!1,!1);C.set("s58");q.u();h.h(0);p.h(1);Q.l(!1,!1);q.h(0)},Wa:function(){return q}}}}}(),fc=function(){return{instance:function(a){function c(x){return X.instance({isFloat:x,width:d.v,isPot:!1,isFlipY:!1})}
var d=Object.assign({pa:.1,fa:9,v:128,gain:1,Bc:0,Ya:!1,$:!1},a),h=c(!1),k=null,p=null,q=null;d.Ya&&(k=c(!1),p=c(!1),q=c(!0));a={u1:0};var n=[{id:"s59",name:"_",g:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",
d.Bc.toFixed(4)),j:a,i:["u1"],precision:"lowp"}];if(d.Ya){var l="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.fa-1)/2).toFixed(2)).replace("2.2222",(1/d.v).toFixed(6)),t="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.pa.toFixed(4)).replace("2.2222",d.gain.toFixed(4));n.push({id:"s60",name:"_",g:l,j:a,i:["u1","u33"],precision:"lowp"},{id:"s61",name:"_",g:t,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}C.eb(n);return{process:function(){C.set("s59");h.L();Q.l(d.$,!1);d.Ya?(C.set("s60"),C.W("u33",1,0),k.u(),h.h(0),Q.l(!1,!1),C.W("u33",0,1),p.u(),k.h(0),Q.l(!1,!1),C.set("s61"),q.u(),h.h(0),p.h(1),Q.l(!1,!1),q.h(0)):h.h(0)},bf:function(){return 2-d.Bc},Wa:function(){return d.Ya?q:h}}}}}(),W={zd:function(){return W.dd()?
document.createElement("video"):!1},Va:function(a,c){a[c]=!0;a.setAttribute(c,"true")},De:function(){var a=!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a},Ce:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},yf:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},xg:function(){return W.bd()||W.Ce()},bd:function(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},Yg:function(){return W.De()?W.yf()?window.innerHeight/window.innerWidth*45:45:45},dd:function(){return navigator.mediaDevices&&
navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},Uh:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},cd:function(a){if(!a)return a;var c=null;if(a.video){var d=function(h){return h&&"object"===typeof h?Object.assign({},h):h};c={};"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c=
{audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&W.Yc(c,a.deviceId);return c},Yc:function(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)},je:function(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a},Ie:function(a){function c(w){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(z,v){return Math.abs(z-w)-Math.abs(v-w)})}function d(w){var z=W.cd(a);w=w(z);k.push(w);h(w)}function h(w){if(w.video&&
w.video.facingMode&&w.video.facingMode.exact){var z=w.video.facingMode.exact;w=W.cd(w);delete w.video.facingMode.exact;w.video.facingMode.ideal=z;k.push(w)}}var k=[];if(!a||!a.video)return k;h(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var p=c(a.video.width.ideal).slice(0,3),q=c(a.video.height.ideal).slice(0,3),n={},l=0;for(n.ra=void 0;l<p.length;n={ra:n.ra},++l){n.ra=p[l];var t={},x=0;for(t.qa=void 0;x<q.length;t={qa:t.qa},++x)if(t.qa=q[x],n.ra!==a.video.width.ideal||
t.qa!==a.video.height.ideal){var B=Math.max(n.ra,t.qa)/Math.min(n.ra,t.qa);B<4/3-.1||B>16/9+.1||d(function(w,z){return function(v){v.video.width.ideal=w.ra;v.video.height.ideal=z.qa;return v}}(n,t))}}}d(function(w){return W.je(w)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(w){delete w.video.width.ideal;delete w.video.height.ideal;return w}),d(function(w){delete w.video.width;delete w.video.height;return w}));a.video.facingMode&&(d(function(w){delete w.video.facingMode;
return w}),a.video.width&&a.video.height&&d(function(w){W.je(w);delete w.video.facingMode;return w}));k.push({audio:a.audio,video:!0});return k},Od:function(a){a.volume=0;W.Va(a,"muted");if(W.bd()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;W.Va(a,"muted")},5)}},me:function(a,c,d){return null===
a?Promise.resolve():new Promise(function(h,k){if(a.srcObject&&a.srcObject.getVideoTracks){var p=a.srcObject.getVideoTracks();1!==p.length?k("INVALID_TRACKNUMBER"):(p=p[0],c?W.get(a,h,k,d):(p.stop(),h()))}else k("BAD_IMPLEMENTATION")})},xd:function(a,c,d,h){function k(q){p||(p=!0,d(q))}var p=!1;return navigator.mediaDevices.getUserMedia(h).then(function(q){function n(){setTimeout(function(){if(a.currentTime){var t=a.videoHeight;if(0===a.videoWidth||0===t)k("VIDEO_NULLSIZE");else{t={Be:null,bg:null,
Df:null};try{var x=q.getVideoTracks()[0];x&&(t.Df=x,t.Be=x.getCapabilities(),t.bg=x.getSettings())}catch(B){}p||c(a,q,t)}}else k("VIDEO_NOTSTARTED")},700)}function l(){a.removeEventListener("loadeddata",l,!1);var t=a.play();W.Od(a);"undefined"===typeof t?n():t.then(function(){n()}).catch(function(){k("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=q:(a.src=window.URL.createObjectURL(q),a.videoStream=q);W.Od(a);a.addEventListener("loadeddata",l,!1)}).catch(function(q){k(q)})},
gf:function(a,c){var d=c||W.zd();return new Promise(function(h,k){W.get(d,h,k,a)})},get:function(a,c,d,h){if(!a)return d&&d("VIDEO_NOTPROVIDED"),!1;if(!W.dd())return d&&d("MEDIASTREAMAPI_NOTFOUND"),!1;W.Va(a,"autoplay");W.Va(a,"playsinline");h&&h.audio?a.volume=0:W.Va(a,"muted");W.Fe(h).then(function(){W.xd(a,c,function(){function k(q){if(0===q.length)d("INVALID_FALLBACKCONSTRAINTS");else{var n=q.shift();W.xd(a,c,function(){k(q)},n)}}var p=W.Ie(h);k(p)},h)})},Fe:function(a){if(!a||!a.video||!a.video.facingMode)return Promise.resolve("NO_VIDEO_CONSTRAINTS");
if(a.video.deviceId)return Promise.resolve("DEVICEID_ALREADY_SET");var c=a.video.facingMode;c=c.exact||c.ideal;if(!c)return Promise.resolve("NO_FACINGMODE");var d={user:[],environment:["camera2 0"]}[c];return d&&0!==d.length?new Promise(function(h){W.yd(function(k){k?(k=k.find(function(p){var q=p.label;return q?d.some(function(n){return q.includes(n)}):!1}))?(a.video.deviceId={exact:k.deviceId},h("SUCCESS")):h("NO_PREFERRED_DEVICE_FOUND"):h("NO_DEVICES_FOUND")})}):Promise.resolve("NO_PREFERRED_CAMERAS")},
yd:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},wg:function(a,c,d){var h={};h[c]=d;c=[];c.push(h);a.applyConstraints({advanced:c}).catch(function(){})}},ra=function(){function a(E,
e,A,K,y,D,g){if(!z)if(g===D.length)y();else{switch(D[g]){case "A":A();break;case "D":E();break;case "S":e().then(function(r,G){v.Nb();a(E,e,A,G?null:K,y,D,++g)}).catch(function(r){console.log("An error occurred in the WebAR loop: ",r);y()});return;case "R":K&&K()}a(E,e,A,K,y,D,++g)}}var c={n:5,uc:1,Md:0,qb:[35,49],lb:[2,200],k:.7,kg:200,Jf:.05},d=-1,h=null,k=-1,p=-1,q=0,n=-1,l=-1,t=0,x=0,B=c.lb[1],w=Math.log(2),z=!0,v={ef:function(){switch(d){case -1:return-1;case 0:return l+h.Md;case 1:return t}},
eh:function(E){return Math.pow(Math.min(Math.max(n,0),h.n-1)/(h.n-1),E||1)},A:function(E){h=Object.assign({},c,E);n=l=h.uc;d=0;v.reset()},Nb:function(E){E=("undefined"===typeof E?Date.now():E)||0;var e=Math.min(Math.max(E-x,h.lb[0]),h.lb[1]);B=e;x=E;var A=-1===k?0:h.k;k=Math.min(Math.max(1E3/e,5),120)*(1-A)+k*A;E-p>h.kg&&5<++q&&(e=h.k,n=n*(1-e)+(k<h.qb[0]?l-1:k>h.qb[1]?l+1:l)*e,Math.abs(n-l)>1-h.Jf&&(e=Math.min(Math.max(Math.round(n),0),h.n-1),e!==l&&(n=l=e,k=(h.qb[1]-h.qb[0])/2)),p=E)},Cc:function(E,
e,A,K,y,D){z=!1;a(E,e,A,K,y,D,0)},stop:function(){z=!0},Ec:function(E){t=E;d=1},Oc:function(){d=0;v.reset()},reset:function(){B=c.lb[1];p=k=-1;q=0},fi:function(E,e,A){A=Math.exp(-w*B/A);return(1-A)*E+A*e},Xe:function(){return B}};return v}(),Ia=function(){function a(){d(E+z.tc);e.port.postMessage("DONE")}function c(){D.gb=0===z.fb?K(d):K(h)}function d(u){y.Ia&&null!==v&&(u-=E,u=Math.min(Math.max(u,z.gd[0]),z.gd[1]),E+=u,p(),g.isEnabled&&g.Za&&y.aa&&E-g.pc>z.Sc&&(t(),g.pc=E),v(E))}function h(u){y.Ia&&
(D.timeout=setTimeout(d.bind(null,u),z.fb))}function k(){v=null;y.Ia=!1;p()}function p(){D.gb&&(window.cancelAnimationFrame(D.gb),D.gb=null);D.timeout&&(window.clearTimeout(D.timeout),D.timeout=null)}function q(u){u&&!y.aa?(y.aa=!0,A&&ra.Oc(),e.port.postMessage("STOP"),Z.le(!0),c()):!u&&y.aa&&(y.aa=!1,A&&ra.Ec(1),Z.le(!1),e.port.postMessage("START"))}function n(u){u.target.hidden?G():r()}function l(u,O,N){O=u.createShader(O);u.shaderSource(O,N);u.compileShader(O);return O}function t(){g.Za=!1;var u=
g.ka,O=g.ub,N=g.vb,f=g.Y;u.uniform1f(g.Ad,Math.random());g.Ja?O.beginQueryEXT(f,N):u.beginQuery(f,N);u.drawElements(u.POINTS,1,u.UNSIGNED_SHORT,0);g.Ja?O.endQueryEXT(f):u.endQuery(f);Z.flush();B().then(function(m){0===m||isNaN(m)?(g.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",m)):(m=z.pe*z.Rc*1E3/m,g.Rb=(g.Rb+1)%z.Oa,g.qc[g.Rb]=m,++g.Ld>z.Oa&&(g.Cb.set(g.qc),g.Cb.sort(function(H,M){return H-M}),m=g.Cb[Math.floor(z.Oa/2)],g.ob=
Math.max(g.ob,m),z.Qc(m/g.ob)),g.Za=!0)}).catch(function(){g.Za=!0})}function x(u){var O=g.ka,N=g.ub,f=g.vb;f=g.Ja?N.ah(f,N.QUERY_RESULT_AVAILABLE_EXT):O.getQueryParameter(f,O.QUERY_RESULT_AVAILABLE);O=O.getParameter(N.GPU_DISJOINT_EXT);f?u(!O):setTimeout(x.bind(null,u),.1)}function B(){return new Promise(function(u,O){x(function(N){if(N){N=g.ka;var f=g.ub,m=g.vb;N=g.Ja?f.getQueryObjectEXT(m,f.QUERY_RESULT_EXT):N.getQueryParameter(m,N.QUERY_RESULT);u(N)}else O()})})}var w={Hd:!0,gd:[1,200],tc:20,
fb:0,Rc:50,pe:240,Sc:3E3,Oa:3,Qc:null},z=null,v=null,E=0,e=null,A=!1,K=null,y={va:!1,aa:!0,oc:!1,nc:!1,mc:!1,Ia:!1},D={gb:null,timeout:null},g={isEnabled:!1,Za:!1,ka:null,ub:null,vb:null,Y:null,Ad:null,Ja:!0,pc:0,Ld:0,qc:null,Cb:null,Rb:0,ob:0},r=q.bind(null,!0),G=q.bind(null,!1),L={A:function(u){z=Object.assign(w,u);Object.assign(y,{aa:!0,va:!0,Ia:!1});K=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==z.Qc){u=document.createElement("canvas");u.setAttribute("width","1");u.setAttribute("height",
"1");var O={antialias:!1};u=u.getContext("webgl2",O)||u.getContext("webgl",O);if(O=u.getExtension("EXT_disjoint_timer_query")||u.getExtension("EXT_disjoint_timer_query_webgl2")){g.ka=u;g.ub=O;g.isEnabled=!0;g.Ja=O.beginQueryEXT?!0:!1;var N=l(u,u.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),f=l(u,u.FRAGMENT_SHADER,"precision lowp float;uniform float u39;void main(){vec4 a=u39*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",z.Rc.toString())),m=u.createProgram();
u.attachShader(m,N);u.attachShader(m,f);u.linkProgram(m);N=u.getAttribLocation(m,"a0");g.Ad=u.getUniformLocation(m,"u39");u.useProgram(m);u.enableVertexAttribArray(N);m=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,m);u.bufferData(u.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),u.STATIC_DRAW);u.vertexAttribPointer(N,4,u.FLOAT,!1,16,0);m=u.createBuffer();u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,m);u.bufferData(u.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),u.STATIC_DRAW);u.disable(u.DEPTH_TEST);u.disable(u.DITHER);
u.disable(u.STENCIL_TEST);u.viewport(0,0,1,1);m=g.Ja?O.createQueryEXT():u.createQuery();g.vb=m;g.Y=O.TIME_ELAPSED_EXT||u.TIME_ELAPSED;g.pc=-z.Sc;g.qc=new Float32Array(z.Oa);g.Cb=new Float32Array(z.Oa);g.ob=0;g.Rb=0;g.Ld=0;g.Za=!0}}if(z.Hd){u=!1;try{if("undefined"===typeof SharedWorker){var H=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
z.tc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),M=new Worker(H);M.addEventListener("message",a);e={Ud:M,port:M};y.oc=!0}else{var P=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
z.tc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),ea=new SharedWorker(P);ea.port.start();ea.port.addEventListener("message",a);e={Ud:ea,port:ea.port};y.nc=!0}u=!0}catch(xa){}u&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",n):(window.addEventListener("blur",G),window.addEventListener("focus",r)),window.addEventListener("pagehide",
G),window.addEventListener("pageshow",r),y.mc=!0)}A="undefined"!==typeof ra},m:function(){k();y.mc&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",n):(window.removeEventListener("blur",G),window.removeEventListener("focus",r)),window.removeEventListener("pagehide",G),window.removeEventListener("pageshow",r),y.mc=!1);y.nc?(e.port.close(),y.nc=!1):y.oc&&(e.Ud.terminate(),y.oc=!1);Object.assign(y,{aa:!0,va:!1,Ia:!1});v=null},Af:function(){return y.aa},update:function(u){Object.assign(z,
u)},Cc:function(u){y.va||L.A({});p();y.Ia=!0;v=u;y.aa&&c()},stop:k};return L}(),Ta=function(){function a(B,w){var z=B[0]-.5;B=B[1]-.5;var v=w[0]-.5;w=w[1]-.5;return z*z+B*B-(v*v+w*w)}var c={Qd:4,Gb:[1.5,1.5,2],R:[.1,.1,.1],$d:1,v:-1,O:-1,fg:2,If:1,Dc:!0,Oe:.8},d=null,h=[],k=[],p=[],q=[0],n=[.5,.5,1],l=null,t=0,x=[0,0,0];return{A:function(B){d=Object.assign({},c,B);h.splice(0);k.splice(0);p.splice(0);t=0;B=d.Gb[0]*d.R[0];var w=d.Gb[1]*d.R[1],z=1/(1+d.Gb[2]*d.R[2]),v=d.$d*Math.min(d.v,d.O),E=v/d.v;
v/=d.O;var e=.5*d.Oe;e*=e;for(var A=0;A<d.Qd;++A){var K=[];k.push(K);var y=Math.pow(z,A),D=E*y,g=v*y;y=D*d.If;p.push(y);var r=D*B,G=g*w;D/=2;g/=2;for(var L=1+(1-D-D)/r,u=1+(1-g-g)/G,O=0;O<u;++O)for(var N=g+O*G,f=N-.5,m=0;m<L;++m){var H=D+m*r,M=H-.5;M*M+f*f>e||(H=[H,N,y],h.push(H),K.push(H))}d.Dc&&K.sort(a);l=h}d.Dc&&h.sort(a)},get:function(B){var w=l.length;if(0===w)return n;for(;B>=q.length;)q.push(0);q[B]>=w&&(q[B]=0);var z=l[Math.floor(q[B])%w];q[B]=(q[B]+1/d.fg)%w;if(0===t)return z;x[0]=z[0];
x[1]=z[1];x[2]=t;return x},Oh:function(B){B>=q.length||(q[B]=Math.floor(Math.random()*l.length))},Fc:function(B){t=B;if(0===t)l=h;else{for(var w=p.length,z=w-1,v=0;v<w;++v)if(p[v]<=B){z=v;break}l=k[z]}},reset:function(){for(var B=h.length/q.length,w=0;w<q.length;++w)q[w]=Math.floor(w*B);t=0;l=h}}}(),da=function(){function a(e,A,K,y){return Math.max(0,K>e?e+A/2-(K-y/2):K+y/2-(e-A/2))}function c(e){return!n.Ed(e)}function d(e,A,K){for(var y=e.length;v.length<y;)v.push({na:[0,0],Db:[0,0],ha:[0,0],za:0,
scale:0,Ua:0,cb:0});y=e.length;for(var D=0;D<y;++D){var g=e[D],r=v[D],G=A[D].rz,L=Math.cos(G),u=Math.sin(G);r.za=G;r.Ua=L;r.cb=u;r.ha[0]=g.x;r.ha[1]=g.y/K;r.scale=g.ba;r.na[0]=g.ba*n.hd[0];r.na[1]=g.ba*n.hd[1];r.Db[0]=r.na[0]*r.na[0];r.Db[1]=r.na[1]*r.na[1]}}function h(e,A,K){var y=Math.abs(-e.cb*(K-e.ha[1])-e.Ua*(A-e.ha[0]));A=Math.abs(e.Ua*(K-e.ha[1])-e.cb*(A-e.ha[0]));return 1>=y*y/e.Db[0]+A*A/e.Db[1]}function k(e,A,K,y){var D=e[K];d(e,A,y);var g=v[K];return e.some(function(r,G){if(!(r=G===K||
D.wa>r.wa||3>r.wa||!(0<a(D.x,D.ba*z,r.x,r.ba*z))||!(0<a(D.y,D.ba*y*z,r.y,r.ba*y*z)))){r=v[G];g.scale>r.scale?G=g:(G=r,r=g);for(var L=0,u=0,O=n.Pe,N=0;N<O;++N)for(var f=((N+.5)/O*2-1)*r.na[1],m=0;m<O;++m){var H=((m+.5)/O*2-1)*r.na[0],M=r.ha[0]+(-f*r.cb+H*r.Ua);H=r.ha[1]+(f*r.Ua+H*r.cb);h(r,M,H)&&(++L,h(G,M,H)&&++u)}r=u/L<n.Nd}return r?!1:!0})}function p(e){return e.isDetected}var q={P:1,Nd:.3,hd:[1,1],Pe:6,be:.3,Ed:null,uf:!0},n=null,l=0,t=null,x=!1,B=0,w=0,z=Math.sqrt(2),v=[],E={A:function(e){n=Object.assign({},
q,e);t=[0]},Kd:function(){return 1!==n.P},ud:function(){return l},xf:function(){return x},ta:function(){return n.P},uh:function(){return t},zf:function(e){return t.includes(e)},update:function(e,A){var K=t;if(K.length>e)K.splice(0,K.length-e);else for(;K.length<e;)K.push(0);if(1!==n.P)if(A.every(c)){A=B;for(var y=0;y<e;++y)K[y]=A,A=(A+1)%n.P;B=A}else{y=Math.round(n.be*e);y=Math.max(1,y);for(var D=B,g=0,r=0;g<e;++g){if(c(A[D])&&++r>y){do++D===n.P&&(D=0);while(c(A[D]))}K[g]=D;D=(D+1)%n.P}B=D}},Nb:function(e){l=
t[e];w=(.5+l)/n.P;x=t.lastIndexOf(l)===e;return l},dg:function(e,A,K){return 1===n.P?!1:k(e,A,l,K)},ke:function(e){n.uf&&1===n.P||C.H(e,w)},Se:function(e){return e.find(p)},Zg:function(e){return e.findIndex(p)},Xg:function(e){var A=E.Se(e);if(!A||e.every(p))return Ta.Fc(0),!1;Ta.Fc(A.s);return!0},Ne:function(e){for(var A=new Float32Array(e.length*n.P),K=0,y;K<n.P;++K)for(y=0;y<e.length;++y)A[K*e.length+y]=e[y];return A},cc:function(e){for(var A=[],K=0;K<n.P;++K){var y=A,D=y.push,g=void 0,r=e,G={};
for(g in r){var L=g;var u=r[g];var O=typeof u;u=["string","boolean","number"].includes(O)?u:"object"!==O?null:ArrayBuffer.isView(u)?u.slice():JSON.parse(JSON.stringify(u));G[L]=u}D.call(y,G)}return A}};return E}(),na={da:0,Rf:{threshold:.7,nScaleLevels:2,scale0Factor:.8,nDetectsPerLoopRange:[1,4],overlapFactors:[2,2,3],scanCenterFirst:!0,nDetectsPerLoop:-1,multiDetectionThresholdFactors:[.5,.6],translationScalingFactors:[.2,.2,.5],isCleanGLStateAtEachIteration:!0,enableAsyncReadPixels:!1,animateProcessOrder:"DSAR"},
hg:50,Ff:.4,Ef:8,Gf:.3,eg:{translationFactorRange:[.002,.005],rotationFactorRange:[.015,.1],qualityFactorRange:[.8,.95],alphaRange:[.03,1],followZRotAlphaFactor:.01,minDisplacementPx:1},re:.2,se:2,Hf:8,mg:20},qa={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1920,minHeight:480,maxHeight:1920,rotate:0,flipX:!1},ia={wc:-3,Bf:-1,error:-2,ready:1,play:2,pause:3},ma=ia.wc,J=null,lc={zb:!1,Ic:null,element:null,I:null,D:[0,0],B:[.5,0,0,.5],Ib:0,Sa:null,yb:!1},R=null,mc={outputScaleFactor:2,
Ra:null,Tb:null,antialias:!0,Wc:"./",Vc:null,Uc:"./",Tc:null,ga:null,da:na.da,Td:na.da,Ab:!1,Ea:!0},aa=null,sa=null,La=1,lb={Yb:-1},Y=null,nc={v:0,O:0,D:[0,0],T:null},ca={Aa:null,buffer:null,R:null,Zd:null,ae:1},wa={T:null,La:null},oa={track:null,depth:null},Sa=null,va=null,ib=[],kb=[],tb={VERSION:"1.0.4",init:function(a){function c(){if(ma!==ia.error&&2===++h){Oa();Eb();Na();if(R.Ra){ma=ia.ready;var k=va[0];R.Ra(!1,{GL:b,canvasElement:R.ga,videoTexture:J.I.get(),videoTransformMat2:J.B,maxFacesDetected:da.ta(),
videoElement:J.element,RGBDBuf:k.RGBDBuf,RGBDRes:k.RGBDRes});hb()}gb()}}if(ma!==ia.wc)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;ma=ia.Bf;J=Object.assign({},lc);R=Object.assign({},mc);Y=Object.assign({},nc);"undefined"!==typeof a.antialias&&(R.antialias=a.antialias);a.callbackReady&&(R.Ra=a.callbackReady);a.callbackTrack&&(R.Tb=a.callbackTrack);"undefined"!==typeof a.animateDelay&&(R.da=a.animateDelay);"undefined"!==typeof a.NNTrackPath&&(R.Wc=a.NNTrackPath);"undefined"!==typeof a.NNTrack&&
(R.Vc=a.NNTrack);"undefined"!==typeof a.NNDepthPath&&(R.Uc=a.NNDepthPath);"undefined"!==typeof a.NNDepth&&(R.Tc=a.NNDepth);"undefined"!==typeof a.followZRot&&(R.Ea=a.followZRot?!0:!1);if(!a.canvasId&&!a.canvas)return Ma("NO_CANVASID"),!1;R.ga=a.canvas?a.canvas:document.getElementById(a.canvasId);if(!R.ga)return Ma("INVALID_CANVASID"),!1;Y.v=R.ga.width;Y.O=R.ga.height;if(!Y.v||!Y.O)return Ma("INVALID_CANVASDIMENSIONS"),!1;aa=Object.create(na.Rf);a.scanSettings&&Object.assign(aa,a.scanSettings);var d=
1;"undefined"!==typeof a.maxFacesDetected&&(d=Math.max(1,a.maxFacesDetected));if(d>na.Ef)return Ma("MAXFACES_TOOHIGH"),!1;da.A({P:d,Nd:na.Ff,be:na.Gf,Ed:Bb});for(d=0;d<da.ta();++d)ib.push(new Float32Array(na.Hf)),kb.push(0);Ia.A({Hd:a.isKeepRunningOnWinFocusLost||!1,fb:R.da});ra.A({uc:0,n:aa.nDetectsPerLoopRange[1]-aa.nDetectsPerLoopRange[0]+1,Md:aa.nDetectsPerLoopRange[0]});-1!==aa.nDetectsPerLoop?ra.Ec(aa.nDetectsPerLoop):ra.Oc();ca.R=aa.translationScalingFactors.slice(0);sa=Object.create(na.eg);
a.stabilizationSettings&&Object.assign(sa,a.stabilizationSettings);var h=0;a.videoSettings&&a.videoSettings.videoElement?ab(a.videoSettings.videoElement,c):(a.videoSettings&&Object.assign(qa,a.videoSettings),Gb(a.onWebcamAsk,a.onWebcamGet,function(k){ab(k,c)}));Promise.all([Db(R.Vc,R.Wc,Vb),Db(R.Tc,R.Uc,Wb)]).then(function(k){if(!Xb())return!1;var p=k[1];oa.track=new ub({Ka:k[0].layers,ab:"gpuRawAvg",$a:Yb});oa.depth=new ub({Ka:p.layers,ab:"gpuRawAvg",Fb:!0,$a:Zb});C.eb([{id:"s63",name:"_",Ba:"attribute vec2 a0;uniform mat2 u40;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u40*a0;}",
Ca:["a0"],sa:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u40"],precision:"lowp"},{id:"s64",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",Ba:"attribute vec2 a0;uniform sampler2D u41;uniform mat2 u40;uniform vec2 u42;uniform float u43,u44;varying vec2 vv0;void main(){vec4 a=texture2D(u41,vec2(.25,u43));vec2 d=a.gb,f=a.a*u42;float b=cos(u44),c=sin(u44);vec2 g=mat2(b,c,-c,b)*a0,h=d+g*.5*f,i=h-.5;vv0=vec2(.5,.5)+2.*u40*i,gl_Position=vec4(a0,0.,1.);}",
Ca:["a0"],sa:[2],i:"u1 u41 u42 u43 u44 u40".split(" "),precision:"lowp"},{id:"s65",name:"_",g:"uniform sampler2D u45,u41;uniform vec3 u46,u47;uniform float u48,u49,u43,u50,u44,u51;const vec4 e=vec4(.25);void main(){vec4 d=texture2D(u45,vec2(.625,.625)),a=texture2D(u41,vec2(.25,u43));float f=dot(d,e);bool g=f>u49;a.r<-.5?a.r+=1.:g?a.r=2.:a.r>u48?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r=mix(-2.,a.r,u50);if(a.r<.9)a=vec4(1.,u46);else{a.r*=step(1.9,a.r);float h=dot(e,texture2D(u45,vec2(.875,.875))),i=dot(e,texture2D(u45,vec2(.125,.625))),j=dot(e,texture2D(u45,vec2(.375,.625))),b=cos(u44),c=sin(u44);vec2 k=mat2(b,c*u51,-c/u51,b)*vec2(h,i);a.gba+=vec3(k,j)*u47*a.a;}gl_FragColor=a;}",
Ba:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",i:"u45 u41 u46 u48 u47 u50 u44 u51 u49 u43".split(" ")},{id:"s66",name:"_",Ba:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u45;uniform float u50;const vec4 e=vec4(.25);void main(){float a=dot(e,texture2D(u45,vec2(.125,.875))),b=dot(e,texture2D(u45,vec2(.375,.875))),c=dot(e,texture2D(u45,vec2(.625,.875))),d=dot(e,texture2D(u45,vec2(.625,.625)));vec3 f=vec3(a,b,c);gl_FragColor=vec4(f,d*u50);}",i:["u45",
"u50"]},{id:"s62",name:"_",g:"uniform sampler2D u41;uniform vec2 u52;uniform float u53;varying vec2 vv0;void main(){float f=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.5,vv0.x);vec4 a=texture2D(u41,vv0+u52);a.a=mix(a.a*u53,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",i:["u41","u53","u52"]},{id:"s67",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",Ba:"attribute vec2 a0;uniform mat2 u40;uniform vec3 u54;uniform vec2 u42;uniform float u44;varying vec2 vv0;void main(){vec2 c=u54.xy*.5+vec2(.5),d=u54.z*u42;float a=cos(u44),b=sin(u44);vec2 f=mat2(a,b,-b,a)*a0,g=c+f*.5*d,h=g-.5;vv0=vec2(.5,.5)+2.*u40*h,gl_Position=vec4(a0,0.,1.);}",
Ca:["a0"],sa:[2],i:["u1","u54","u42","u44","u40"],precision:"lowp"},{id:"s68",name:"_",g:"uniform sampler2D u55,u56;varying vec2 vv0;void main(){vec3 a=texture2D(u55,vv0).rgb;float b=dot(texture2D(u56,vv0),vec4(.25));gl_FragColor=vec4(a,b*.5+.5);}",Ca:["a0"],sa:[2],i:["u55","u56"],precision:"lowp"}]);Cb();k=da.ta();if(1!==k)throw Error("Multi detection is not implemented for depth retrieval");ca.buffer=new Uint8Array(16*k);Sa=da.cc({jb:0,x:0,y:0,ba:1,rx:0,ry:0,za:0,wa:0});k=oa.depth.wd()*R.outputScaleFactor;
va=da.cc({detected:0,isDetected:!1,x:0,y:0,s:1,xRaw:0,yRaw:0,sRaw:1,rx:0,ry:0,rz:0,RGBDBuf:new Uint8Array(k*k*4),RGBDRes:k});da.cc({dx:0,dy:0,bc:0,Zb:0,$b:0,ac:0});nb();mb();c()});return!0},destroy:function(){Ia.m();return new Promise(function(a){tb.toggle_pause(!0,!0).finally(function(){oa.track&&oa.track.m();oa.depth&&oa.depth.m();Ka.m();va=Sa=null;oa.track=null;oa.depth=null;ib.splice(0);kb.splice(0);Y.T=null;ca.Aa=null;J.I=null;ma=ia.wc;wa.T=null;wa.La=null;a()}).catch(function(){})})},toggle_videoStream:function(a){return J.yb||
!J.element?Promise.resolve():W.me(J.element,a,J.Sa)},toggle_pause:function(a,c){if(!Za())return Promise.reject("NOT_READY");c=c?tb.toggle_videoStream(!a):Promise.resolve();a?yb():c.then(function(){gb()});return c},update_videoSettings:function(a){yb();return new Promise(function(c,d){W.me(J.element,!1,J.Sa).then(function(){Object.assign(qa,a);Gb(null,null,function(h){ab(h,function(){Oa();Na();gb();c()})})}).catch(d)})},toggle_slow:function(a){Za()&&ma===ia.play&&(a&&!R.Ab?(R.Td=R.da,aa.nDetectsPerLoop=
1,this.set_animateDelay(na.og),R.Ab=!0):!a&&R.Ab&&(aa.nDetectsPerLoop=-1,this.set_animateDelay(R.Td),R.Ab=!1))},set_animateDelay:function(a){R.da=a;Ia.update({fb:R.da})},resize:function(){if(!Za())return!1;var a=R.ga.width,c=R.ga.height;if(!ob()&&a===Y.v&&c===Y.O)return!1;Y.v=a;Y.O=c;C.S();nb();mb();Oa();Na();return!0},set_inputTexture:function(a,c,d){J.D[0]=c;J.D[1]=d;J.I=X.instance({width:c,height:d,jc:a});J.zb=!0;Oa();hb();Na()},reset_GLState:function(){hb();Y.T.remove();ca.Aa.remove();wa.T.remove();
wa.La.remove();Cb()},render_video:function(){ua.N();C.set("s63");b.viewport(0,0,Y.v,Y.O);J.I.h(0);Q.l(!0,!0)},reset_inputTexture:function(){J.zb=!1;J.I=J.Ic;ob();Oa();Na()},get_videoDevices:function(a){return W.yd(a)},is_winFocus:function(){return Ia.Af()},set_scanSettings:function(a){Object.assign(aa,a);-1!==aa.nDetectsPerLoop?ra.Ec(aa.nDetectsPerLoop):ra.Oc();nb();mb()},set_stabilizationSettings:function(a){Object.assign(sa,a)},set_videoOrientation:function(a,c){Za()&&(qa.flipX=c,qa.rotate=a,Oa(),
Na())},update_videoElement:function(a,c){ab(a?a:J.element,function(){Eb();Oa();Na();c&&c()})},create_new:function(){return window.WEBARROCKSFACEDEPTHGEN()}};return tb};window.WEBARROCKSFACEDEPTH=window.WEBARROCKSFACEDEPTHGEN();
;return WEBARROCKSFACEDEPTH||window.WEBARROCKSFACEDEPTH;})();