 /**
 * WebAR.rocks.faceDepth - https://github.com/WebAR-rocks/WebAR.rocks.faceDepth
 *
 * Copyright 2022 WebAR.rocks ( https://webar.rocks )
 *
 * 
*/

var WEBARROCKSFACEDEPTH=(function(){window.WEBARROCKSFACEDEPTHGEN=function(){function ub(a){var c=null,d=null,f=null,k=0,l=this;this.v=function(q){this.Qf(q.Xa);f.De({Cb:q.Cb,uc:q.uc||!1,Bb:q.Bb})};this.$e=function(q){return c[q]};this.Qf=function(q){var m=null;k=q.length;c=q.map(function(n,r){n=Object.assign({},n,{index:r,parent:l,Eb:m,qf:r===k-1});return m=r=0===r?Nb.instance(n):Ob.instance(n)});d=c[0];f=c[k-1];c.forEach(function(n,r){0!==r&&n.Gf()})};this.U=function(q){q.g(0);var m=q;c.forEach(function(n){m=n.U(m,!1)});return m};this.pb=function(){return d.Ze()};
this.ud=function(){return f.F()};this.Ua=function(){return f.bf()};this.rd=function(){return f.rd()};this.m=function(){c&&(c.forEach(function(q){q.m()}),f=d=c=null,k=0)};"undefined"!==typeof a&&this.v(a)}function eb(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function vb(a,c,d){var f=1,k=0;for(d=c+d-1;d>=c;--d)k+=f*eb(a,d),f*=2;return k}function wb(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var c=a.length,d=new Uint8Array(c),f=0;f<c;++f)d[f]=a.charCodeAt(f);
return d}function fb(a){return"string"===typeof a?JSON.parse(a):a}function Pb(a){if("undefined"===typeof fb(a).nb){var c=fb(a);a=c.ne;var d=c.nf,f=c.n;c=wb(c);for(var k=new Float32Array(f),l=new Float32Array(d),q=a+d+1,m=0;m<f;++m){var n=q*m,r=0===eb(c,n)?1:-1,y=vb(c,n+1,a);n=n+1+a;for(var D=l.length,z=0,I=n;I<n+D;++I)l[z]=eb(c,I,!0),++z;for(D=n=0;D<d;++D)n+=l[D]*Math.pow(2,-D-1);k[m]=0===n&&0===y?0:r*(1+n)*Math.pow(2,1+y-Math.pow(2,a-1))}a=k}else if(f=fb(a),a=f.nb,0===a)a=new Uint8Array(f.nb);else{d=
f.n;f=wb(f);c=new Uint32Array(d);for(k=0;k<d;++k)c[k]=vb(f,k*a,a);a=c}return a}function Za(){return-1!==[ha.ready,ha.play,ha.pause].indexOf(ma)}function gb(){if(ma===ha.play)return!1;ma=ha.play;Ia.stop();xb(0)}function yb(){if(ma!==ha.play)return!1;ra.stop();Ia.stop();ma=ha.pause;return!0}function Ja(a,c,d,f,k){a=4*(2*c+a)+d;return f+(ca.buffer[a]/255+ca.buffer[a+8]/65025)*(k-f)}function hb(){b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Ka.ff()}function zb(a,c,d,f,k,l,q){return aa.enableAsyncReadPixels?
Z.Gb(a,c,d,f,k,l,q):Z.Ud(a,c,d,f,k)}function Qb(){var a=da.sa();ta.K();b.viewport(0,0,2,2*a);E.set("s58");ca.ya.g(0);P.l(!1,!1);return zb(0,0,2,2*a,ca.buffer,Ab,1)}function xb(){ma!==ha.pause&&(aa.isCleanGLStateAtEachIteration&&(E.gd(),P.reset(),P.Ba(),b.disable(b.DEPTH_TEST),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1),E.Ka()),ra.zc(Rb,Qb,Sb,Ab,Tb,aa.animateProcessOrder))}function Rb(){ta.ca();if(!L.ub)if(L.tb)L.element.needsUpdate&&(L.H.be(L.element.videoWidth,L.element.videoHeight),L.H.Mb(L.element.arrayBuffer),
L.element.needsUpdate=!1);else{var a=L.element.currentTime,c=a-L.Fb;0>c&&(L.Fb=a,c=0);1E3*c<na.jg||(L.Fb+=c,L.H.refresh())}a=ra.af();da.update(a,ya);for(c=0;c<a;++c){da.Kb(c);E.set("s60");var d=ya[da.sd()];Q.Ca&&E.G("u42",d.rz);da.ge("u41");X.S.M();L.H.g(0);ca.ya.g(1);P.l(!1,!1);oa.track.U(X.S)}ra.Kb();a=ya[0];a.isDetected&&(E.set("s63"),ua.S.M(),L.H.g(0),E.G("u42",a.rz),E.Vf("u52",a.x,a.y,a.s),P.l(!1,!1),oa.depth.U(ua.S))}function Ab(){ta.gg();aa.isCleanGLStateAtEachIteration&&(ta.reset(),W.reset(),
b.enable(b.DEPTH_TEST));Q.Pb&&Q.Pb(da.Hd()?ya:ya[0]);aa.isCleanGLStateAtEachIteration&&(b.disable(b.BLEND),P.reset(),P.Ba())}function Sb(){for(var a=0;a<da.sa();++a)if(da.vf(a)){var c=a,d=Sa[c],f=[c],k=ya[c],l=ib[c],q=2*c;d.fb=Ja(1,q,3,0,1);k.detected=Ba.ma(k.detected,d.fb,na.me);k.isDetected=Bb(k);d.x=Ja(0,q,1,-1,1);d.y=Ja(0,q,2,-1,1);d.$=Ja(0,q,3,0,1);if(d.fb<aa.multiDetectionThresholdFactors[0]*aa.threshold)d.va=Math.floor(d.va/2),Q.Ca&&(k.rz=0,k.ry=0);else{var m=ca.Wd;d.rx=Ja(1,q,0,-m[0],m[0]);
d.ry=Ja(1,q,1,-m[1],m[1]);d.xa=Ja(1,q,2,-m[2],m[2]);q=d.$*ca.Yd;f.dx=d.x-k.xRaw;f.dy=d.y-k.yRaw;f.Yb=q-k.sRaw;f.Vb=d.rx-k.rx;f.Wb=d.ry-k.ry;f.Xb=Q.Ca?d.xa:d.xa-k.rz;m=ra.Te();f=(1-jb.nc(sa.translationFactorRange[0],sa.translationFactorRange[1],Math.sqrt(f.dx*f.dx+f.dy*f.dy+f.Yb*f.Yb)/m))*(1-jb.nc(sa.rotationFactorRange[0],sa.rotationFactorRange[1],Math.sqrt(f.Vb*f.Vb+f.Wb*f.Wb+f.Xb*f.Xb)/m))*jb.nc(sa.qualityFactorRange[0],sa.qualityFactorRange[1],d.fb);c=l[++kb[c]%l.length]=f;for(m=0;m<l.length;++m)c=
Math.min(c,l[m]);c=Math.max(.5,c);f=Math.min(c,f);l=Ba.ma(sa.alphaRange[1],sa.alphaRange[0],Math.pow(f,na.oe));k.xRaw=Ba.ma(k.xRaw,d.x,l);k.yRaw=Ba.ma(k.yRaw,d.y,l);k.sRaw=Ba.ma(k.sRaw,q,l);k.rx=Ba.ma(k.rx,d.rx,l);k.ry=Ba.ma(k.ry,d.ry,l);k.rz=Q.Ca?k.rz+sa.followZRotAlphaFactor*l*d.xa:Ba.ma(k.rz,d.xa,l);q=k.sRaw*lb.Ub*Math.sin(k.ry);l=k.xRaw+Math.cos(k.rz)*q;q=k.yRaw+Math.sin(k.rz)*q/La;c=k.sRaw;f=sa.minDisplacementPx;m=.5*(l-k.x)/c*oa.track.pb();var n=.5*(q-k.y)/(c/La)*oa.track.pb();m*m+n*n>f*f&&
(k.x=l,k.y=q,k.s=c);++d.va}}}function Tb(){ma===ha.play&&Ia.zc(xb)}function Cb(){X.S=W.instance({isPot:!0,isFloat:!1,width:oa.track.pb()});var a={width:2,height:da.sa(),isFloat:!0,isPot:!1,array:da.Ie(new Float32Array([0,.5,.5,0,0,0,0,0]))};ca.ya=Ub.instance(a);ua.S=W.instance({isPot:!0,isFloat:!1,width:oa.depth.pb()});ua.Ja=W.instance({isPot:!0,isFloat:!1,width:oa.depth.ud()*Q.outputScaleFactor})}function mb(){E.N("s60",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u39",value:1},{type:"2f",name:"u40",
value:X.D},{type:"1f",name:"u41",value:.5},{type:"1f",name:"u42",value:0}]);E.N("s61",[{type:"1i",name:"u43",value:0},{type:"1i",name:"u39",value:1},{type:"1f",name:"u46",value:na.eg},{type:"1f",name:"u47",value:aa.threshold},{type:"3f",name:"u45",value:[ca.P[0]*X.D[0],ca.P[1]*X.D[1],ca.P[2]]},{type:"1f",name:"u41",value:.5},{type:"1f",name:"u48",value:1},{type:"1f",name:"u42",value:0}]);E.N("s62",[{type:"1i",name:"u43",value:0}]);E.N("s58",[{type:"1i",name:"u39",value:0},{type:"1f",name:"u51",value:X.D[0]},
{type:"2f",name:"u50",value:[0,.5/da.sa()]}]);E.N("s63",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u40",value:X.D}]);E.N("s64",[{type:"1i",name:"u53",value:1},{type:"1i",name:"u54",value:0}])}function nb(){X.D[0]=1;X.D[1]=X.u/X.L;Ta.v({Db:aa.overlapFactors,Nd:aa.nScaleLevels,u:X.u,L:X.L,Xd:aa.scale0Factor,P:ca.P,Ac:aa.scanCenterFirst})}function Db(a,c,d){return new Promise(function(f){a?d("string"===typeof a?JSON.parse(a):a,f):$a.get(c,function(k){k=JSON.parse(k);d(k,f)})})}function Vb(a,c){var d=
a.exportData;ca.Wd=d.rotationEulerAnglesFactors;if(d.translationScalingFactors){var f=d.translationScalingFactors,k=aa.translationScalingFactors;ca.P[0]=f[0]*k[0];ca.P[1]=f[1]*k[1];ca.P[2]=f[2]*k[2]}ca.Yd=d.dsMean?1+d.dsMean:1;lb.Ub=.7;"undefined"!==typeof d.fgDisplaceXFactor&&(lb.Ub=d.fgDisplaceXFactor);c(a)}function Wb(a,c){c(a)}function Xb(){if(Ka.v({eb:Q.ea,width:X.u,height:X.L,debug:!1,tc:function(){Ma("GLCONTEXT_LOST")},antialias:Q.antialias,premultipliedAlpha:!0}))return!0;Ma("GL_INCOMPATIBLE");
return!1}function Yb(){var a=da.sd(),c=ya[a];ca.ya.Of(1);b.viewport(0,a,1,1);E.set("s61");Q.Ca&&E.G("u42",c.rz);da.ge("u41");var d=1,f=da.$f(Sa,ya,X.u/X.L);da.Hd()&&(f&&(d=0,Sa[a].va=0,c.isDetected=!1,c.detected=0),E.G("u48",d));E.Wf("u44",Ta.get(a));P.l(!1,!1);if(da.uf()||f)b.viewport(1,a,1,1),E.set("s62"),E.G("u48",d),P.l(!1,!1);ca.ya.sync()}function Zb(a){var c=ya[0];E.set("s64");ua.Ja.M();a.g(0);ua.S.g(1);P.l(!1,!1);E.set("s1");ta.K();ua.Ja.g(0);a=ua.Ja.F();P.l(!1,!1);zb(0,0,a,a,c.RGBDBuf,null,
1)}function Eb(){L.H&&L.H.remove();L.tb=L.element.isFakeVideo?!0:!1;if(L.tb){var a=Fb();a={isFlipY:!1,array:L.element.arrayBuffer,width:a.w,height:a.Ea,isKeepArray:!0}}else a={I:L.element};L.Fc=W.instance(Object.assign({isPot:!1,isLinear:!0,isFloat:!1},a));L.H=L.Fc}function Na(){var a=[{type:"mat2",name:"u38",value:L.A}];E.N("s59",[{type:"1i",name:"u1",value:0}].concat(a));E.N("s60",a);E.N("s63",a)}function Oa(){var a=[.5,.5],c=L.D[1]/L.D[0];La=Ka.W()/Ka.F();90===Math.abs(qa.rotate)&&(c=1/c);c>La?
a[1]*=La/c:a[0]*=c/La;E.N("s61",[{name:"u49",type:"1f",value:La}]);L.A[0]=0;L.A[1]=0;L.A[2]=0;L.A[3]=0;switch(qa.rotate){case 0:L.A[0]=a[0];L.A[3]=a[1];break;case 180:L.A[0]=-a[0];L.A[3]=-a[1];break;case 90:L.A[1]=a[0];L.A[2]=-a[1];break;case -90:L.A[1]=-a[0],L.A[2]=a[1]}qa.flipX&&(L.A[0]*=-1,L.A[2]*=-1);L.ub||(L.A[1]*=-1,L.A[3]*=-1)}function Fb(){var a={w:L.element.videoWidth||L.element.width,Ea:L.element.videoHeight||L.element.height};if(!a.w||!a.Ea||4>a.w||4>a.Ea)throw Error("INVALID VIDEO DIMENSIONS - width = "+
a.w+" height = "+a.Ea);return a}function ob(){var a=Fb(),c=L.D[0]!==a.w||L.D[1]!==a.Ea;c&&(L.D[0]=a.w,L.D[1]=a.Ea);return c}function ab(a,c){if(ma===ha.error)return!1;L.element=a;ob();c&&c();return!0}function Gb(a,c,d){a&&a();L.Qa={video:{facingMode:{exact:qa.facingMode},width:{min:qa.minWidth,max:qa.maxWidth,ideal:qa.idealWidth},height:{min:qa.minHeight,max:qa.maxHeight,ideal:qa.idealHeight}},audio:!1};U.Vc(L.Qa,qa.deviceId);U.get(L.element?L.element:U.wd(),function(f){c&&c(f);d(f)},function(){Ma("WEBCAM_UNAVAILABLE")},
L.Qa)}function Ma(a){ma!==ha.error&&(ma=ha.error,Q.Pa&&Q.Pa(a))}function Bb(a){return a.detected>aa.multiDetectionThresholdFactors[1]*aa.threshold}var Ba={lh:function(a){return Math.ceil(Math.log2(a))},Gh:function(a){return Math.log2(a)},Dh:function(a){return 0===Math.log2(a)%1},ug:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},vg:function(a,c,d){return Math.min(Math.max(a,c),d)},yg:function(a){return a*Math.PI/180},Nh:function(a,c){c=Math.pow(10,
c);return Math.round(a*c)/c},Oh:function(a){return Math.round(1E6*a)/1E6},mh:function(a,c){return(100*a/c).toFixed(3)},ma:function(a,c,d){return a*(1-d)+c*d},Hh:function(a,c){return a[0]*(1-c)+a[1]*c},He:function(a,c){return Ba.ze(a-c)},ze:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},Dg:function(a,c){return Math.abs(Ba.He(a,c))},kg:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),Math.cos(a)+Math.cos(c))}},$a={get:function(a,c,d){var f=new XMLHttpRequest;
f.open("GET",a,!0);f.withCredentials=!1;f.onreadystatechange=function(){4===f.readyState&&(200===f.status||0===f.status?c(f.responseText):"undefined"!==typeof d&&d(f.status))};f.send()},cf:function(a){return new Promise(function(c,d){$a.get(a,c,d)})},ih:function(a,c,d){a+=d?"?"+$a.Le(d):"";$a.get(a,function(f){c(JSON.parse(f))})},Jh:function(a,c,d){var f=new XMLHttpRequest;f.open("POST",a,!0);f.setRequestHeader("Content-type","application/x-www-form-urlencoded");f.onreadystatechange=function(){4!==
f.readyState||200!==f.status&&0!==f.status||d(f.responseText)};f.send(c)},Le:function(a){return"string"===typeof a?a:Object.keys(a).map(function(c){return encodeURIComponent(c)+"="+encodeURIComponent(a[c])}).join("&")},Wg:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},$b={create:function(a,c){for(var d=Array(c),f=0;f<c;++f)d[f]=a;return d},zg:function(a,c){for(var d=0;d<a.length;++d)c[d]=a[d]},clone:function(a){for(var c=
Array(a.length),d=0;d<a.length;++d)c[d]=a[d];return c},Rh:function(a,c,d){a.forEach(function(f,k){c[k]=f*d})},Yh:function(a){for(var c=a.length-1;0<c;--c){var d=Math.floor(Math.random()*(c+1)),f=a[c];a[c]=a[d];a[d]=f}},$h:function(a){return a.sort(function(c,d){return c-d})},dg:function(a){return Array.isArray(a)||a.constructor===Float32Array||a.constructor===Uint8Array}},pb={Sb:function(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=
pb.Sb(a[d],c);return a},Cg:function(a){return JSON.parse(JSON.stringify(a))}},jb={Zh:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},nc:function(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)},Og:function(a,c,d,f){return Math.pow(Math.min(Math.max((f-a)/(c-a),0),1),d)},ei:function(){return 0},Ih:function(){return 1},Fh:function(a){return a},Lg:function(a){return a*a},Qg:function(a){return a*(2-a)},Ig:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},Gg:function(a){return a*a*
a},Pg:function(a){return--a*a*a+1},Hg:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Mg:function(a){return a*a*a*a},Rg:function(a){return 1- --a*a*a*a},Jg:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},Ng:function(a){return a*a*a*a*a},Sg:function(a){return 1+--a*a*a*a*a},Kg:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},ac={Pe:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.,0.,0.,0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+c+"))-vec4(1.,1.,1.,1.),"+c+",step(0.,"+
c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1,0.1,0.1,0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},E=function(){function a(t,p,h){p=t.createShader(p);t.shaderSource(p,h);t.compileShader(p);return t.getShaderParameter(p,t.COMPILE_STATUS)?p:null}function c(t,p,h){p=a(t,t.VERTEX_SHADER,p);h=a(t,t.FRAGMENT_SHADER,h);t===b&&m.push(p,h);var J=t.createProgram();t.attachShader(J,p);
t.attachShader(J,h);t.linkProgram(J);return J}function d(t){return["float","sampler2D","int"].map(function(p){return"precision "+t+" "+p+";\n"}).join("")}function f(t,p){p.C=p.C?!0:!1;if(!p.C){p.za=p.za||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";p.Aa=p.Aa||["a0"];p.qa=p.qa||[2];p.precision=p.precision||z;p.id=y++;void 0!==p.$d&&(p.$d.forEach(function(N,O){p.h=p.h.replace(N,p.Hb[O])}),p.$d.splice(0));p.Mc=0;p.qa.forEach(function(N){p.Mc+=
4*N});var h=d(p.precision);p.wa=c(t,h+p.za,h+p.h);p.B={};p.i.forEach(function(N){p.B[N]=t.getUniformLocation(p.wa,N)});p.attributes={};p.Oa=[];p.Aa.forEach(function(N){var O=t.getAttribLocation(p.wa,N);p.attributes[N]=O;p.Oa.push(O)});if(p.j){t.useProgram(p.wa);r=p;n=p.id;for(var J in p.j)t.uniform1i(p.B[J],p.j[J])}p.ua=!0}}function k(t){za.Tf(w);n!==t.id&&(w.R(),n=t.id,r=t,b.useProgram(t.wa),t.Oa.forEach(function(p){0!==p&&b.enableVertexAttribArray(p)}))}function l(t,p,h){f(t,p,h);t.useProgram(p.wa);
t.enableVertexAttribArray(p.attributes.a0);n=-1;return r=p}function q(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var m=[],n=-1,r=null,y=0,D=!1,z="highp",I=["u1"],x=["u0"],H={u1:0},e={u0:0},A={u1:0,u2:1},B={u1:0,u3:1},g=["u1","u3","u4"],G={u5:0},u={s0:q(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:I,j:H,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
i:["u1","u2"],j:A},s3:{h:"uniform sampler2D u1;uniform vec2 u6,u7;varying vec2 vv0;void main(){vec2 a=vv0*u6+u7;gl_FragColor=texture2D(u1,a);}",i:["u1","u6","u7"],j:H,C:!0},s4:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:I,j:H},s5:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],j:A},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",
i:I,j:H},s7:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:I,j:H},s8:{h:"uniform sampler2D u0;uniform float u6;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u6;}",i:["u0","u6"],j:e},s9:{h:"uniform sampler2D u0;uniform float u6;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u6,f);gl_FragColor=b*g;}",i:["u0","u6"],j:e},s10:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
i:I,j:H},s11:{h:"uniform sampler2D u1,u8;uniform float u9;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u8,vv0);gl_FragColor=mix(b,a,u9*f);}",i:["u1","u8","u9"],j:{u1:0,u8:1}},s12:{h:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u10)+texture2D(u1,vv0+u10*vec2(1.,-1.))+texture2D(u1,vv0+u10*vec2(-1.,-1.))+texture2D(u1,vv0+u10*vec2(-1.,1.)));}",i:["u1","u10"],j:H},s13:{h:"uniform sampler2D u1;uniform vec4 u11;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u11);gl_FragColor=j(a);}",
i:["u1","u11"],j:H},s14:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:x,j:e,C:!0},s15:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:x,j:e},s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:x,j:e},
s17:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:x,j:e},s18:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:x,j:e},s19:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",i:x,j:e,C:!0},s20:{h:"uniform sampler2D u0,u12;uniform float u13;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u12,e);float b=u13*u13;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",
i:["u0","u12","u13"],j:{u0:0,u12:1},C:!0},s21:{h:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),f=floor(u14.x*fract(b*u14.y)),g=(f*u14.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",i:["u1","u14"],j:H},s22:{h:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),f=texture2D(u16,c);gl_FragColor=d*f;}",i:["u15","u16","u17"],j:{u16:0,u15:1,
u17:2},C:!0},s23:{h:"uniform float u18,u19;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 c=fract(vv0*u18),a=vv0;float b=u18*u19;a=(.5+floor(b*vv0))/b;vec4 d=texture2D(u15,a),f=texture2D(u16,c);gl_FragColor=d*f;}",i:["u16","u15","u18","u19"],j:{u16:0,u15:1}},s24:{h:"uniform float u18,u19;uniform sampler2D u15,u16,u20,u21,u22,u23;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u18),d=vv0;float h=u18*u19;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u15,d),m=texture2D(u16,c),a=texture2D(u23,d);a=floor(.5+a*255.);vec4 n=texture2D(u20,c),o=texture2D(u21,c),p=texture2D(u22,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:"u15 u16 u18 u19 u23 u20 u21 u22".split(" "),j:{u16:0,u15:1,u23:3,u20:4,u21:5,u22:6},C:!0},s25:{h:"uniform sampler2D u15,u16,u3;uniform float u18,u24,u25,u19;uniform vec2 u26;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u24*vv0),d=u24*vv0-c;float g=u18/u24;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u24;float m=u24*u19/u18;vec2 b=m*h;b=floor(u26*b+.5*(u19-1.)*(f-u26));vec2 a=(b+i*u25)/u19;a+=.25/u19;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u15,j),o=texture2D(u16,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u25*u25+q)*k.x*k.y;}",
i:"u15 u16 u18 u24 u25 u19 u3 u26".split(" "),j:{u16:0,u15:1,u3:2}},s26:{h:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",i:["u15","u16"],j:{u16:0,u15:1},C:!0},s27:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:g,j:B},s28:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:g,j:B,C:!0},s29:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:g,j:B,C:!0},s30:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:I,j:H,precision:"lowp"},s31:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u27"],j:H,precision:"lowp"},s32:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u27"],j:H,precision:"lowp"},s33:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u28"],j:A,C:!0},s34:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u28,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u28"],j:A,C:!0},s35:{h:"uniform sampler2D u5;uniform vec2 u10;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u10*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u10*h),d=texture2D(u5,a+u10*i),j=texture2D(u5,a+u10),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u10"],j:G},s36:{h:"uniform sampler2D u5;uniform vec2 u10;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u10*k),d=texture2D(u5,a+u10*l),g=texture2D(u5,a+u10),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u10*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u10*m),d=f(a+u10*2.),g=f(a+u10*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u10"],
j:G,C:!0},s37:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:H,precision:"lowp",C:!0},s38:{h:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u10)+2002./e*texture2D(u1,vv0-2.*u10)+3003./e*texture2D(u1,vv0-u10)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u10)+2002./e*texture2D(u1,vv0+2.*u10)+1001./e*texture2D(u1,vv0+3.*u10);gl_FragColor=a;}",i:["u10","u1"],
j:H,precision:"lowp",C:!0},s39:{h:"uniform sampler2D u1,u12,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u12,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u12","u29"],j:{u1:0,u12:1,u29:2},C:!0}},v={s40:{h:"uniform float u18,u30;uniform sampler2D u15,u16,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u18","u15","u16","u3","u30"],Hb:["1.1111","gl_FragColor\\*=2.2222;"]},s41:{h:"uniform float u18,u30,u19;uniform sampler2D u15,u16,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u19,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u19;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u19,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u18 u19 u15 u16 u3 u30".split(" "),Hb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},C=null,M=null,w={wb:function(){return D},v:function(){if(!D){C=pb.Sb(u,2);M=pb.Sb(v,2);z="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var t in C)f(b,C[t],t);E.set("s0");b.enableVertexAttribArray(0);D=!0}},$a:function(t){t.forEach(function(p){w.Wc(p)})},Wc:function(t){C[t.id]=t;f(b,t,t.id)},hf:function(t,
p,h){p||(p=t);C[p]=Object.create(M[t]);C[p].pf=!0;M[t].Hb&&M[t].Hb.forEach(function(J,N){C[p].h=C[p].h.replace(new RegExp(J,"g"),h[N])});f(b,C[p],p)},set:function(t){var p=C[t];p.C&&(p.C=!1,f(b,p,t));k(p)},Ya:function(t){return l(t,q(),"s42")},Dc:function(t){return l(t,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:z},"s43")},Me:function(t){return"undefined"===typeof C[t]?!1:C[t].ua},R:function(){-1!==n&&(n=-1,r.Oa.forEach(function(t){0!==t&&b.disableVertexAttribArray(t)}))},Ec:function(){var t=
0;r.Oa.forEach(function(p,h){h=r.qa[h];b.vertexAttribPointer(p,h,b.FLOAT,!1,r.Mc,t);t+=4*h})},gd:function(){b.enableVertexAttribArray(0)},Ka:function(){w.Ib(b)},Ib:function(t){t.vertexAttribPointer(r.Oa[0],2,t.FLOAT,!1,8,0)},Uh:function(t,p){b.uniform1i(r.B[t],p)},G:function(t,p){b.uniform1f(r.B[t],p)},V:function(t,p,h){b.uniform2f(r.B[t],p,h)},Uf:function(t,p){b.uniform2fv(r.B[t],p)},Wf:function(t,p){b.uniform3fv(r.B[t],p)},Vf:function(t,p,h,J){b.uniform3f(r.B[t],p,h,J)},Xf:function(t,p,h,J,N){b.uniform4f(r.B[t],
p,h,J,N)},ce:function(t,p){b.uniform4fv(r.B[t],p)},Vh:function(t,p){b.uniformMatrix2fv(r.B[t],!1,p)},Wh:function(t,p){b.uniformMatrix3fv(r.B[t],!1,p)},Xh:function(t,p){b.uniformMatrix4fv(r.B[t],!1,p)},N:function(t,p){w.set(t);p.forEach(function(h){switch(h.type){case "4f":b.uniform4fv(r.B[h.name],h.value);break;case "3f":b.uniform3fv(r.B[h.name],h.value);break;case "2f":b.uniform2fv(r.B[h.name],h.value);break;case "1f":b.uniform1f(r.B[h.name],h.value);break;case "1i":b.uniform1i(r.B[h.name],h.value);
break;case "mat2":b.uniformMatrix2fv(r.B[h.name],!1,h.value);break;case "mat3":b.uniformMatrix3fv(r.B[h.name],!1,h.value);break;case "mat4":b.uniformMatrix4fv(r.B[h.name],!1,h.value)}})},kh:function(){return"lowp"},m:function(){w.R();b.disableVertexAttribArray(0);for(var t in C){var p=C[t];p.ua&&(p.ua=!1,b.deleteProgram(p.wa));p.pf&&delete C[t]}m.forEach(function(h){b.deleteShader(h)});m.splice(0);y=0;D=!1;r=null;n=-1}};return w}(),b=null,Ka=function(){function a(x){console.log("ERROR in ContextFF: ",
x);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(x,H,e){x.setAttribute("width",H);x.setAttribute("height",e)}function f(x){function H(){Ea.m();Z.reset();A.getExtension("WEBGL_lose_context").loseContext()}if(c())return!1;var e=document.createElement("canvas");d(e,5,5);var A=null;try{A=e.getContext("webgl2",x)}catch(B){return!1}if(!A)return!1;k(A);Z.hd(A);x=Z.Tb(A);if(!x.ha&&!x.ja)return H(),!1;x=Ea.Xc(A,x);H();return x?!0:!1}function k(x){x.clearColor(0,
0,0,0);x.disable(x.DEPTH_TEST);x.disable(x.BLEND);x.disable(x.DITHER);x.disable(x.STENCIL_TEST);x.disable(x.CULL_FACE);x.GENERATE_MIPMAP_HINT&&x.FASTEST&&x.hint(x.GENERATE_MIPMAP_HINT,x.FASTEST);x.disable(x.SAMPLE_ALPHA_TO_COVERAGE);x.disable(x.SAMPLE_COVERAGE);x.depthFunc(x.LEQUAL);x.clearDepth(1)}var l=null,q=null,m=null,n=null,r=!0,y=null,D=null,z=[],I={F:function(){return l.width},W:function(){return l.height},ah:function(){return l},Zg:function(){return b},ka:function(){return r},flush:function(){b.flush()},
ff:function(){ta.ca();I.Mf()},Mf:function(){W.reset();P.reset();E.R();E.gd();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);P.Ba();E.Ka()},Se:function(){y||(y=new Uint8Array(l.width*l.height*4));b.readPixels(0,0,l.width,l.height,b.RGBA,b.UNSIGNED_BYTE,y);return y},dh:function(){return l.toDataURL("image/jpeg")},eh:function(){ta.K();q||(q=document.createElement("canvas"),m=q.getContext("2d"));d(q,l.width,l.height);for(var x=I.Se(),H=m.createImageData(q.width,q.height),e=q.width,A=q.height,B=H.data,g=0;g<
A;++g)for(var G=A-g-1,u=0;u<e;++u){var v=4*(g*e+u),C=4*(G*e+u);B[v]=x[C];B[v+1]=x[C+1];B[v+2]=x[C+2];B[v+3]=x[C+3]}m.putImageData(H,0,0);return q.toDataURL("image/png")},bh:function(x){!q&&x&&(q=document.createElement("canvas"),m=q.getContext("2d"));var H=x?q:document.createElement("canvas");d(H,l.width,l.height);(x?m:H.getContext("2d")).drawImage(l,0,0);return H},v:function(x){x=Object.assign({ia:null,tc:null,eb:null,cd:null,width:512,height:512,premultipliedAlpha:!1,lf:!0,antialias:!1,debug:!1,
Bg:!1},x);x.ia?(b=x.ia,l=x.ia.canvas):x.cd&&!x.eb?l=document.getElementById(x.cd):x.eb&&(l=x.eb);l||(l=document.createElement("canvas"));l.width=x.width;l.height=x.height;if(b)r=b instanceof WebGL2RenderingContext;else{r=!0;var H={antialias:x.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:x.premultipliedAlpha,stencil:!1,depth:x.lf,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(H.antialias=!1);var e=f(H);e||!H.antialias||c()||(H.antialias=!1,e=f(H));e&&(b=l.getContext("webgl2",H));b?r=!0:((b=l.getContext("webgl",H))||(b=l.getContext("experimental-webgl",H)),r=!1)}if(!b)return a("WebGL1 and 2 are not enabled");x.tc&&l.addEventListener&&(n=b.getExtension("WEBGL_lose_context"))&&(D=x.tc,l.addEventListener("webglcontextlost",D,!1));if(!Z.v())return a("Not enough GL capabilities");k(b);E.v();P.v();Ea.Xc(b,Z.Re());z.forEach(function(A){A(b)});z.splice(0);return!0},qg:function(){return new Promise(function(x){b?
x(b):z.push(x)})},m:function(){b&&(Z.m(),E.m(),Ea.m());n&&D&&(l.removeEventListener("webglcontextlost",D,!1),n=D=null);b=y=m=q=l=null;z.splice(0)}};return I}(),za=function(){function a(){null===c&&("undefined"!==typeof E?c=E:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},Tf:function(d){c!==d&&(c&&c.R(),c=d)},wb:function(){return c.wb()},Ka:function(){return c.Ka()},Ib:function(d){return c.Ib(d)},Ec:function(){return c.Ec()},R:function(){return c.R()},set:function(d){a();
return c.set(d)},Ya:function(d){a();return c.Ya(d)},Dc:function(d){a();return c.Dc(d)}}}(),Da=function(){function a(h){b.bindTexture(b.TEXTURE_2D,h)}function c(h){M[0]=h;h=w[0];var J=h>>16&32768,N=h>>12&2047,O=h>>23&255;return 103>O?J:142<O?J|31744|((255==O?0:1)&&h&8388607):113>O?(N|=2048,J|(N>>114-O)+(N>>113-O&1)):J=(J|O-112<<10|N>>1)+(N&1)}function d(h){var J=new Uint16Array(h.length);h.forEach(function(N,O){J[O]=c(N)});return J}function f(){if(null!==t.ec)return t.ec;var h=l(d([.5,.5,.5,.5]),!0);
return null===h?!0:t.ec=h}function k(){if(null!==t.fc)return t.fc;var h=l(new Uint8Array([127,127,127,127]),!1);return null===h?!0:t.fc=h}function l(h,J){if(!za.wb()||!H)return null;var N=null,O=Math.sqrt(h.length/4);try{var Y=b.getError();if("FUCKING_BIG_ERROR"===Y)return!1;N=p.instance({isFloat:!1,T:J,array:h,width:O});Y=b.getError();if(Y!==b.NO_ERROR)return!1}catch(pa){return!1}ka.K();b.viewport(0,0,O,O);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);za.set("s0");N.cb(0);la.l(!0,!0);h=4*O*O;
J=new Uint8Array(h);b.readPixels(0,0,O,O,b.RGBA,b.UNSIGNED_BYTE,J);O=!0;for(Y=0;Y<h;++Y)O=O&&3>Math.abs(J[Y]-127);N.remove();ka.ca();return O}var q=0,m=null,n=0,r=null,y=null,D=null,z=null,I=null,x=null,H=!1,e=[],A={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,I:null,dc:null,mf:!1,T:!1,ra:null,Ab:4,oc:0},B=!1,g=null,G=null,u=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,
1]],v=!1,C=!1,M=new Float32Array(1),w=new Int32Array(M.buffer),t={ec:null,fc:null},p={v:function(){H||(I=[b.RGBA,null,b.RGBA,b.RGBA],x=[b.RGBA,null,b.RGBA,b.RGBA],m=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],v="undefined"!==typeof JEContext,C="undefined"!==typeof Z,v&&JEContext.Eh()&&m.push(b.TEXTURE8,b.TEXTURE9),r=[-1,-1,-1,-1,-1,-1,-1,-1],z=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],H=!0)},gf:function(){if(!y){for(var h=new Float32Array(16384),J=0;16384>J;++J)h[J]=
2*Math.random()-1;y={random:p.instance({isFloat:!0,isPot:!0,array:h,width:64}),je:p.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}p.ig()},th:function(){return y.je},ig:function(){z[1]=Z.bc(b)},Rf:function(){x=I=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},Vd:function(h){E.set("s1");ka.K();var J=h.F(),N=h.W();b.viewport(0,0,J,N);h.g(0);la.l(!1,!1)},Lh:function(h,J){p.Vd(h);b.readPixels(0,0,h.F(),h.W(),b.RGBA,b.UNSIGNED_BYTE,J)},Mh:function(h,J){p.Vd(h);return Z.Gb(0,0,h.F(),h.W(),J)},
pd:function(h,J,N,O,Y,pa,va){h.activeTexture(h.TEXTURE0);var Fa=h.createTexture();h.bindTexture(h.TEXTURE_2D,Fa);Y=Y instanceof Float32Array?Y:new Float32Array(Y);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,pa);h.texImage2D(h.TEXTURE_2D,0,h.RGBA,N,O,0,h.RGBA,h.FLOAT,
Y);h.bindTexture(h.TEXTURE_2D,null);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1);va&&(ka.ca(),E.Ya(h));h.viewport(0,0,N,O);h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,J,0);h.bindTexture(h.TEXTURE_2D,Fa);va?la.l(!0,!0):P.kb(h);h.deleteTexture(Fa);H&&(r[0]=-1,D=null,q=0)},Ob:function(h){h!==q&&(b.activeTexture(m[h]),q=h)},instance:function(h){var J;function N(){S=void 0!==F.I.videoWidth?F.I.videoWidth:F.I.width;T=void 0!==F.I.videoHeight?F.I.videoHeight:F.I.height}function O(K){var R=
b.getError();if("FUCKING_BIG_ERROR"===R)return!1;b.texImage2D(b.TEXTURE_2D,0,ia,ea,fa,K);R=b.getError();R!==b.NO_ERROR&&ea!==b.RGBA&&(ea=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,ia,ea,fa,K));return!0}function Y(){if(!Hb){a(wa);Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,Ca);F.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,F.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,F.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));F.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.fh().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.mg);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,F.isLinear?b.LINEAR:b.NEAREST);F.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,F.isMipmap&&!Pa?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,F.isMipmap&&!Pa?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);
ea=I[F.Ab-1];ia=x[F.Ab-1];fa=z[qb];if(Z.ka()){var K=Z.Ue();ea===b.RGBA&&fa===b.FLOAT?F.isMipmap||F.isLinear?ia=Ea.We(b):Z.Yc()?K&&(ia=K):ia=b.RGBA16F||b.RGBA:ea===b.RGB&&fa===b.FLOAT&&K&&(ia=K,ea=b.RGBA)}if(F.T&&!F.isFloat||F.isFloat&&F.isMipmap&&Ea.tf())ia=Z.Ve(),fa=Z.bc(b);F.oc&&(bb=F.oc);F.isSrgb&&4===F.Ab&&(ea=JEContext.rh());if(F.I)O(F.I);else if(F.url)O(Ha);else if(xa){K=xa;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,ia,S,T,0,ea,fa,K),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,
0,ia,S,T,0,ea,fa,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,S,T,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(oc){b.texImage2D(b.TEXTURE_2D,0,ia,S,T,0,ea,fa,null)}F.isKeepArray||(xa=null)}else K=b.getError(),"FUCKING_BIG_ERROR"!==K&&(b.texImage2D(b.TEXTURE_2D,0,ia,S,T,0,ea,fa,null),K=b.getError(),K!==b.NO_ERROR&&(ea=b.RGBA,F.T&&fa!==b.FLOAT&&(fa=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,ia,S,T,0,ea,fa,null))));if(F.isMipmap)if(!Pa&&ba)ba.ac(),cb=!0;else if(Pa){K=Math.log2(Math.min(S,T));
Ra=Array(1+K);Ra[0]=wa;for(var R=1;R<=K;++R){var ja=Math.pow(2,R),V=S/ja;ja=T/ja;var Qa=b.createTexture();a(Qa);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,ia,V,ja,0,ea,fa,null);a(null);Ra[R]=Qa}cb=!0}a(null);r[q]=-1;Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Ua=!0;F.ra&&ba&&(F.ra(ba),F.ra=null)}}function pa(){for(var K=S*T,R=2*K,ja=3*K,V=0;V<K;++V)Aa[0][V]=Va[V],Aa[1][V]=Va[V+K],Aa[2][V]=Va[V+
R],Aa[3][V]=Va[V+ja]}function va(){var K=S*T*4;Ga=[new Uint8Array(K),new Uint8Array(K),new Uint8Array(K),new Uint8Array(K)];Aa=[new Float32Array(Ga[0].buffer),new Float32Array(Ga[1].buffer),new Float32Array(Ga[2].buffer),new Float32Array(Ga[3].buffer)];db=new Uint8Array(4*K);Va=new Float32Array(db.buffer);Wa=!0}function Fa(){J=new Uint8Array(S*T*4);Ib=new Float32Array(J.buffer);rb=!0}var F=Object.assign({},A,h),Xa=n++;null===F.isFlipY&&(F.isFlipY=F.url?!0:!1);F.data&&(F.array="string"===typeof F.data?
Pb(F.data):F.isFloat?new Float32Array(F.data):new Uint8Array(F.data),F.isFlipY=!1);var qb=0,Jb=F.I?!0:!1,Ya=null,sb=null,Kb=!1;F.T=F.T||F.isFloat;F.T&&(qb=1);!F.mf&&F.isFloat&&C&&!Z.Yc()&&(F.isFloat=!1);F.isFloat&&(qb=2);F.isAnisotropicFiltering&&v&&!JEContext.xh()&&(F.isAnisotropicFiltering=!1);var wa=F.dc||b.createTexture(),Ha=null,xa=!1,S=0,T=0,Ua=!1,Hb=!1,Wa=!1,Aa=null,Ga=null,db=null,Va=null,ia=null,ea=null,fa=null,Ca=F.isFlipY,bc=(h=F.T&&F.isMipmap)&&Ea.ue(),Pa=h&&!bc?!0:!1,Ra=null,bb=-1,Lb=
-1,cb=!1;var rb=!1;var Ib=J=null;F.width&&(S=F.width,T=F.height?F.height:S);var ba={get:function(){return wa},F:function(){return S},W:function(){return T},uh:function(){return F.url},yh:function(){return F.isFloat},Ah:function(){return F.T},Bh:function(){return F.isLinear},ac:function(){b.generateMipmap(b.TEXTURE_2D)},se:function(K,R){Pa?(K||(K=ba.td()),p.Ob(R),a(Ra[K]),r[R]=-1):ba.g(R)},td:function(){-1===bb&&(bb=Math.log(S)/Math.log(2));return bb},Oe:function(K){K||(K=ba.td());if(Pa){E.set("s12");
p.Ob(0);for(var R=S,ja=T,V=1;V<=K;++V)R/=2,ja/=2,E.V("u10",.25/R,.25/ja),b.viewport(0,0,R,ja),a(Ra[V-1]),b.framebufferTexture2D(ka.ob(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,Ra[V],0),la.l(!1,1===V);r[0]=-1}else K!==Lb&&(Lb=K,b.TEXTURE_MAX_LEVEL&&b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAX_LEVEL,K)),ba.ac()},Th:function(K){(Jb=!$b.dg(K))?(xa=null,F.I=K,N()):xa=K},g:function(K){if(!Ua)return!1;p.Ob(K);if(r[K]===Xa)return!1;a(wa);r[K]=Xa;return!0},cb:function(K){b.activeTexture(m[K]);q=K;a(wa);r[K]=Xa},o:function(){D=
ba;b.framebufferTexture2D(ka.ob(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,wa,0)},M:function(){D=ba;b.viewport(0,0,S,T);b.framebufferTexture2D(ka.ob(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,wa,0)},Kc:p.Kc,be:function(K,R){S=K;T=R},resize:function(K,R){ba.be(K,R);Y()},clone:function(K){K=p.instance({width:S,height:T,T:F.T,isFloat:F.isFloat,isLinear:F.isLinear,isMirrorY:F.isMirrorY,isFlipY:K?!Ca:Ca,isPot:F.isPot});za.set("s0");ka.ca();K.o();b.viewport(0,0,S,T);ba.g(0);la.l(!0,!0);return K},Yf:function(){b.viewport(0,
0,S,T)},remove:function(){b.deleteTexture(wa);Hb=!0;e.splice(e.indexOf(ba),1);ba=null},refresh:function(){ba.cb(0);Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Jb?b.texImage2D(b.TEXTURE_2D,0,ia,ea,fa,F.I):b.texImage2D(b.TEXTURE_2D,0,ia,S,T,0,ea,fa,xa);Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Td:function(){Wa||va();b.readPixels(0,0,S,4*T,b.RGBA,b.UNSIGNED_BYTE,db);pa();return Aa},Jf:function(){Wa||va();return Z.Gb(0,0,S,4*T,db).then(function(){pa();return Aa})},Lf:function(){rb||Fa();b.readPixels(0,
0,S,T,b.RGBA,b.UNSIGNED_BYTE,J);return Ib},Kf:function(){rb||Fa();return Z.Gb(0,0,S,T,J)},dd:function(K){ka.K();E.set("s13");ba.g(0);if(K)b.viewport(0,0,S,T),E.Xf("u11",.25,.25,.25,.25),la.l(!1,!0);else for(K=0;4>K;++K)b.viewport(0,T*K,S,T),E.ce("u11",u[K]),la.l(!1,0===K)},Mb:function(K){var R=fa===z[0]&&!k();a(wa);Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);R?(Kb||(Ya=document.createElement("canvas"),Ya.width=S,Ya.height=T,sb=Ya.getContext("2d"),sb.createImageData(S,T),Kb=!0),null.data.set(K),sb.putImageData(null,
0,0),b.texImage2D(b.TEXTURE_2D,0,ia,ea,fa,Ya)):b.texImage2D(b.TEXTURE_2D,0,ia,S,T,0,ea,fa,K);r[q]=Xa;Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},di:function(K,R){a(wa);R&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,ia,ea,fa,K);r[q]=Xa;R&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Sh:function(K,R){var ja=S*T,V=4*ja;K=F.T?K?"RGBE":"JSON":"RGBA";R&&(K=R);R=Z.ka()&&!1;var Qa=null;switch(K){case "RGBE":Qa="s44";break;case "JSON":Qa=R?"s0":"s13";break;case "RGBA":case "RGBAARRAY":Qa=
"s7"}Wa||("RGBA"===K||"RGBE"===K||"RGBAARRAY"===K?(Ga=new Uint8Array(V),Wa=!0):"JSON"!==K||R||va());ka.K();E.set(Qa);ba.g(0);V=null;if("RGBA"===K||"RGBE"===K||"RGBAARRAY"===K){b.viewport(0,0,S,T);la.l(!0,!0);b.readPixels(0,0,S,T,b.RGBA,b.UNSIGNED_BYTE,Ga);if("RGBAARRAY"===K)return{data:Ga};B||(g=document.createElement("canvas"),G=g.getContext("2d"),B=!0);g.width=S;g.height=T;ja=G.createImageData(S,T);ja.data.set(Ga);G.putImageData(ja,0,0);V=g.toDataURL("image/png")}else if("JSON"===K)if(R)V=new Float32Array(ja),
b.viewport(0,0,S,T),la.l(!0,!0),b.readPixels(0,0,S,T,b.RGBA,b.FLOAT,V);else{for(V=0;4>V;++V)b.viewport(0,T*V,S,T),E.ce("u11",u[V]),la.l(!V,!V);ba.Td();V=Array(ja);for(R=0;R<ja;++R)V[4*R]=Aa[0][R],V[4*R+1]=Aa[1][R],V[4*R+2]=Aa[2][R],V[4*R+3]=Aa[3][R]}return{format:K,data:V,width:S,height:T,isMirrorY:F.isMirrorY,isFlipY:"RGBA"===K?F.isFlipY:!F.isFlipY}}};F.isMipmap&&!Pa&&Ua&&!cb&&(ba.ac(),cb=!0);if(F.url)a(wa),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Ha=new Image,Ha.Ag=
"Anonymous",Ha.crossOrigin="Anonymous",Ha.src=F.url,Ha.onload=function(){S=Ha.width;T=Ha.height;Y()};else if(F.I){var Mb=function(){N();S?Y():setTimeout(Mb,1)};Mb()}else F.array?(F.T&&!F.isFloat?F.array instanceof Uint16Array?(xa=F.array,Y()):f()?(xa=d(F.array),Y()):(Y(),p.pd(b,wa,ba.F(),ba.W(),F.array,Ca,!0)):(xa=F.isFloat?F.array instanceof Float32Array?F.array:new Float32Array(F.array):F.array instanceof Uint8Array?F.array:new Uint8Array(F.array),Y()),F.isKeepArray||(xa&&xa!==F.array&&(xa=null),
delete F.array)):F.dc?Ua=!0:Y();ba.ph=ba.F;F.ra&&Ua&&(F.ra(ba),F.ra=null);e.push(ba);return ba},K:function(h){h!==q&&(b.activeTexture(m[h]),q=h);r[h]=-1;a(null)},pg:function(h){y.random.g(h)},Kc:function(){D=null;b.framebufferTexture2D(ka.ob(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==q&&b.activeTexture(m[0]);for(var h=0;h<m.length;++h)r[h]=-1;q=-1},Ph:function(){q=-1},fg:function(){for(var h=0;h<m.length;++h)p.K(h)},qd:function(){y&&(y.random.remove(),y.je.remove())},ci:function(h,
J){if("RGBA"===h.format||"RGBE"===h.format){var N=new Image;N.src=h.data;N.onload=function(){p.instance({isMirrorY:h.isMirrorY,isFlipY:h.isFlipY,isFloat:!1,I:N,ra:function(O){if("RGBA"===h.format)J(O);else{var Y=h.width,pa=h.height,va=p.instance({isMirrorY:h.isMirrorY,isFloat:!0,width:Y,height:pa,isFlipY:h.isFlipY});ka.ca();b.viewport(0,0,Y,pa);E.set("s45");va.o();O.g(0);la.l(!0,!0);p.K(0);J(va);Z.flush();setTimeout(O.remove,50)}}})}}else"JSON"===h.format?J(p.instance({isFloat:!0,isFlipY:h.isFlipY,
width:h.width,height:h.height,array:new Float32Array(h.data)})):J(!1)},Ae:d,m:function(){D&&(ta.ca(),p.Kc(),ta.K());p.fg();e.slice(0).forEach(function(h){h.remove()});e.splice(0);H=!1;n=0;"undefined"!==typeof Ea&&Ea.m();y=null}};return p}(),Ub=function(){return{instance:function(a){var c=[Da.instance(a),Da.instance(a)],d=[c[1],c[0]],f=d,k={Of:function(l){f[1].o();f[0].g(l);k.ee()},Pf:function(l){f[1].M();f[0].g(l);k.ee()},ee:function(){f=f===c?d:c},refresh:function(){f[0].refresh();f[1].refresh()},
g:function(l){f[0].g(l)},cb:function(l){f[0].cb(l)},og:function(l){f[1].g(l)},jh:function(){return f[0]},nh:function(){return f[1]},Mb:function(l){f[0].Mb(l);f[1].Mb(l)},remove:function(){f[0].remove();f[1].remove();f=null},sync:function(){k.Pf(0);E.set("s0");P.l(!1,!1)}};return k}}}(),la=function(){function a(n){var r={aa:null,indices:null};r.aa=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,r.aa);n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),n.STATIC_DRAW);r.indices=n.createBuffer();
n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r.indices);n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),n.STATIC_DRAW);return r}var c=null,d=0,f=!1,k=[],l=-2,q=-2,m={reset:function(){q=l=-2},v:function(){f||(c=a(b),m.Ba(),f=!0)},instance:function(n){var r=d++,y=n.indices?n.indices.length:0,D="undefined"===typeof n.mode?b.STATIC_DRAW:n.mode,z=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,z);b.bufferData(b.ARRAY_BUFFER,n.aa instanceof Float32Array?n.aa:new Float32Array(n.aa),D);l=r;var I=null,x=
null,H=null;if(n.indices){I=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,I);var e=null;65536>n.indices.length?(e=Uint16Array,x=b.UNSIGNED_SHORT,H=2):(e=Uint32Array,x=b.UNSIGNED_INT,H=4);e=n.indices instanceof e?n.indices:new e(n.indices);b.bufferData(b.ELEMENT_ARRAY_BUFFER,e,D);q=r}var A={te:function(B){l!==r&&(b.bindBuffer(b.ARRAY_BUFFER,z),l=r);B&&za.Ec()},qe:function(){q!==r&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,I),q=r)},bind:function(B){A.te(B);A.qe()},Eg:function(){b.drawElements(b.TRIANGLES,
y,x,0)},Fg:function(B,g){b.drawElements(b.TRIANGLES,B,x,g*H)},remove:function(){b.deleteBuffer(z);n.indices&&b.deleteBuffer(I);A=null}};k.push(A);return A},Ba:function(){-1!==l&&(b.bindBuffer(b.ARRAY_BUFFER,c.aa),l=-1);-1!==q&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.indices),q=-1)},l:function(n,r){n&&la.Ba();r&&za.Ka();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},kb:function(n){n=n||b;var r=a(n);n.bindBuffer(n.ARRAY_BUFFER,r.aa);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r.indices);za.Ib(n);n.clear(n.COLOR_BUFFER_BIT);
n.drawElements(n.TRIANGLES,3,n.UNSIGNED_SHORT,0);n.flush();n.bindBuffer(n.ARRAY_BUFFER,null);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null);n.deleteBuffer(r.aa);n.deleteBuffer(r.indices);m.reset();f&&(m.Ba(),za.Ka())},qd:function(){var n=b,r=c;n.deleteBuffer(r.aa);n.deleteBuffer(r.indices)},m:function(){m.qd();k.forEach(function(n){n.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);m.reset();f=!1;k.splice(0);d=0}};return m}(),ka=function(){var a=null,c=null,d=null,
f=!1,k=[],l={J:-2,od:1},q={wb:function(){return f},v:function(){if(!f){a=b.createFramebuffer();var m=Z.ka();c=m&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=m&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;f=!0}},gh:function(){return c},Xe:function(){return d},ob:function(){return b.FRAMEBUFFER},oh:function(){return l},Yg:function(){return a},instance:function(m){void 0===m.Ad&&(m.Ad=!1);var n=m.H?m.H:null,r=m.width,y=void 0!==m.height?m.height:m.width,D=a,z=null,I=!1,x=!1,H=0;n&&
(r=r?r:n.F(),y=y?y:n.W());var e={ae:function(){I||(D=b.createFramebuffer(),I=!0,H=l.od++)},le:function(){e.ae();e.o();z=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,z);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,r,y);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,z);b.clearDepth(1)},bind:function(A,B){H!==l.J&&(b.bindFramebuffer(c,D),l.J=H);n&&n.o();B&&b.viewport(0,0,r,y);A&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},ng:function(){H!==l.J&&(b.bindFramebuffer(c,
D),l.J=H)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},wg:function(){b.clear(b.COLOR_BUFFER_BIT)},xg:function(){b.clear(b.DEPTH_BUFFER_BIT)},Yf:function(){b.viewport(0,0,r,y)},o:function(){H!==l.J&&(b.bindFramebuffer(c,D),l.J=H)},rtt:function(A){n=A;l.J!==H&&(b.bindFramebuffer(b.FRAMEBUFFER,D),l.J=H);A.o()},K:function(){b.bindFramebuffer(c,null);l.J=-1},resize:function(A,B){r=A;y=B;z&&(b.bindRenderbuffer(b.RENDERBUFFER,z),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,
r,y))},remove:function(){D===a||x||(b.bindFramebuffer(c,D),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),z&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(D),z&&b.deleteRenderbuffer(z));x=!0}};m.Ad&&e.le();k.push(e);return e},K:function(){b.bindFramebuffer(c,null);l.J=-1},gg:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);Z.de();l.J=-1},reset:function(){l.J=-2},ca:function(){0!==
l.J&&(b.bindFramebuffer(c,a),l.J=0)},clear:function(){Z.de();b.clear(b.COLOR_BUFFER_BIT)},m:function(){q.K();k.forEach(function(m){m.remove()});null!==a&&(b.deleteFramebuffer(a),a=null);q.reset();f=!1;k.splice(0);l.od=1}};return q}(),Z=function(){function a(){m="undefined"===typeof Ka?JEContext:Ka;n=!0}function c(g,G){for(var u=0;u<g.length;++u){var v=G.getExtension(g[u]);if(v)return v}return null}function d(){null!==e.Lb&&(clearTimeout(e.Lb),e.Lb=null);e.Fa=!1}function f(g){if(0===e.ta.length){e.X=
b.PIXEL_PACK_BUFFER;e.ta.splice(0);e.qb.splice(0);for(var G=0;G<e.Ra;++G)e.ta.push(b.createBuffer()),e.qb.push(-1);e.ga=0;e.rc=0}b.bindBuffer(e.X,e.ta[e.ga]);g.byteLength!==e.qb[e.ga]&&(b.bufferData(e.X,g.byteLength,b.STREAM_READ),e.qb[e.ga]=g.byteLength);e.vh=!0}function k(){b.bindBuffer(e.X,null)}function l(){e.Da.forEach(function(g){b.deleteSync(g)});e.Da.splice(0)}function q(){e.ga=(e.ga+1)%e.Ra;++e.rc}var m=null,n=!1,r={Cd:!1,Gc:null,Hc:null,Fd:!1,sf:!1,Ic:null,Gd:!1,Jc:null,Dd:!1,Qb:null,jf:!1,
Rb:null,kf:!1},y=null,D={ha:!0,ja:!0,$b:!0,Sd:!1},z=null,I=!0,x=null,H=null,e={Be:1,Ra:-1,ga:0,rc:0,Fa:!1,ta:[],Da:[],qb:[],X:null,Lb:null},A="undefined"===typeof window?{}:window,B={v:function(){if(n)return!0;B.reset();n||a();var g=b;if(!y.Cd){y.Gc=B.ld(g);A.GL_EXT_FLOAT=y.Gc;y.Fd=y.Gc?!0:!1;if(y.Fd||B.ka())y.Hc=B.md(g),y.sf=y.Hc?!0:!1,A.GL_EXT_FLOATLINEAR=y.Hc;y.Cd=!0}if(!y.Dd){y.Ic=B.ib(g);y.Ic&&(y.Gd=!0,A.GL_EXT_HALFFLOAT=y.Ic);if(y.Gd||B.ka())y.Jc=B.nd(g),A.GL_EXT_HALFFLOATLINEAR=y.Jc;y.wh=y.Jc?
!0:!1;y.Dd=!0}y.Qb=B.jd(g);y.jf=y.Qb?!0:!1;A.GL_EXT_COLORBUFFERFLOAT=y.Qb;y.Rb=B.kd(g);y.kf=y.Rb?!0:!1;A.GL_EXT_COLORBUFFERHALFFLOAT=y.Rb;ka.v();Da.v();if(!B.Ee())return!1;la.v();Da.gf();return!0},reset:function(){y=Object.assign({},r);z=Object.assign({},D)},F:function(){n||a();return m.F()},W:function(){n||a();return m.W()},ka:function(){n||a();return m.ka()},hd:function(g){B.jd(g);B.kd(g);B.ld(g);B.md(g);B.ib(g);B.nd(g)},jd:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),
kd:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),ld:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),md:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),ib:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),nd:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),
bc:function(g){var G=B.ib(g);return G&&G.HALF_FLOAT_OES?G.HALF_FLOAT_OES:g.HALF_FLOAT||g.FLOAT},Ue:function(){return H||b.RGBA32F||b.RGBA},Ve:function(){return x||b.RGBA16F||b.RGBA},Re:function(){return z},Yc:function(){return z.ha},sg:function(){return z.ja},rg:function(){return z.$b},ve:function(){return z.Sd&&I},he:function(g){I=g;!g&&e.Fa&&(l(),b.bindBuffer(e.X,null),e.Fa=!1)},Ch:function(){return e.Fa},Jb:function(g,G,u){function v(){g.bindTexture(g.TEXTURE_2D,null);g.bindFramebuffer(C,null);
g.deleteTexture(t);g.deleteFramebuffer(w)}var C=g.FRAMEBUFFER,M=g.NEAREST,w=g.createFramebuffer();g.bindFramebuffer(C,w);var t=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,t);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,M);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,M);g.texImage2D(g.TEXTURE_2D,
0,G,3,3,0,g.RGBA,u,null);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,t,0);if(g.checkFramebufferStatus(g.READ_FRAMEBUFFER||g.FRAMEBUFFER)!==g.FRAMEBUFFER_COMPLETE)return v(),!1;za.Dc(g);g.clearColor(0,0,0,0);g.viewport(0,0,3,3);g.disable(g.DEPTH_TEST);g.clear(g.COLOR_BUFFER_BIT);la.kb(g);g.bindFramebuffer(C,null);za.Ya(g);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,t);la.kb(g);G=new Uint8Array(36);g.readPixels(0,0,3,3,g.RGBA,g.UNSIGNED_BYTE,G);v();for(u=0;36>u;++u)if(3!==
u%4&&3<Math.abs(G[u]-127))return!1;return!0},Tb:function(g){var G={ha:!1,ja:!1};g.disable(g.BLEND);g.clearColor(0,0,0,0);g.clear(g.COLOR_BUFFER_BIT);g.RGBA32F&&B.Jb(g,g.RGBA32F,g.FLOAT)&&(G.ha=!0,H=g.RGBA32F);!G.ha&&B.Jb(g,g.RGBA,g.FLOAT)&&(G.ha=!0,H=g.RGBA);var u=B.bc(g);x=null;g.RGBA16F&&B.Jb(g,g.RGBA16F,u)&&(G.ja=!0,x=g.RGBA16F);!G.ja&&B.Jb(g,g.RGBA,u)&&(G.ja=!0,x=g.RGBA);return G},Fe:function(){var g=ka.instance({width:2});g.ae();var G=Da.instance({width:2,isFloat:!0,Ab:3});g.o();G.o();B.flush();
b.checkFramebufferStatus(ka.Xe())!==b.FRAMEBUFFER_COMPLETE?(Da.Rf(),z.$b=!1):z.$b=!0;g.remove();G.remove()},Ge:function(){var g=!1;B.ka()&&(g="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(G){return"undefined"!==typeof b[G]}));z.Sd=g},Ee:function(){var g=B.Tb(b);Object.assign(z,g);if(!z.ha&&!z.ja)return!1;B.Fe();B.Ge();return!0},Ud:function(g,G,u,v,C){b.readPixels(g,G,u,v,b.RGBA,b.UNSIGNED_BYTE,C);return Promise.resolve(C,
!1)},Gb:function(g,G,u,v,C,M,w){if(!B.ve())return B.Ud(g,G,u,v,C);e.Ra=w||e.Be;f(C);b.readPixels(g,G,u,v,b.RGBA,b.UNSIGNED_BYTE,0);e.Da[e.ga]=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);B.flush();var t=!1;return new Promise(function(p,h){function J(){if(!e.Fa)return d(),k(),q(),h(),!1;var N=(e.ga+1)%e.Ra;switch(b.clientWaitSync(e.Da[N],0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:break;default:return d(),b.deleteSync(e.Da[N]),e.Da[N]=null,b.bindBuffer(e.X,e.ta[N]),b.getBufferSubData(e.X,0,C),k(),
q(),p(C,t),!0}e.Lb=setTimeout(J,0);return!1}d();e.rc+1<e.Ra?(k(),q(),p(C,!1)):(e.Fa=!0,J()||!M||t||(t=!0,M()))})},de:function(){b.viewport(0,0,B.F(),B.W())},flush:function(){b.flush()},m:function(){d();l();Da.m();ka.m();la.m();e.ta.forEach(function(g){b.deleteBuffer(g)});e.ta.splice(0);za.reset();n=!1}};return B}(),P=la,ta=ka,W=Da,Ea=function(){function a(u,v,C,M){e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,M?e.NEAREST_MIPMAP_NEAREST:e.LINEAR);var w=null;if(null!==C)try{w=e.getError();if("FUCKING_BIG_ERROR"===
w)return!1;e.texImage2D(e.TEXTURE_2D,0,u,4,4,0,e.RGBA,v,C);w=e.getError();if(w!==e.NO_ERROR)return!1}catch(t){return!1}M&&e.generateMipmap(e.TEXTURE_2D);e.clear(e.COLOR_BUFFER_BIT);P.kb(e);w=e.getError();if("FUCKING_BIG_ERROR"===w)return!1;e.readPixels(0,0,2,2,e.RGBA,e.UNSIGNED_BYTE,y);w=e.getError();w===e.INVALID_OPERATION&&"undefined"!==typeof e.PIXEL_PACK_BUFFER&&(e.bindBuffer(e.PIXEL_PACK_BUFFER,null),e.readPixels(0,0,2,2,e.RGBA,e.UNSIGNED_BYTE,y),w=e.getError());if(w!==e.NO_ERROR)return!1;C=
!0;for(M=0;16>M;++M)C=C&&4>Math.abs(y[M]-127);C&&(n.Pd=v,n.zd=u);return C}function c(u,v){return A.ha&&a(u,e.FLOAT,new Float32Array(D),v)?(m=q.Uc,!0):!1}function d(u,v,C){if(!A.ja)return!1;var M=Da.Ae(D),w=Z.ib(e);if(w&&w.HALF_FLOAT_OES&&a(u,w.HALF_FLOAT_OES,M,v)||e.HALF_FLOAT&&a(u,e.HALF_FLOAT,M,v))return m=q.Na,!0;M=new Float32Array(D);if(a(u,e.FLOAT,M,v))return m=q.Na,!0;e.bindTexture(e.TEXTURE_2D,C);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,2,2,0,e.RGBA,e.UNSIGNED_BYTE,null);e.bindFramebuffer(n.gb,G);
Da.pd(e,C,2,2,M,!1,!1);e.bindFramebuffer(n.gb,null);e.bindTexture(e.TEXTURE_2D,C);return a(u,null,null,v)?(m=q.Na,!0):!1}function f(u,v,C){r=!0;if(d(u,!0,C)||c(v,!0))return!0;r=!1;return d(u,!1,C)||c(v,!1)?!0:!1}function k(u){if(m===q.R){e=u||b;m=q.RGBA8;r=!0;Z.hd(e);A||(A=Z.Tb(e));ta.reset();G=e.createFramebuffer();n.gb=e.DRAW_FRAMEBUFFER||e.FRAMEBUFFER;e.bindFramebuffer(n.gb,null);e.clearColor(0,0,0,0);e.viewport(0,0,2,2);E.R();B=E.Ya(e);u=e.createTexture();e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,
u);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);g=u;var v=u=e.RGBA,C=e.RGBA16F,M=e.RGBA32F;M&&(u=M);C&&(v=C);if((C||M)&&f(v,u,g))return l(),!0;u=v=e.RGBA;if(f(v,u,g))return l(),!0;m=q.RGBA8;l();return!1}}function l(){e.deleteProgram(B.wa);e.deleteTexture(g);g=B=null}for(var q={R:-1,Uc:3,Na:2,RGBA8:0},m=q.R,n={Pd:null,zd:null,gb:null},r=!0,y=new Uint8Array(16),D=Array(64),
z=0;4>z;++z)for(var I=0;4>I;++I){var x=0===(I+z)%2?1:0,H=4*z+I;D[4*H]=x;D[4*H+1]=x;D[4*H+2]=x;D[4*H+3]=x}var e=null,A=null,B=null,g=null,G=null;return{ue:function(u){k(u);return r},Xc:function(u,v){m===q.R&&(typeof("undefined"!==v)&&(A=v),k(u));return m!==q.RGBA8},zh:function(u){k(u);return m===q.Uc},tf:function(u){k(u);return m===q.Na},hh:function(u){k(u);return n.Pd},We:function(u){k(u);return n.zd},m:function(){e=null;r=!0;m=q.R;A=null}}}(),Nb=function(){return{instance:function(a){var c=null,
d=!1,f=!1,k=null,l=!1,q=!1,m=null,n="undefined"===typeof a.preprocessing?!1:a.preprocessing,r="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,na&&void 0!==na.pe&&(a.mask=na.pe+a.mask),c=W.instance({isFloat:!1,url:a.mask}));var y=!1;a.customInputShader&&(y="s46",E.Wc({name:"_",id:y,h:a.customInputShader,bi:["uSource"],precision:"lowp"}),E.N(y,[{type:"1i",name:"_",value:0}]));switch(n){case "sobel":m="s33";l=!0;break;case "meanNormalization":m="s34";l=!0;break;case "grayScale":m=
"s30";l=!1;break;case "grayScaleTilt":m="s31";q=!0;l=!1;break;case "rgbGrayTilt":m="s32";q=!0;l=!1;break;case "copy":m=y?y:"s0";break;case "inputLightRegulation":m=y?y:"s30";k=cc.instance({yd:r,Od:a.size,Md:a.nBlurPass,Y:!1});f=!0;break;case "inputMix0":m="none";k=dc.instance({u:r,na:a.varianceMin,da:a.blurKernelSizePx,gain:a.gain||1,Y:!1});f=!0;break;case "inputMix1":m="none";k=ec.instance({u:r,na:a.varianceMin,da:a.blurKernelSizePx,gain:a.gain||1,Y:!1});f=!0;break;case "inputCut4":m="none";k=fc.instance({u:r,
na:a.varianceMin,da:a.blurKernelSizePx,gain:a.gain||1,Va:a.isNormalized||!1,yc:a.overlap||0,Y:!1});r*=k.Ye();f=!0;break;case "direct":case "none":m="abort";break;default:m="s4"}r=Math.ceil(r);q&&E.N(m,[{name:"u27",type:"1f",value:a.tilt}]);d&&(m+="Mask");var D=W.instance({isFloat:!1,isPot:!1,width:a.size}),z={F:function(){return a.size},Ze:function(){return r},cc:function(){return z.F()},bf:function(){return f?k.Ua():D},U:function(I){ta.ca();"abort"!==m&&("none"!==m&&(E.set(m),l&&E.G("u28",1/a.size),
D.M(),d&&c.g(1),P.l(!1,!1),D.g(0),I=D),f&&k.process(I))},m:function(){D.remove();d&&c.remove()}};return z}}}(),Ob=function(){return{instance:function(a){function c(v){k.forEach(function(C,M){l[M][0]=v[0][C];l[M][1]=v[1][C];l[M][2]=v[2][C];l[M][3]=v[3][C]});return l}a.normalize=a.normalize||!1;var d={input:null,bias:null,hc:null,Ia:null,xc:null,vc:null,wc:null},f=null,k=[],l=[],q=!1,m=null,n=!0,r=-1,y=a.isReorganize?a.isReorganize:!1,D=a.kernelsCount?!0:!1,z=["s27","s28","s29"][a.shiftRGBAMode||0],
I={isEnabled:!1};a.qf?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.Eb.cc(),n=!1):"full"===a.connectivityUp&&(a.sparsity=a.Eb.cc());var x={elu:"s16",elu01:"s17",relu:"s15",arctan:"s18",arctan2:"s19",sigmoid:"s14",copy:"s0"}[a.activation],H=a.sparsity*a.sparsity,e=!1,A=a.size,B="";if(a.maxPooling){switch(a.maxPooling.size){case 2:B="s35";break;case 4:B="s36"}e=!0;A/=a.maxPooling.size;d.vc=W.instance({isFloat:!0,isPot:!1,width:A})}var g=-1,G=null;n&&(d.Ia=W.instance({isFloat:!0,isPot:!1,
width:a.size}));d.bias=W.instance(a.bias);var u={F:function(){return a.size},cc:function(){return A},rd:function(){return a.classesCount},re:function(v){f.g(v)},Gf:function(){a.remap&&a.remap.isEnabled&&(I={isEnabled:!0,yf:W.instance(a.remap.maskTexture),Xa:a.remap.layers.map(function(v){return a.parent.$e(v)}),depth:a.remap.depth})},Sf:function(){switch(a.connectivityUp){case "direct":G=gc.instance(a.connectivity);break;case "square":G=hc.instance(a.connectivity);break;case "squareFast":G=ic.instance(a.connectivity,
a.activation);break;case "full":G=jc.instance(a.connectivity);break;case "conv":r=a.kernelsCount,G=kc.instance(a.connectivity),y&&(d.xc=W.instance({width:A,isFloat:!0,isFlipY:!1,isPot:!1}))}if(G.La){var v=a.size*a.sparsity;g=Math.log(v/a.size)/Math.log(2);d.input=W.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:v,oc:g});d.hc=W.instance({isFloat:!0,isPot:!0,width:a.size})}},U:function(v,C){f=v;G.La?(d.input.M(),D&&d.bias.g(2),G.U(I),d.input.g(0),d.input.Oe(g),d.hc.M(),D?E.set("s0"):(E.set(z),E.G("u4",
H),d.bias.g(1)),d.input.se(g,0),P.l(!1,!1),E.set(x),d.Ia.o(),d.hc.g(0),P.l(!1,!1)):(d.Ia.M(),d.bias.g(1),G.U());if(n)return C=d.Ia,e&&(d.vc.M(),C.g(0),E.set(B),E.V("u10",1/a.size,1/a.size),P.l(!1,!1),C=d.vc),y&&(d.xc.o(),E.set("s21"),E.V("u14",r,A/r),C.g(0),P.l(!1,!1),C=d.xc),C.g(0),C;var M=d.Ia;a.normalize&&(v=M,E.set("gpuRawAvg"===q?"s9":"s8"),E.G("u6",1/a.size),d.wc.M(),v.g(0),P.l(!1,!1),M=d.wc);v=null;switch(q){case "cpuRGBA2Float":M.dd(!1);C?v=u.Hf(M).then(m):(M=u.If(M),m(M));break;case "cpuMeanFloat":M.dd(!0);
if(C)v=M.Kf().then(m);else{M=M.Lf();for(var w=0;w<M.length;++w);m(M)}break;case "gpuRawAvg":case "gpuRaw":M.g(0);case "none":null!==m&&m(M)}C&&null===v&&(v=Promise.resolve());return v},De:function(v){var C=!1;v&&(q=v.Cb||"none",m=v.Bb||null,C=v.uc?!0:!1);d.Ia=W.instance({isFloat:!0,isPot:!0,isLinear:C,isMipmap:!1,width:a.size});v="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var M=C=0,w=0;C<v;++C)k.push(M+(a.size-1-w)*a.size),l.push([-1,-1,-1,-1]),++M,M===a.size&&
(M=0,++w);a.normalize&&(d.wc=W.instance({isFloat:!0,isPot:!0,width:a.size}))},Hf:function(v){return v.Jf().then(c)},If:function(v){v=v.Td();c(v);return l},m:function(){for(var v in d){var C=d[v];C&&C.remove()}G&&(G.m(),G=null)}};a.Eb&&u.Sf(a.Eb);return u}}}(),gc=function(){return{instance:function(a){var c=W.instance(a.weights);return{La:!0,mb:function(){return 1},m:function(){c.remove()},ef:function(){return c},U:function(){E.set("s26");c.g(1);P.l(!1,!1)}}}}}(),jc=function(){return{instance:function(a){var c=
a.fromLayerSize,d=W.instance(a.weights);return{La:!0,mb:function(){return c},m:function(){d.remove()},U:function(f){if(f.isEnabled){E.set("s24");f.yf.g(3);for(var k=Math.min(f.Xa.length,f.depth),l=0;l<k;++l)f.Xa[l].re(4+l)}else E.set("s23");E.G("u18",a.toLayerSize);E.G("u19",a.fromLayerSize);d.g(1);P.l(!1,!1)}}}}}(),hc=function(){return{instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,f=a.toSparsity,k=f*d,l=k/c,q=c/d,m=0,n=0,r=0,y=Array(f*d*f*d*4),D=Array(f*d*f*d*4),z=Array(c*c),I=0;I<
z.length;++I)z[I]=0;I=Math.floor(f/2);for(var x=.5/d,H=.5/c,e=.5/k,A=0;A<d;++A)for(var B=Math.round(A*q),g=0;g<d;++g){var G=Math.round(g*q),u=A/d,v=g/d;u+=x;v+=x;for(var C=0;C<f;++C){var M=B+C-I;0>M&&(M+=c);M>=c&&(M-=c);for(var w=0;w<f;++w){var t=m/k,p=n/k,h=G+w-I;0>h&&(h+=c);h>=c&&(h-=c);var J=M/c,N=h/c;p=1-p-1/k;J+=H;N+=H;t+=e;p+=e;var O=A*f+C,Y=g*f+w;Y=d*f-Y-1;O=Y*d*f+O;y[4*O]=t;y[4*O+1]=p;y[4*O+2]=J;y[4*O+3]=N;N=z[h*c+M]++;O=N%l;J=M*l+O;h=h*l+(N-O)/l;h=c*l-1-h;h=h*c*l+J;D[4*h]=t;D[4*h+1]=p;D[4*
h+2]=u;D[4*h+3]=v;++m>=k&&(m=0,++n);++r}}}z=null;var pa=W.instance(a.weights);delete a.weights.data;var va=W.instance({width:k,isFloat:!0,array:new Float32Array(D),isPot:!0});D=null;var Fa=W.instance({width:k,isFloat:!0,array:new Float32Array(y),isPot:!0});y=null;return{La:!0,mb:function(){return l},m:function(){va.remove();Fa.remove();pa.remove()},U:function(){E.set("s22");pa.g(1);Fa.g(2);P.l(!1,!1)}}}}}(),kc=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,f=d*a.toLayerSize/
a.fromLayerSize,k=a.inputScale||[1,1],l=W.instance(a.weights);return{La:!0,mb:function(){return f},sh:function(){return d},ef:function(){return l},m:function(){l.remove()},U:function(){E.set("s25");E.Uf("u26",k);E.G("u24",c);E.G("u25",d);E.G("u18",a.toLayerSize);E.G("u19",a.fromLayerSize);l.g(1);P.l(!1,!1)}}}}}(),ic=function(){return{instance:function(a,c){var d=a.fromLayerSize,f=a.toLayerSize,k=a.toSparsity,l=a.stride?a.stride:1,q=k*f/d,m=f<d,n=d/f,r=W.instance(a.weights),y="s47"+[d.toString(),f.toString(),
k.toString(),l.toString(),c].join("_");E.Me(y)||(a=ac.Pe(c,"gl_FragColor","gl_FragColor"),f=[{type:"1f",name:"u18",value:f},{type:"1f",name:"u30",value:l}],m&&f.push({type:"1f",name:"u19",value:d}),d=[(m?q:k).toFixed(1),a],m&&d.push(n.toFixed(1)),E.hf(m?"s41":"s40",y,d),E.N(y,f.concat([{type:"1i",name:"u16",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u15",value:3}])));return{La:!1,mb:function(){return q},m:function(){r.remove()},U:function(){E.set(y);r.g(3);P.l(!1,!1)}}}}}(),cc=function(){return{instance:function(a){var c=
a.Md?a.Md:3,d=a.yd?a.yd:64,f=a.Od?a.Od:64,k=a.Y?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var l=W.instance(a),q=W.instance(a),m=W.instance(a),n=W.instance(a),r=W.instance({isFloat:!0,width:f,isPot:!1,isFlipY:!1}),y=1/d;return{process:function(D){E.set("s37");n.o();P.l(k,!1);E.set("s38");for(var z=0;z<c;++z)l.o(),E.V("u10",y,0),P.l(k,!1),m.o(),n.g(0),P.l(k,!1),q.o(),l.g(0),E.V("u10",0,y),P.l(k,!1),n.o(),m.g(0),P.l(k,!1),z!==c-1&&q.g(0);E.set("s39");r.o();D.g(0);q.g(1);n.g(2);P.l(k,!1);r.g(0)},
Ua:function(){return r}}}}}(),dc=function(){return{instance:function(a){function c(y){return W.instance({isFloat:y,width:d.u,isPot:!1,isFlipY:!1})}var d=Object.assign({na:.1,da:9,u:128,gain:1,Y:!1},a),f=c(!1),k=[c(!1),c(!1),c(!1)],l=[c(!1),c(!1),c(!1)],q=c(!0),m=[f,l[0],l[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.da-1)/2).toFixed(2)).replace("2.2222",(1/d.u).toFixed(6));var n="uniform sampler2D u32,u33,u34,u35;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u32,vv0).rgb;float c=texture2D(u33,vv0).r,d=texture2D(u34,vv0).r,i=texture2D(u35,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.na.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),r={u1:0};E.$a([{id:"s49",
name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:r,i:["u1"],precision:"lowp"},{id:"s50",name:"_",h:a,j:r,i:["u1","u31"],precision:"lowp"},{id:"s51",name:"_",h:n,j:{u32:0,u33:1,u34:2,u35:3},i:["u32","u33","u34","u35"],precision:"highp"}]);return{process:function(){E.set("s49");f.M();P.l(d.Y,!1);E.set("s50");for(var y=0;3>y;++y)E.V("u31",1,0),k[y].o(),m[y].g(0),
P.l(!1,!1),E.V("u31",0,1),l[y].o(),k[y].g(0),P.l(!1,!1);E.set("s51");q.o();f.g(0);l[0].g(1);l[1].g(2);l[2].g(3);P.l(!1,!1);q.g(0)},Ua:function(){return q}}}}}(),ec=function(){return{instance:function(a){function c(r){return W.instance({isFloat:r,width:d.u,isPot:!1,isFlipY:!1})}var d=Object.assign({na:.1,da:9,u:128,gain:1,Y:!1},a),f=c(!1),k=c(!1),l=c(!1),q=c(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.da-1)/2).toFixed(2)).replace("2.2222",(1/d.u).toFixed(6));var m="uniform sampler2D u0,u36;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u36,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.na.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),n={u1:0};E.$a([{id:"s52",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
j:n,i:["u1"],precision:"lowp"},{id:"s53",name:"_",h:a,j:n,i:["u1","u31"],precision:"lowp"},{id:"s54",name:"_",h:m,j:{u0:0,u36:1},i:["u0","u36"],precision:"highp"}]);return{process:function(){E.set("s52");f.M();P.l(d.Y,!1);E.set("s53");E.V("u31",1,0);k.o();f.g(0);P.l(!1,!1);E.V("u31",0,1);l.o();k.g(0);P.l(!1,!1);E.set("s54");q.o();f.g(0);l.g(1);P.l(!1,!1);q.g(0)},Ua:function(){return q}}}}}(),fc=function(){return{instance:function(a){function c(y){return W.instance({isFloat:y,width:d.u,isPot:!1,isFlipY:!1})}
var d=Object.assign({na:.1,da:9,u:128,gain:1,yc:0,Va:!1,Y:!1},a),f=c(!1),k=null,l=null,q=null;d.Va&&(k=c(!1),l=c(!1),q=c(!0));a={u1:0};var m=[{id:"s55",name:"_",h:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",
d.yc.toFixed(4)),j:a,i:["u1"],precision:"lowp"}];if(d.Va){var n="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.da-1)/2).toFixed(2)).replace("2.2222",(1/d.u).toFixed(6)),r="uniform sampler2D u0,u36;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u36,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.na.toFixed(4)).replace("2.2222",d.gain.toFixed(4));m.push({id:"s56",name:"_",h:n,j:a,i:["u1","u31"],precision:"lowp"},{id:"s57",name:"_",h:r,j:{u0:0,u36:1},i:["u0","u36"],precision:"highp"})}E.$a(m);return{process:function(){E.set("s55");f.M();P.l(d.Y,!1);d.Va?(E.set("s56"),E.V("u31",1,0),k.o(),f.g(0),P.l(!1,!1),E.V("u31",0,1),l.o(),k.g(0),P.l(!1,!1),E.set("s57"),q.o(),f.g(0),l.g(1),P.l(!1,!1),q.g(0)):f.g(0)},Ye:function(){return 2-d.yc},Ua:function(){return d.Va?q:f}}}}}(),U={wd:function(){return U.bd()?
document.createElement("video"):!1},Ta:function(a,c){a[c]=!0;a.setAttribute(c,"true")},ye:function(){var a=!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a},Zc:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},Qe:function(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]},Id:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},xe:function(){return U.$c()||U.Zc()},$c:function(){var a=navigator.userAgent.toLowerCase();
return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},Ug:function(){return U.ye()?U.Id()?window.innerHeight/window.innerWidth*45:45:45},bd:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},Qh:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},ad:function(a){if(!a)return a;var c=null;if(a.video){var d=function(f){return f&&"object"===typeof f?Object.assign({},f):f};c={};
"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&U.Vc(c,a.deviceId);return c},Vc:function(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)},fe:function(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a},
Ce:function(a){function c(z){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(I,x){return Math.abs(I-z)-Math.abs(x-z)})}function d(z){var I=U.ad(a);z=z(I);k.push(z);f(z)}function f(z){if(z.video&&z.video.facingMode&&z.video.facingMode.exact){var I=z.video.facingMode.exact;z=U.ad(z);delete z.video.facingMode.exact;z.video.facingMode.ideal=I;k.push(z)}}var k=[];if(!a||!a.video)return k;f(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var l=
c(a.video.width.ideal).slice(0,3),q=c(a.video.height.ideal).slice(0,3),m={},n=0;for(m.pa=void 0;n<l.length;m={pa:m.pa},++n){m.pa=l[n];var r={},y=0;for(r.oa=void 0;y<q.length;r={oa:r.oa},++y)if(r.oa=q[y],m.pa!==a.video.width.ideal||r.oa!==a.video.height.ideal){var D=Math.max(m.pa,r.oa)/Math.min(m.pa,r.oa);D<4/3-.1||D>16/9+.1||d(function(z,I){return function(x){x.video.width.ideal=z.pa;x.video.height.ideal=I.oa;return x}}(m,r))}}}d(function(z){return U.fe(z)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&d(function(z){delete z.video.width.ideal;delete z.video.height.ideal;return z}),d(function(z){delete z.video.width;delete z.video.height;return z}));a.video.facingMode&&(d(function(z){delete z.video.facingMode;return z}),a.video.width&&a.video.height&&d(function(z){U.fe(z);delete z.video.facingMode;return z}));k.push({audio:a.audio,video:!0});return k},cg:function(a){if(U.Id()){if(!a||!a.video)return!1;var c=a.video.width,d=a.video.height;if(!c||!d)return!1;if(c.ideal&&d.ideal&&
c.ideal>d.ideal)return a.video.height=c,a.video.width=d,!0}return!1},zb:function(a){a.volume=0;U.Ta(a,"muted");if(U.$c()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;U.Ta(a,"muted")},5)}},ie:function(a,c,d){return null===a?Promise.resolve():new Promise(function(f,k){if(a.srcObject&&a.srcObject.getVideoTracks){var l=
a.srcObject.getVideoTracks();1!==l.length?k("INVALID_TRACKNUMBER"):(l=l[0],c?U.get(a,f,k,d):(l.stop(),f()))}else k("BAD_IMPLEMENTATION")})},vd:function(a,c,d,f){function k(q){l||(l=!0,d(q))}var l=!1;return navigator.mediaDevices.getUserMedia(f).then(function(q){function m(){setTimeout(function(){if(a.currentTime){var r=a.videoHeight;if(0===a.videoWidth||0===r)k("VIDEO_NULLSIZE");else{var y={we:null,Zf:null,zf:null};try{var D=q.getVideoTracks()[0];D&&(y.zf=D,y.we=D.getCapabilities(),y.Zf=D.getSettings())}catch(z){}U.xe()?
a.parentNode&&null!==a.parentNode?(l||c(a,q,y),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),U.zb(a),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";U.zb(a);setTimeout(function(){a.play();l||c(a,q,y)},100)},80)):l||c(a,q,y)}}else k("VIDEO_NOTSTARTED")},700)}function n(){a.removeEventListener("loadeddata",n,!1);var r=a.play();U.zb(a);"undefined"===typeof r?m():r.then(function(){m()}).catch(function(){k("VIDEO_PLAYPROMISEREJECTED")})}
"undefined"!==typeof a.srcObject?a.srcObject=q:(a.src=window.URL.createObjectURL(q),a.videoStream=q);U.zb(a);a.addEventListener("loadeddata",n,!1)}).catch(function(q){k(q)})},cf:function(a,c){var d=c||U.wd();return new Promise(function(f,k){U.get(d,f,k,a)})},get:function(a,c,d,f){if(!a)return d&&d("VIDEO_NOTPROVIDED"),!1;if(!U.bd())return d&&d("MEDIASTREAMAPI_NOTFOUND"),!1;if(f&&f.video&&U.Zc()){var k=U.Qe();0!==k[0]&&(12>k[0]||12===k[0]&&2>k[1])&&U.cg(f)}U.Ta(a,"autoplay");U.Ta(a,"playsinline");
f&&f.audio?a.volume=0:U.Ta(a,"muted");U.vd(a,c,function(){function l(m){if(0===m.length)d("INVALID_FALLBACKCONSTRAINTS");else{var n=m.shift();U.vd(a,c,function(){l(m)},n)}}var q=U.Ce(f);l(q)},f)},df:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&c.length&&0<c.length?a(c,
!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},tg:function(a,c,d){var f={};f[c]=d;c=[];c.push(f);a.applyConstraints({advanced:c}).catch(function(){})}},ra=function(){function a(H,e,A,B,g,G,u){if(!I)if(u===G.length)g();else{switch(G[u]){case "A":A();break;case "D":H();break;case "S":e().then(function(v,C){x.Kb();a(H,e,A,C?null:B,g,G,++u)}).catch(function(v){console.log("An error occurred in the WebAR loop: ",v);g()});return;case "R":B&&B()}a(H,e,A,B,g,G,++u)}}var c={n:5,qc:1,
Kd:0,lb:[35,49],hb:[2,200],k:.7,hg:200,Ff:.05},d=-1,f=null,k=-1,l=-1,q=0,m=-1,n=-1,r=0,y=0,D=c.hb[1],z=Math.log(2),I=!0,x={af:function(){switch(d){case -1:return-1;case 0:return n+f.Kd;case 1:return r}},$g:function(H){return Math.pow(Math.min(Math.max(m,0),f.n-1)/(f.n-1),H||1)},v:function(H){f=Object.assign({},c,H);m=n=f.qc;d=0;x.reset()},Kb:function(H){H=("undefined"===typeof H?Date.now():H)||0;var e=Math.min(Math.max(H-y,f.hb[0]),f.hb[1]);D=e;y=H;var A=-1===k?0:f.k;k=Math.min(Math.max(1E3/e,5),
120)*(1-A)+k*A;H-l>f.hg&&5<++q&&(e=f.k,m=m*(1-e)+(k<f.lb[0]?n-1:k>f.lb[1]?n+1:n)*e,Math.abs(m-n)>1-f.Ff&&(e=Math.min(Math.max(Math.round(m),0),f.n-1),e!==n&&(m=n=e,k=(f.lb[1]-f.lb[0])/2)),l=H)},zc:function(H,e,A,B,g,G){I=!1;a(H,e,A,B,g,G,0)},stop:function(){I=!0},Bc:function(H){r=H;d=1},Lc:function(){d=0;x.reset()},reset:function(){D=c.hb[1];l=k=-1;q=0},ai:function(H,e,A){A=Math.exp(-z*D/A);return(1-A)*H+A*e},Te:function(){return D}};return x}(),Ia=function(){function a(){d(H+I.pc);e.port.postMessage("DONE")}
function c(){G.bb=0===I.ab?B(d):B(f)}function d(w){g.Ga&&null!==x&&(w-=H,w=Math.min(Math.max(w,I.ed[0]),I.ed[1]),H+=w,l(),u.isEnabled&&u.Wa&&g.Z&&H-u.lc>I.Pc&&(r(),u.lc=H),x(H))}function f(w){g.Ga&&(G.timeout=setTimeout(d.bind(null,w),I.ab))}function k(){x=null;g.Ga=!1;l()}function l(){G.bb&&(window.cancelAnimationFrame(G.bb),G.bb=null);G.timeout&&(window.clearTimeout(G.timeout),G.timeout=null)}function q(w){w&&!g.Z?(g.Z=!0,A&&ra.Lc(),e.port.postMessage("STOP"),Z.he(!0),c()):!w&&g.Z&&(g.Z=!1,A&&ra.Bc(1),
Z.he(!1),e.port.postMessage("START"))}function m(w){w.target.hidden?C():v()}function n(w,t,p){t=w.createShader(t);w.shaderSource(t,p);w.compileShader(t);return t}function r(){u.Wa=!1;var w=u.ia,t=u.rb,p=u.sb,h=u.X;w.uniform1f(u.xd,Math.random());u.Ha?t.beginQueryEXT(h,p):w.beginQuery(h,p);w.drawElements(w.POINTS,1,w.UNSIGNED_SHORT,0);u.Ha?t.endQueryEXT(h):w.endQuery(h);Z.flush();D().then(function(J){0===J||isNaN(J)?(u.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",
J)):(J=I.ke*I.Oc*1E3/J,u.Nb=(u.Nb+1)%I.Ma,u.mc[u.Nb]=J,++u.Jd>I.Ma&&(u.xb.set(u.mc),u.xb.sort(function(N,O){return N-O}),J=u.xb[Math.floor(I.Ma/2)],u.jb=Math.max(u.jb,J),I.Nc(J/u.jb)),u.Wa=!0)}).catch(function(){u.Wa=!0})}function y(w){var t=u.ia,p=u.rb,h=u.sb;h=u.Ha?p.Xg(h,p.QUERY_RESULT_AVAILABLE_EXT):t.getQueryParameter(h,t.QUERY_RESULT_AVAILABLE);t=t.getParameter(p.GPU_DISJOINT_EXT);h?w(!t):setTimeout(y.bind(null,w),.1)}function D(){return new Promise(function(w,t){y(function(p){if(p){p=u.ia;
var h=u.rb,J=u.sb;p=u.Ha?h.getQueryObjectEXT(J,h.QUERY_RESULT_EXT):p.getQueryParameter(J,p.QUERY_RESULT);w(p)}else t()})})}var z={Ed:!0,ed:[1,200],pc:20,ab:0,Oc:50,ke:240,Pc:3E3,Ma:3,Nc:null},I=null,x=null,H=0,e=null,A=!1,B=null,g={ua:!1,Z:!0,kc:!1,jc:!1,ic:!1,Ga:!1},G={bb:null,timeout:null},u={isEnabled:!1,Wa:!1,ia:null,rb:null,sb:null,X:null,xd:null,Ha:!0,lc:0,Jd:0,mc:null,xb:null,Nb:0,jb:0},v=q.bind(null,!0),C=q.bind(null,!1),M={v:function(w){I=Object.assign(z,w);Object.assign(g,{Z:!0,ua:!0,Ga:!1});
B=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==I.Nc){w=document.createElement("canvas");w.setAttribute("width","1");w.setAttribute("height","1");var t={antialias:!1};w=w.getContext("webgl2",t)||w.getContext("webgl",t);if(t=w.getExtension("EXT_disjoint_timer_query")||w.getExtension("EXT_disjoint_timer_query_webgl2")){u.ia=w;u.rb=t;u.isEnabled=!0;u.Ha=t.beginQueryEXT?!0:!1;var p=n(w,w.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),h=n(w,w.FRAGMENT_SHADER,
"precision lowp float;uniform float u37;void main(){vec4 a=u37*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",I.Oc.toString())),J=w.createProgram();w.attachShader(J,p);w.attachShader(J,h);w.linkProgram(J);p=w.getAttribLocation(J,"a0");u.xd=w.getUniformLocation(J,"u37");w.useProgram(J);w.enableVertexAttribArray(p);J=w.createBuffer();w.bindBuffer(w.ARRAY_BUFFER,J);w.bufferData(w.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),w.STATIC_DRAW);w.vertexAttribPointer(p,4,w.FLOAT,
!1,16,0);J=w.createBuffer();w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,J);w.bufferData(w.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),w.STATIC_DRAW);w.disable(w.DEPTH_TEST);w.disable(w.DITHER);w.disable(w.STENCIL_TEST);w.viewport(0,0,1,1);J=u.Ha?t.createQueryEXT():w.createQuery();u.sb=J;u.X=t.TIME_ELAPSED_EXT||w.TIME_ELAPSED;u.lc=-I.Pc;u.mc=new Float32Array(I.Ma);u.xb=new Float32Array(I.Ma);u.jb=0;u.Nb=0;u.Jd=0;u.Wa=!0}}if(I.Ed){w=!1;try{if("undefined"===typeof SharedWorker){var N=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
I.pc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),O=new Worker(N);O.addEventListener("message",a);e={Rd:O,port:O};g.kc=!0}else{var Y=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
I.pc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),pa=new SharedWorker(Y);pa.port.start();pa.port.addEventListener("message",a);e={Rd:pa,port:pa.port};g.jc=!0}w=!0}catch(va){}w&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",m):(window.addEventListener("blur",C),window.addEventListener("focus",v)),window.addEventListener("pagehide",
C),window.addEventListener("pageshow",v),g.ic=!0)}A="undefined"!==typeof ra},m:function(){k();g.ic&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",m):(window.removeEventListener("blur",C),window.removeEventListener("focus",v)),window.removeEventListener("pagehide",C),window.removeEventListener("pageshow",v),g.ic=!1);g.jc?(e.port.close(),g.jc=!1):g.kc&&(e.Rd.terminate(),g.kc=!1);Object.assign(g,{Z:!0,ua:!1,Ga:!1});x=null},wf:function(){return g.Z},update:function(w){Object.assign(I,
w)},zc:function(w){g.ua||M.v({});l();g.Ga=!0;x=w;g.Z&&c()},stop:k};return M}(),Ta=function(){function a(D,z){var I=D[0]-.5;D=D[1]-.5;var x=z[0]-.5;z=z[1]-.5;return I*I+D*D-(x*x+z*z)}var c={Nd:4,Db:[1.5,1.5,2],P:[.1,.1,.1],Xd:1,u:-1,L:-1,bg:2,Ef:1,Ac:!0,Je:.8},d=null,f=[],k=[],l=[],q=[0],m=[.5,.5,1],n=null,r=0,y=[0,0,0];return{v:function(D){d=Object.assign({},c,D);f.splice(0);k.splice(0);l.splice(0);r=0;D=d.Db[0]*d.P[0];var z=d.Db[1]*d.P[1],I=1/(1+d.Db[2]*d.P[2]),x=d.Xd*Math.min(d.u,d.L),H=x/d.u;x/=
d.L;var e=.5*d.Je;e*=e;for(var A=0;A<d.Nd;++A){var B=[];k.push(B);var g=Math.pow(I,A),G=H*g,u=x*g;g=G*d.Ef;l.push(g);var v=G*D,C=u*z;G/=2;u/=2;for(var M=1+(1-G-G)/v,w=1+(1-u-u)/C,t=0;t<w;++t)for(var p=u+t*C,h=p-.5,J=0;J<M;++J){var N=G+J*v,O=N-.5;O*O+h*h>e||(N=[N,p,g],f.push(N),B.push(N))}d.Ac&&B.sort(a);n=f}d.Ac&&f.sort(a)},get:function(D){var z=n.length;if(0===z)return m;for(;D>=q.length;)q.push(0);q[D]>=z&&(q[D]=0);var I=n[Math.floor(q[D])%z];q[D]=(q[D]+1/d.bg)%z;if(0===r)return I;y[0]=I[0];y[1]=
I[1];y[2]=r;return y},Kh:function(D){D>=q.length||(q[D]=Math.floor(Math.random()*n.length))},Cc:function(D){r=D;if(0===r)n=f;else{for(var z=l.length,I=z-1,x=0;x<z;++x)if(l[x]<=D){I=x;break}n=k[I]}},reset:function(){for(var D=f.length/q.length,z=0;z<q.length;++z)q[z]=Math.floor(z*D);r=0;n=f}}}(),da=function(){function a(e,A,B,g){return Math.max(0,B>e?e+A/2-(B-g/2):B+g/2-(e-A/2))}function c(e){return!m.Bd(e)}function d(e,A,B){for(var g=e.length;x.length<g;)x.push({la:[0,0],yb:[0,0],fa:[0,0],xa:0,scale:0,
Sa:0,Za:0});g=e.length;for(var G=0;G<g;++G){var u=e[G],v=x[G],C=A[G].rz,M=Math.cos(C),w=Math.sin(C);v.xa=C;v.Sa=M;v.Za=w;v.fa[0]=u.x;v.fa[1]=u.y/B;v.scale=u.$;v.la[0]=u.$*m.fd[0];v.la[1]=u.$*m.fd[1];v.yb[0]=v.la[0]*v.la[0];v.yb[1]=v.la[1]*v.la[1]}}function f(e,A,B){var g=Math.abs(-e.Za*(B-e.fa[1])-e.Sa*(A-e.fa[0]));A=Math.abs(e.Sa*(B-e.fa[1])-e.Za*(A-e.fa[0]));return 1>=g*g/e.yb[0]+A*A/e.yb[1]}function k(e,A,B,g){var G=e[B];d(e,A,g);var u=x[B];return e.some(function(v,C){if(!(v=C===B||G.va>v.va||
3>v.va||!(0<a(G.x,G.$*I,v.x,v.$*I))||!(0<a(G.y,G.$*g*I,v.y,v.$*g*I)))){v=x[C];u.scale>v.scale?C=u:(C=v,v=u);for(var M=0,w=0,t=m.Ke,p=0;p<t;++p)for(var h=((p+.5)/t*2-1)*v.la[1],J=0;J<t;++J){var N=((J+.5)/t*2-1)*v.la[0],O=v.fa[0]+(-h*v.Za+N*v.Sa);N=v.fa[1]+(h*v.Sa+N*v.Za);f(v,O,N)&&(++M,f(C,O,N)&&++w)}v=w/M<m.Ld}return v?!1:!0})}function l(e){return e.isDetected}var q={O:1,Ld:.3,fd:[1,1],Ke:6,Zd:.3,Bd:null,rf:!0},m=null,n=0,r=null,y=!1,D=0,z=0,I=Math.sqrt(2),x=[],H={v:function(e){m=Object.assign({},
q,e);r=[0]},Hd:function(){return 1!==m.O},sd:function(){return n},uf:function(){return y},sa:function(){return m.O},qh:function(){return r},vf:function(e){return r.includes(e)},update:function(e,A){var B=r;if(B.length>e)B.splice(0,B.length-e);else for(;B.length<e;)B.push(0);if(1!==m.O)if(A.every(c)){A=D;for(var g=0;g<e;++g)B[g]=A,A=(A+1)%m.O;D=A}else{g=Math.round(m.Zd*e);g=Math.max(1,g);for(var G=D,u=0,v=0;u<e;++u){if(c(A[G])&&++v>g){do++G===m.O&&(G=0);while(c(A[G]))}B[u]=G;G=(G+1)%m.O}D=G}},Kb:function(e){n=
r[e];z=(.5+n)/m.O;y=r.lastIndexOf(n)===e;return n},$f:function(e,A,B){return 1===m.O?!1:k(e,A,n,B)},ge:function(e){m.rf&&1===m.O||E.G(e,z)},Ne:function(e){return e.find(l)},Vg:function(e){return e.findIndex(l)},Tg:function(e){var A=H.Ne(e);if(!A||e.every(l))return Ta.Cc(0),!1;Ta.Cc(A.s);return!0},Ie:function(e){for(var A=new Float32Array(e.length*m.O),B=0,g;B<m.O;++B)for(g=0;g<e.length;++g)A[B*e.length+g]=e[g];return A},Zb:function(e){for(var A=[],B=0;B<m.O;++B){var g=A,G=g.push,u=void 0,v=e,C={};
for(u in v){var M=u;var w=v[u];var t=typeof w;w=["string","boolean","number"].includes(t)?w:"object"!==t?null:ArrayBuffer.isView(w)?w.slice():JSON.parse(JSON.stringify(w));C[M]=w}G.call(g,C)}return A}};return H}(),na={ba:0,Nf:{threshold:.7,nScaleLevels:2,scale0Factor:.8,nDetectsPerLoopRange:[1,4],overlapFactors:[2,2,3],scanCenterFirst:!0,nDetectsPerLoop:-1,multiDetectionThresholdFactors:[.5,.6],translationScalingFactors:[.2,.2,.5],isCleanGLStateAtEachIteration:!0,enableAsyncReadPixels:!1,animateProcessOrder:"DSAR"},
eg:50,Bf:.4,Af:8,Cf:.3,ag:{translationFactorRange:[.002,.005],rotationFactorRange:[.015,.1],qualityFactorRange:[.8,.95],alphaRange:[.03,1],followZRotAlphaFactor:.01,minDisplacementPx:1},me:.2,oe:2,Df:8,jg:20},qa={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1920,minHeight:480,maxHeight:1920,rotate:0,flipX:!1},ha={sc:-3,xf:-1,error:-2,ready:1,play:2,pause:3},ma=ha.sc,L=null,lc={ub:!1,Fc:null,element:null,H:null,D:[0,0],A:[.5,0,0,.5],Fb:0,Qa:null,tb:!1},Q=null,mc={outputScaleFactor:2,
Pa:null,Pb:null,antialias:!0,Tc:"./",Sc:null,Rc:"./",Qc:null,ea:null,ba:na.ba,Qd:na.ba,vb:!1,Ca:!0},aa=null,sa=null,La=1,lb={Ub:-1},X=null,nc={u:0,L:0,D:[0,0],S:null},ca={ya:null,buffer:null,P:null,Wd:null,Yd:1},ua={S:null,Ja:null},oa={track:null,depth:null},Sa=null,ya=null,ib=[],kb=[],tb={VERSION:"1.0.3",init:function(a){function c(){ma!==ha.error&&2===++f&&(Oa(),Eb(),Na(),Q.Pa&&(ma=ha.ready,Q.Pa(!1,{GL:b,canvasElement:Q.ea,videoTexture:L.H.get(),videoTransformMat2:L.A,maxFacesDetected:da.sa(),videoElement:L.element}),
hb()),gb())}if(ma!==ha.sc)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;ma=ha.xf;L=Object.assign({},lc);Q=Object.assign({},mc);X=Object.assign({},nc);"undefined"!==typeof a.antialias&&(Q.antialias=a.antialias);a.callbackReady&&(Q.Pa=a.callbackReady);a.callbackTrack&&(Q.Pb=a.callbackTrack);"undefined"!==typeof a.animateDelay&&(Q.ba=a.animateDelay);"undefined"!==typeof a.NNTrackPath&&(Q.Tc=a.NNTrackPath);"undefined"!==typeof a.NNTrack&&(Q.Sc=a.NNTrack);"undefined"!==typeof a.NNDepthPath&&
(Q.Rc=a.NNDepthPath);"undefined"!==typeof a.NNDepth&&(Q.Qc=a.NNDepth);"undefined"!==typeof a.followZRot&&(Q.Ca=a.followZRot?!0:!1);if(!a.canvasId&&!a.canvas)return Ma("NO_CANVASID"),!1;Q.ea=a.canvas?a.canvas:document.getElementById(a.canvasId);if(!Q.ea)return Ma("INVALID_CANVASID"),!1;X.u=Q.ea.width;X.L=Q.ea.height;if(!X.u||!X.L)return Ma("INVALID_CANVASDIMENSIONS"),!1;aa=Object.create(na.Nf);a.scanSettings&&Object.assign(aa,a.scanSettings);var d=1;"undefined"!==typeof a.maxFacesDetected&&(d=Math.max(1,
a.maxFacesDetected));if(d>na.Af)return Ma("MAXFACES_TOOHIGH"),!1;da.v({O:d,Ld:na.Bf,Zd:na.Cf,Bd:Bb});for(d=0;d<da.sa();++d)ib.push(new Float32Array(na.Df)),kb.push(0);Ia.v({Ed:a.isKeepRunningOnWinFocusLost||!1,ab:Q.ba});ra.v({qc:0,n:aa.nDetectsPerLoopRange[1]-aa.nDetectsPerLoopRange[0]+1,Kd:aa.nDetectsPerLoopRange[0]});-1!==aa.nDetectsPerLoop?ra.Bc(aa.nDetectsPerLoop):ra.Lc();ca.P=aa.translationScalingFactors.slice(0);sa=Object.create(na.ag);a.stabilizationSettings&&Object.assign(sa,a.stabilizationSettings);
var f=0;a.videoSettings&&a.videoSettings.videoElement?ab(a.videoSettings.videoElement,c):(a.videoSettings&&Object.assign(qa,a.videoSettings),Gb(a.onWebcamAsk,a.onWebcamGet,function(k){ab(k,c)}));Promise.all([Db(Q.Sc,Q.Tc,Vb),Db(Q.Qc,Q.Rc,Wb)]).then(function(k){if(!Xb())return!1;var l=k[1];oa.track=new ub({Xa:k[0].layers,Cb:"gpuRawAvg",Bb:Yb});oa.depth=new ub({Xa:l.layers,Cb:"gpuRawAvg",uc:!0,Bb:Zb});E.$a([{id:"s59",name:"_",za:"attribute vec2 a0;uniform mat2 u38;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u38*a0;}",
Aa:["a0"],qa:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u38"],precision:"lowp"},{id:"s60",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",za:"attribute vec2 a0;uniform sampler2D u39;uniform mat2 u38;uniform vec2 u40;uniform float u41,u42;varying vec2 vv0;void main(){vec4 a=texture2D(u39,vec2(.25,u41));vec2 d=a.gb,f=a.a*u40;float b=cos(u42),c=sin(u42);vec2 g=mat2(b,c,-c,b)*a0,h=d+g*.5*f,i=h-.5;vv0=vec2(.5,.5)+2.*u38*i,gl_Position=vec4(a0,0.,1.);}",
Aa:["a0"],qa:[2],i:"u1 u39 u40 u41 u42 u38".split(" "),precision:"lowp"},{id:"s61",name:"_",h:"uniform sampler2D u43,u39;uniform vec3 u44,u45;uniform float u46,u47,u41,u48,u42,u49;const vec4 e=vec4(.25);void main(){vec4 d=texture2D(u43,vec2(.625,.625)),a=texture2D(u39,vec2(.25,u41));float f=dot(d,e);bool g=f>u47;a.r<-.5?a.r+=1.:g?a.r=2.:a.r>u46?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r=mix(-2.,a.r,u48);if(a.r<.9)a=vec4(1.,u44);else{a.r*=step(1.9,a.r);float h=dot(e,texture2D(u43,vec2(.875,.875))),i=dot(e,texture2D(u43,vec2(.125,.625))),j=dot(e,texture2D(u43,vec2(.375,.625))),b=cos(u42),c=sin(u42);vec2 k=mat2(b,c*u49,-c/u49,b)*vec2(h,i);a.gba+=vec3(k,j)*u45*a.a;}gl_FragColor=a;}",
za:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",i:"u43 u39 u44 u46 u45 u48 u42 u49 u47 u41".split(" ")},{id:"s62",name:"_",za:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u43;uniform float u48;const vec4 e=vec4(.25);void main(){float a=dot(e,texture2D(u43,vec2(.125,.875))),b=dot(e,texture2D(u43,vec2(.375,.875))),c=dot(e,texture2D(u43,vec2(.625,.875))),d=dot(e,texture2D(u43,vec2(.625,.625)));vec3 f=vec3(a,b,c);gl_FragColor=vec4(f,d*u48);}",i:["u43",
"u48"]},{id:"s58",name:"_",h:"uniform sampler2D u39;uniform vec2 u50;uniform float u51;varying vec2 vv0;void main(){float f=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.5,vv0.x);vec4 a=texture2D(u39,vv0+u50);a.a=mix(a.a*u51,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",i:["u39","u51","u50"]},{id:"s63",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",za:"attribute vec2 a0;uniform mat2 u38;uniform vec3 u52;uniform vec2 u40;uniform float u42;varying vec2 vv0;void main(){vec2 c=u52.xy*.5+vec2(.5),d=u52.z*u40;float a=cos(u42),b=sin(u42);vec2 f=mat2(a,b,-b,a)*a0,g=c+f*.5*d,h=g-.5;vv0=vec2(.5,.5)+2.*u38*h,gl_Position=vec4(a0,0.,1.);}",
Aa:["a0"],qa:[2],i:["u1","u52","u40","u42","u38"],precision:"lowp"},{id:"s64",name:"_",h:"uniform sampler2D u53,u54;varying vec2 vv0;void main(){vec3 a=texture2D(u53,vv0).rgb;float b=dot(texture2D(u54,vv0),vec4(.25));gl_FragColor=vec4(a,b*.5+.5);}",Aa:["a0"],qa:[2],i:["u53","u54"],precision:"lowp"}]);Cb();k=da.sa();if(1!==k)throw Error("Multi detection is not implemented for depth retrieval");ca.buffer=new Uint8Array(16*k);Sa=da.Zb({fb:0,x:0,y:0,$:1,rx:0,ry:0,xa:0,va:0});k=oa.depth.ud()*Q.outputScaleFactor;
ya=da.Zb({detected:0,isDetected:!1,x:0,y:0,s:1,xRaw:0,yRaw:0,sRaw:1,rx:0,ry:0,rz:0,RGBDBuf:new Uint8Array(k*k*4),RGBDRes:k});da.Zb({dx:0,dy:0,Yb:0,Vb:0,Wb:0,Xb:0});nb();mb();c()});return!0},destroy:function(){Ia.m();return new Promise(function(a){tb.toggle_pause(!0,!0).finally(function(){oa.track&&oa.track.m();oa.depth&&oa.depth.m();Ka.m();ya=Sa=null;oa.track=null;oa.depth=null;ib.splice(0);kb.splice(0);X.S=null;ca.ya=null;L.H=null;ma=ha.sc;ua.S=null;ua.Ja=null;a()}).catch(function(){})})},toggle_videoStream:function(a){return L.tb||
!L.element?Promise.resolve():U.ie(L.element,a,L.Qa)},toggle_pause:function(a,c){if(!Za())return Promise.reject("NOT_READY");c=c?tb.toggle_videoStream(!a):Promise.resolve();a?yb():c.then(function(){gb()});return c},update_videoSettings:function(a){yb();return new Promise(function(c,d){U.ie(L.element,!1,L.Qa).then(function(){Object.assign(qa,a);Gb(null,null,function(f){ab(f,function(){Oa();Na();gb();c()})})}).catch(d)})},toggle_slow:function(a){Za()&&ma===ha.play&&(a&&!Q.vb?(Q.Qd=Q.ba,aa.nDetectsPerLoop=
1,this.set_animateDelay(na.lg),Q.vb=!0):!a&&Q.vb&&(aa.nDetectsPerLoop=-1,this.set_animateDelay(Q.Qd),Q.vb=!1))},set_animateDelay:function(a){Q.ba=a;Ia.update({ab:Q.ba})},resize:function(){if(!Za())return!1;var a=Q.ea.width,c=Q.ea.height;if(!ob()&&a===X.u&&c===X.L)return!1;X.u=a;X.L=c;E.R();nb();mb();Oa();Na();return!0},set_inputTexture:function(a,c,d){L.D[0]=c;L.D[1]=d;L.H=W.instance({width:c,height:d,dc:a});L.ub=!0;Oa();hb();Na()},reset_GLState:function(){hb();X.S.remove();ca.ya.remove();ua.S.remove();
ua.Ja.remove();Cb()},render_video:function(){ta.K();E.set("s59");b.viewport(0,0,X.u,X.L);L.H.g(0);P.l(!0,!0)},reset_inputTexture:function(){L.ub=!1;L.H=L.Fc;ob();Oa();Na()},get_videoDevices:function(a){return U.df(a)},is_winFocus:function(){return Ia.wf()},set_scanSettings:function(a){Object.assign(aa,a);-1!==aa.nDetectsPerLoop?ra.Bc(aa.nDetectsPerLoop):ra.Lc();nb();mb()},set_stabilizationSettings:function(a){Object.assign(sa,a)},set_videoOrientation:function(a,c){Za()&&(qa.flipX=c,qa.rotate=a,Oa(),
Na())},update_videoElement:function(a,c){ab(a?a:L.element,function(){Eb();Oa();Na();c&&c()})},create_new:function(){return window.WEBARROCKSFACEDEPTHGEN()}};return tb};window.WEBARROCKSFACEDEPTH=window.WEBARROCKSFACEDEPTHGEN();
;return WEBARROCKSFACEDEPTH||window.WEBARROCKSFACEDEPTH;})();