 /**
 * WebAR.rocks.faceDepth - https://github.com/WebAR-rocks/WebAR.rocks.faceDepth
 *
 * Copyright 2022 WebAR.rocks ( https://webar.rocks )
 *
 * 
*/

var WEBARROCKSFACEDEPTH=(function(){window.WEBARROCKSFACEDEPTHGEN=function(){function vb(a){var c=null,d=null,e=null,k=0,p=this,q=null,n={Ka:[],ab:"none",Gb:!1,$a:null,grid:null};this.A=function(){this.De(q.Ka);e.ig({ab:q.ab,Gb:q.Gb,$a:q.$a})};this.jf=function(l){return c[l]};this.Rb=function(l){["s32","s34","s27"].forEach(function(r){C.M(r,[{type:"2f",name:"u20",value:l}])});c&&c.forEach(function(r){r.Rb(l)})};this.De=function(l){var r=null;k=l.length;var w=null!==q.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),y=w?q.grid:[1,1];w&&this.Rb(y);
c=l.map(function(x,A){x=Object.assign({},x,{index:A,parent:p,Ib:r,zf:A===k-1,Xa:w,Z:y});return r=A=0===A?Ob.instance(x):Pb.instance(x)});d=c[0];e=c[k-1];c.forEach(function(x,A){0!==A&&x.Qf()})};this.V=function(l){l.g(0);var r=l;c.forEach(function(w){r=w.V(r,!1)});return r};this.tb=function(){return d.hf()};this.yd=function(){return e.G()};this.Wa=function(){return e.lf()};this.vd=function(){return e.vd()};this.m=function(){c&&(c.forEach(function(l){l.m()}),e=d=c=null,k=0)};"undefined"!==typeof a&&
(q=Object.assign({},n,a),this.A())}function fb(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function wb(a,c,d){var e=1,k=0;for(d=c+d-1;d>=c;--d)k+=e*fb(a,d),e*=2;return k}function xb(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var c=a.length,d=new Uint8Array(c),e=0;e<c;++e)d[e]=a.charCodeAt(e);return d}function gb(a){return"string"===typeof a?JSON.parse(a):a}function Qb(a){if("undefined"===typeof gb(a).nb){var c=gb(a);a=c.ne;var d=c.nf,e=c.n;c=xb(c);for(var k=
new Float32Array(e),p=new Float32Array(d),q=a+d+1,n=0;n<e;++n){var l=q*n,r=0===fb(c,l)?1:-1,w=wb(c,l+1,a);l=l+1+a;for(var y=p.length,x=0,A=l;A<l+y;++A)p[x]=fb(c,A,!0),++x;for(y=l=0;y<d;++y)l+=p[y]*Math.pow(2,-y-1);k[n]=0===l&&0===w?0:r*(1+l)*Math.pow(2,1+w-Math.pow(2,a-1))}a=k}else if(e=gb(a),a=e.nb,0===a)a=new Uint8Array(e.nb);else{d=e.n;e=xb(e);c=new Uint32Array(d);for(k=0;k<d;++k)c[k]=wb(e,k*a,a);a=c}return a}function Za(){return-1!==[ia.ready,ia.play,ia.pause].indexOf(ma)}function hb(){if(ma===
ia.play)return!1;ma=ia.play;Ia.stop();yb(0)}function zb(){if(ma!==ia.play)return!1;ra.stop();Ia.stop();ma=ia.pause;return!0}function Ja(a,c,d,e,k){a=4*(2*c+a)+d;return e+(ca.buffer[a]/255+ca.buffer[a+8]/65025)*(k-e)}function ib(){b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Ka.qf()}function Ab(a,c,d,e,k,p,q){return aa.enableAsyncReadPixels?Z.Kb(a,c,d,e,k,p,q):Z.ae(a,c,d,e,k)}function Rb(){var a=da.ta();ua.N();b.viewport(0,0,2,2*a);C.set("s62");ca.Aa.g(0);Q.l(!1,!1);return Ab(0,0,2,2*a,ca.buffer,Bb,1)}
function yb(){ma!==ia.pause&&(aa.isCleanGLStateAtEachIteration&&(C.kd(),Q.reset(),Q.Da(),b.disable(b.DEPTH_TEST),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1),C.Ma()),ra.Dc(Sb,Rb,Tb,Bb,Ub,aa.animateProcessOrder))}function Sb(){ua.ea();if(!J.Ab)if(J.zb)J.element.needsUpdate&&(J.D.ie(J.element.videoWidth,J.element.videoHeight),J.D.Qb(J.element.arrayBuffer),J.element.needsUpdate=!1);else{var a=J.element.currentTime,c=a-J.Jb;0>c&&(J.Jb=a,c=0);1E3*c<na.sg||(J.Jb+=c,J.D.refresh())}a=ra.kf();da.update(a,va);for(c=
0;c<a;++c){da.Ob(c);C.set("s64");var d=va[da.wd()];R.Ea&&C.J("u44",d.rz);da.qe("u43");var e=oa.track.tb();d=$a.rd(W.u,d,e);W.T.H(d,e);J.D.g(0);ca.Aa.g(1);Q.l(!1,!1);oa.track.V(W.T)}ra.Ob();a=va[0];a.isDetected&&(C.set("s67"),c=oa.depth.tb(),e=$a.rd(W.u,a,c),wa.T.H(e,c),J.D.g(0),C.J("u44",a.rz),C.dg("u54",a.x,a.y,a.s),Q.l(!1,!1),oa.depth.V(wa.T))}function Bb(){ua.pg();aa.isCleanGLStateAtEachIteration&&(ua.reset(),Y.reset(),b.enable(b.DEPTH_TEST));R.Ub&&R.Ub(da.Nd()?va:va[0]);aa.isCleanGLStateAtEachIteration&&
(b.disable(b.BLEND),Q.reset(),Q.Da())}function Tb(){for(var a=0;a<da.ta();++a)if(da.Ff(a)){var c=a,d=Sa[c],e=[c],k=va[c],p=jb[c],q=2*c;d.jb=Ja(1,q,3,0,1);k.detected=Ba.oa(k.detected,d.jb,na.we);k.isDetected=Cb(k);d.x=Ja(0,q,1,-1,1);d.y=Ja(0,q,2,-1,1);d.ba=Ja(0,q,3,0,1);if(d.jb<aa.multiDetectionThresholdFactors[0]*aa.threshold)d.wa=Math.floor(d.wa/2),R.Ea&&(k.rz=0,k.ry=0);else{var n=ca.ce;d.rx=Ja(1,q,0,-n[0],n[0]);d.ry=Ja(1,q,1,-n[1],n[1]);d.za=Ja(1,q,2,-n[2],n[2]);q=d.ba*ca.ee;e.dx=d.x-k.xRaw;e.dy=
d.y-k.yRaw;e.cc=q-k.sRaw;e.$b=d.rx-k.rx;e.ac=d.ry-k.ry;e.bc=R.Ea?d.za:d.za-k.rz;n=ra.bf();e=(1-kb.rc(sa.translationFactorRange[0],sa.translationFactorRange[1],Math.sqrt(e.dx*e.dx+e.dy*e.dy+e.cc*e.cc)/n))*(1-kb.rc(sa.rotationFactorRange[0],sa.rotationFactorRange[1],Math.sqrt(e.$b*e.$b+e.ac*e.ac+e.bc*e.bc)/n))*kb.rc(sa.qualityFactorRange[0],sa.qualityFactorRange[1],d.jb);c=p[++lb[c]%p.length]=e;for(n=0;n<p.length;++n)c=Math.min(c,p[n]);c=Math.max(.5,c);e=Math.min(c,e);p=Ba.oa(sa.alphaRange[1],sa.alphaRange[0],
Math.pow(e,na.xe));k.xRaw=Ba.oa(k.xRaw,d.x,p);k.yRaw=Ba.oa(k.yRaw,d.y,p);k.sRaw=Ba.oa(k.sRaw,q,p);k.rx=Ba.oa(k.rx,d.rx,p);k.ry=Ba.oa(k.ry,d.ry,p);k.rz=R.Ea?k.rz+sa.followZRotAlphaFactor*p*d.za:Ba.oa(k.rz,d.za,p);q=k.sRaw*mb.Zb*Math.sin(k.ry);p=k.xRaw+Math.cos(k.rz)*q;q=k.yRaw+Math.sin(k.rz)*q/La;c=k.sRaw;e=sa.minDisplacementPx;n=.5*(p-k.x)/c*oa.track.tb();var l=.5*(q-k.y)/(c/La)*oa.track.tb();n*n+l*l>e*e&&(k.x=p,k.y=q,k.s=c);++d.wa}}}function Ub(){ma===ia.play&&Ia.Dc(yb)}function Db(){W.T=$a.instance({});
var a={width:2,height:da.ta(),isFloat:!0,isPot:!1,array:da.Se(new Float32Array([0,.5,.5,0,0,0,0,0]))};ca.Aa=Vb.instance(a);wa.T=$a.instance({});wa.La=Y.instance({isPot:!0,isFloat:!1,width:oa.depth.yd()*R.outputScaleFactor})}function nb(){C.M("s64",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u41",value:1},{type:"2f",name:"u42",value:W.F},{type:"1f",name:"u43",value:.5},{type:"1f",name:"u44",value:0}]);C.M("s65",[{type:"1i",name:"u45",value:0},{type:"1i",name:"u41",value:1},{type:"1f",name:"u48",
value:na.ng},{type:"1f",name:"u49",value:aa.threshold},{type:"3f",name:"u47",value:[ca.R[0]*W.F[0],ca.R[1]*W.F[1],ca.R[2]]},{type:"1f",name:"u43",value:.5},{type:"1f",name:"u50",value:1},{type:"1f",name:"u44",value:0}]);C.M("s66",[{type:"1i",name:"u45",value:0}]);C.M("s62",[{type:"1i",name:"u41",value:0},{type:"1f",name:"u53",value:W.F[0]},{type:"2f",name:"u52",value:[0,.5/da.ta()]}]);C.M("s67",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u42",value:W.F}]);C.M("s68",[{type:"1i",name:"u55",value:1},
{type:"1i",name:"u56",value:0}])}function ob(){W.F[0]=1;W.F[1]=W.u/W.O;Ta.A({Hb:aa.overlapFactors,Ud:aa.nScaleLevels,u:W.u,O:W.O,de:aa.scale0Factor,R:ca.R,Ec:aa.scanCenterFirst})}function Eb(a,c,d){return new Promise(function(e){a?d("string"===typeof a?JSON.parse(a):a,e):ab.get(c,function(k){k=JSON.parse(k);d(k,e)})})}function Wb(a,c){var d=a.exportData;ca.ce=d.rotationEulerAnglesFactors;if(d.translationScalingFactors){var e=d.translationScalingFactors,k=aa.translationScalingFactors;ca.R[0]=e[0]*
k[0];ca.R[1]=e[1]*k[1];ca.R[2]=e[2]*k[2]}ca.ee=d.dsMean?1+d.dsMean:1;mb.Zb=.7;"undefined"!==typeof d.fgDisplaceXFactor&&(mb.Zb=d.fgDisplaceXFactor);c(a)}function Xb(a,c){c(a)}function Yb(){if(Ka.A({ib:R.ga,width:W.u,height:W.O,debug:!1,yc:function(){Ma("GLCONTEXT_LOST")},antialias:R.antialias,premultipliedAlpha:!0}))return!0;Ma("GL_INCOMPATIBLE");return!1}function Zb(){var a=da.wd(),c=va[a];ca.Aa.Yf(1);b.viewport(0,a,1,1);C.set("s65");R.Ea&&C.J("u44",c.rz);da.qe("u43");var d=1,e=da.jg(Sa,va,W.u/W.O);
da.Nd()&&(e&&(d=0,Sa[a].wa=0,c.isDetected=!1,c.detected=0),C.J("u50",d));C.eg("u46",Ta.get(a));Q.l(!1,!1);if(da.Df()||e)b.viewport(1,a,1,1),C.set("s66"),C.J("u50",d),Q.l(!1,!1);ca.Aa.sync()}function $b(a){var c=va[0];C.set("s68");wa.La.H();a.g(0);wa.T.g(1);Q.l(!1,!1);C.set("s1");ua.N();wa.La.g(0);a=wa.La.G();Q.l(!1,!1);Ab(0,0,a,a,c.RGBDBuf,null,1)}function Fb(){J.D&&J.D.remove();J.zb=J.element.isFakeVideo?!0:!1;if(J.zb){var a=Gb();a={isFlipY:!1,array:J.element.arrayBuffer,width:a.w,height:a.Ga,isKeepArray:!0}}else a=
{K:J.element};J.Jc=Y.instance(Object.assign({isPot:!1,isLinear:!0,isFloat:!1},a));J.D=J.Jc}function Na(){var a=[{type:"mat2",name:"u40",value:J.B}];C.M("s63",[{type:"1i",name:"u1",value:0}].concat(a));C.M("s64",a);C.M("s67",a)}function Oa(){var a=[.5,.5],c=J.F[1]/J.F[0];La=Ka.X()/Ka.G();90===Math.abs(qa.rotate)&&(c=1/c);c>La?a[1]*=La/c:a[0]*=c/La;C.M("s65",[{name:"u51",type:"1f",value:La}]);J.B[0]=0;J.B[1]=0;J.B[2]=0;J.B[3]=0;switch(qa.rotate){case 0:J.B[0]=a[0];J.B[3]=a[1];break;case 180:J.B[0]=
-a[0];J.B[3]=-a[1];break;case 90:J.B[1]=a[0];J.B[2]=-a[1];break;case -90:J.B[1]=-a[0],J.B[2]=a[1]}qa.flipX&&(J.B[0]*=-1,J.B[2]*=-1);J.Ab||(J.B[1]*=-1,J.B[3]*=-1)}function Gb(){var a={w:J.element.videoWidth||J.element.width,Ga:J.element.videoHeight||J.element.height};if(!a.w||!a.Ga||4>a.w||4>a.Ga)throw Error("INVALID VIDEO DIMENSIONS - width = "+a.w+" height = "+a.Ga);return a}function pb(){var a=Gb(),c=J.F[0]!==a.w||J.F[1]!==a.Ga;c&&(J.F[0]=a.w,J.F[1]=a.Ga);return c}function bb(a,c){if(ma===ia.error)return!1;
J.element=a;pb();c&&c();return!0}function Hb(a,c,d){a&&a();J.Sa={video:{facingMode:{exact:qa.facingMode},width:{min:qa.minWidth,max:qa.maxWidth,ideal:qa.idealWidth},height:{min:qa.minHeight,max:qa.maxHeight,ideal:qa.idealHeight}},audio:!1};X.Zc(J.Sa,qa.deviceId);X.get(J.element?J.element:X.Bd(),function(e){c&&c(e);d(e)},function(){Ma("WEBCAM_UNAVAILABLE")},J.Sa)}function Ma(a){ma!==ia.error&&(ma=ia.error,R.Ra&&R.Ra(a))}function Cb(a){return a.detected>aa.multiDetectionThresholdFactors[1]*aa.threshold}
var Ba={vh:function(a){return Math.ceil(Math.log2(a))},Qh:function(a){return Math.log2(a)},Nh:function(a){return 0===Math.log2(a)%1},Eg:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},Fg:function(a,c,d){return Math.min(Math.max(a,c),d)},Ig:function(a){return a*Math.PI/180},Xh:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},Yh:function(a){return Math.round(1E6*a)/1E6},wh:function(a,c){return(100*a/c).toFixed(3)},oa:function(a,c,d){return a*
(1-d)+c*d},Rh:function(a,c){return a[0]*(1-c)+a[1]*c},Re:function(a,c){return Ba.Je(a-c)},Je:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},Ng:function(a,c){return Math.abs(Ba.Re(a,c))},tg:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),Math.cos(a)+Math.cos(c))}},ab={get:function(a,c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status?c(e.responseText):"undefined"!==
typeof d&&d(e.status))};e.send()},mf:function(a){return new Promise(function(c,d){ab.get(a,c,d)})},sh:function(a,c,d){a+=d?"?"+ab.Ve(d):"";ab.get(a,function(e){c(JSON.parse(e))})},Th:function(a,c,d){var e=new XMLHttpRequest;e.open("POST",a,!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};e.send(c)},Ve:function(a){return"string"===typeof a?a:Object.keys(a).map(function(c){return encodeURIComponent(c)+
"="+encodeURIComponent(a[c])}).join("&")},gh:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},ac={create:function(a,c){for(var d=Array(c),e=0;e<c;++e)d[e]=a;return d},Jg:function(a,c){for(var d=0;d<a.length;++d)c[d]=a[d]},clone:function(a){for(var c=Array(a.length),d=0;d<a.length;++d)c[d]=a[d];return c},ai:function(a,c,d){a.forEach(function(e,k){c[k]=e*d})},ii:function(a){for(var c=a.length-1;0<c;--c){var d=Math.floor(Math.random()*
(c+1)),e=a[c];a[c]=a[d];a[d]=e}},ki:function(a){return a.sort(function(c,d){return c-d})},mg:function(a){return Array.isArray(a)||a.constructor===Float32Array||a.constructor===Uint8Array}},qb={Xb:function(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=qb.Xb(a[d],c);return a},Mg:function(a){return JSON.parse(JSON.stringify(a))}},kb={ji:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},rc:function(a,c,d){return Math.min(Math.max((d-
a)/(c-a),0),1)},Yg:function(a,c,d,e){return Math.pow(Math.min(Math.max((e-a)/(c-a),0),1),d)},pi:function(){return 0},Sh:function(){return 1},Ph:function(a){return a},Vg:function(a){return a*a},$g:function(a){return a*(2-a)},Sg:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},Qg:function(a){return a*a*a},Zg:function(a){return--a*a*a+1},Rg:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Wg:function(a){return a*a*a*a},ah:function(a){return 1- --a*a*a*a},Tg:function(a){return.5>a?8*a*a*a*a:1-8*--a*
a*a*a},Xg:function(a){return a*a*a*a*a},bh:function(a){return 1+--a*a*a*a*a},Ug:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},bc={Ze:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+c+"))-vec4(1.),"+c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},C=function(){function a(g,
m,I){m=g.createShader(m);g.shaderSource(m,I);g.compileShader(m);return g.getShaderParameter(m,g.COMPILE_STATUS)?m:null}function c(g,m,I){m=a(g,g.VERTEX_SHADER,m);I=a(g,g.FRAGMENT_SHADER,I);g===b&&n.push(m,I);var M=g.createProgram();g.attachShader(M,m);g.attachShader(M,I);g.linkProgram(M);return M}function d(g){return["float","sampler2D","int"].map(function(m){return"precision "+g+" "+m+";\n"}).join("")}function e(g,m){m.o=m.o?!0:!1;if(!m.o){m.Ba=m.Ba||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";
m.Ca=m.Ca||["a0"];m.sa=m.sa||[2];m.precision=m.precision||x;m.id=w++;void 0!==m.ge&&(m.ge.forEach(function(P,ea){m.h=m.h.replace(P,m.Lb[ea])}),m.ge.splice(0));m.Qc=0;m.sa.forEach(function(P){m.Qc+=4*P});var I=d(m.precision);m.ya=c(g,I+m.Ba,I+m.h);m.C={};m.i.forEach(function(P){m.C[P]=g.getUniformLocation(m.ya,P)});m.attributes={};m.Qa=[];m.Ca.forEach(function(P){var ea=g.getAttribLocation(m.ya,P);m.attributes[P]=ea;m.Qa.push(ea)});if(m.j){g.useProgram(m.ya);r=m;l=m.id;for(var M in m.j)g.uniform1i(m.C[M],
m.j[M])}m.va=!0}}function k(g){za.bg(N);l!==g.id&&(N.S(),l=g.id,r=g,b.useProgram(g.ya),g.Qa.forEach(function(m){0!==m&&b.enableVertexAttribArray(m)}))}function p(g,m,I){e(g,m,I);g.useProgram(m.ya);g.enableVertexAttribArray(m.attributes.a0);l=-1;return r=m}function q(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var n=[],l=-1,r=null,w=0,y=!1,x="highp",A=["u1"],v=["u0"],E={u1:0},f={u0:0},B={u1:0,u2:1},K={u1:0,u3:1},z=["u1","u3","u4"],
D={u5:0},h=["u6","u7","u8","u9"],t={u6:0,u7:1},G={s0:q(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:A,j:E,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:B},s3:{h:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",i:["u1","u10","u11"],j:E,o:!0},s4:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:A,j:E},s5:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],j:B},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:A,j:E},s7:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:A,j:E},s8:{h:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",
i:["u0","u10"],j:f},s9:{h:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",i:["u0","u10"],j:f},s10:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:A,j:E},s11:{h:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",
i:["u1","u12","u13"],j:{u1:0,u12:1}},s12:{h:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",i:["u1","u14"],j:E},s13:{h:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",
i:A,j:E,o:!0},s14:{h:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:A,j:E,o:!0},s15:{h:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],j:E},s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:v,j:f,o:!0},s17:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:v,j:f,o:!0},s18:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:v,j:f,o:!0},s19:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:v,j:f,o:!0},s20:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:v,j:f},s21:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:v,j:f},s22:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:v,j:f,o:!0},s23:{h:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u16","u17"],j:{u0:0,u16:1},o:!0},s24:{h:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u18"],j:E},s25:{h:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],j:Object.assign({u19:2},t),o:!0},s26:{h:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:h,j:t},s27:{h:"uniform float u8,u9;uniform vec2 u20;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=c+fract(b*u8)/u20,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u7,f),h=texture2D(u6,d);gl_FragColor=g*h;}",
i:["u20"].concat(h),j:t,o:!0},s28:{h:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(h),j:Object.assign({u25:3,u22:4,u23:5,u24:6},t),o:!0},s29:{h:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h;b=floor(u28*b+.5*(u9-1.)*(f-u28));vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u7,j),o=texture2D(u6,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u27*u27+q)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(h),j:Object.assign({u3:2},t)},s30:{h:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],j:t,o:!0},s31:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:z,j:K},s32:{h:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(z),j:K,o:!0},s33:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:z,j:K,o:!0},s34:{h:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(z),j:K,o:!0},s35:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:z,j:K,o:!0},s36:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:A,j:E,precision:"lowp"},s37:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],j:E,precision:"lowp"},s38:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],j:E,precision:"lowp"},s39:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],j:B,o:!0},s40:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],j:B,o:!0},s41:{h:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],j:D},s42:{h:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
j:D,o:!0},s43:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:E,precision:"lowp",o:!0},s44:{h:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
j:E,precision:"lowp",o:!0},s45:{h:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],j:{u1:0,u16:1,u31:2},o:!0}},L={s46:{h:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],Lb:["1.1111","gl_FragColor\\*=2.2222;"]},s47:{h:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),Lb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},u=null,O=null,N={Cb:function(){return y},A:function(){if(!y){u=qb.Xb(G,2);O=qb.Xb(L,2);x="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var g in u)e(b,u[g],g);C.set("s0");b.enableVertexAttribArray(0);y=!0}},eb:function(g){g.forEach(function(m){N.$c(m)})},$c:function(g){u[g.id]=g;e(b,g,g.id)},sf:function(g,
m,I){m||(m=g);u[m]=Object.create(O[g]);u[m].yf=!0;O[g].Lb&&O[g].Lb.forEach(function(M,P){u[m].h=u[m].h.replace(new RegExp(M,"g"),I[P])});e(b,u[m],m)},set:function(g){var m=u[g];m.o&&(m.o=!1,e(b,m,g));k(m)},bb:function(g){return p(g,q(),"s48")},Hc:function(g){return p(g,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:x},"s49")},We:function(g){return"undefined"===typeof u[g]?!1:u[g].va},S:function(){-1!==l&&(l=-1,r.Qa.forEach(function(g){0!==g&&b.disableVertexAttribArray(g)}))},Ic:function(){var g=
0;r.Qa.forEach(function(m,I){I=r.sa[I];b.vertexAttribPointer(m,I,b.FLOAT,!1,r.Qc,g);g+=4*I})},kd:function(){b.enableVertexAttribArray(0)},Ma:function(){N.Mb(b)},Mb:function(g){g.vertexAttribPointer(r.Qa[0],2,g.FLOAT,!1,8,0)},ei:function(g,m){b.uniform1i(r.C[g],m)},J:function(g,m){b.uniform1f(r.C[g],m)},W:function(g,m,I){b.uniform2f(r.C[g],m,I)},cg:function(g,m){b.uniform2fv(r.C[g],m)},eg:function(g,m){b.uniform3fv(r.C[g],m)},dg:function(g,m,I,M){b.uniform3f(r.C[g],m,I,M)},fg:function(g,m,I,M,P){b.uniform4f(r.C[g],
m,I,M,P)},le:function(g,m){b.uniform4fv(r.C[g],m)},fi:function(g,m){b.uniformMatrix2fv(r.C[g],!1,m)},gi:function(g,m){b.uniformMatrix3fv(r.C[g],!1,m)},hi:function(g,m){b.uniformMatrix4fv(r.C[g],!1,m)},M:function(g,m){N.set(g);m.forEach(function(I){switch(I.type){case "4f":b.uniform4fv(r.C[I.name],I.value);break;case "3f":b.uniform3fv(r.C[I.name],I.value);break;case "2f":b.uniform2fv(r.C[I.name],I.value);break;case "1f":b.uniform1f(r.C[I.name],I.value);break;case "1i":b.uniform1i(r.C[I.name],I.value);
break;case "mat2":b.uniformMatrix2fv(r.C[I.name],!1,I.value);break;case "mat3":b.uniformMatrix3fv(r.C[I.name],!1,I.value);break;case "mat4":b.uniformMatrix4fv(r.C[I.name],!1,I.value)}})},uh:function(){return"lowp"},m:function(){N.S();b.disableVertexAttribArray(0);for(var g in u){var m=u[g];m.va&&(m.va=!1,b.deleteProgram(m.ya));m.yf&&delete u[g]}n.forEach(function(I){b.deleteShader(I)});n.splice(0);w=0;y=!1;r=null;l=-1}};return N}(),b=null,Ka=function(){function a(v){console.log("ERROR in ContextFF: ",
v);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(v,E,f){v.setAttribute("width",E);v.setAttribute("height",f)}function e(v){function E(){Ea.m();Z.reset();B.getExtension("WEBGL_lose_context").loseContext()}if(c())return!1;var f=document.createElement("canvas");d(f,5,5);var B=null;try{B=f.getContext("webgl2",v)}catch(K){return!1}if(!B)return!1;k(B);Z.ld(B);v=Z.Yb(B);if(!v.ja&&!v.la)return E(),!1;v=Ea.ad(B,v);E();return v?!0:!1}function k(v){v.clearColor(0,
0,0,0);v.disable(v.DEPTH_TEST);v.disable(v.BLEND);v.disable(v.DITHER);v.disable(v.STENCIL_TEST);v.disable(v.CULL_FACE);v.GENERATE_MIPMAP_HINT&&v.FASTEST&&v.hint(v.GENERATE_MIPMAP_HINT,v.FASTEST);v.disable(v.SAMPLE_ALPHA_TO_COVERAGE);v.disable(v.SAMPLE_COVERAGE);v.depthFunc(v.LEQUAL);v.clearDepth(1)}var p=null,q=null,n=null,l=null,r=!0,w=null,y=null,x=[],A={G:function(){return p.width},X:function(){return p.height},lh:function(){return p},jh:function(){return b},ma:function(){return r},flush:function(){b.flush()},
qf:function(){ua.ea();A.Wf()},Wf:function(){Y.reset();Q.reset();C.S();C.kd();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);Q.Da();C.Ma()},af:function(){w||(w=new Uint8Array(p.width*p.height*4));b.readPixels(0,0,p.width,p.height,b.RGBA,b.UNSIGNED_BYTE,w);return w},nh:function(){return p.toDataURL("image/jpeg")},oh:function(){ua.N();q||(q=document.createElement("canvas"),n=q.getContext("2d"));d(q,p.width,p.height);for(var v=A.af(),E=n.createImageData(q.width,q.height),f=q.width,B=q.height,K=E.data,z=0;z<
B;++z)for(var D=B-z-1,h=0;h<f;++h){var t=4*(z*f+h),G=4*(D*f+h);K[t]=v[G];K[t+1]=v[G+1];K[t+2]=v[G+2];K[t+3]=v[G+3]}n.putImageData(E,0,0);return q.toDataURL("image/png")},mh:function(v){!q&&v&&(q=document.createElement("canvas"),n=q.getContext("2d"));var E=v?q:document.createElement("canvas");d(E,p.width,p.height);(v?n:E.getContext("2d")).drawImage(p,0,0);return E},A:function(v){v=Object.assign({ka:null,yc:null,ib:null,fd:null,width:512,height:512,premultipliedAlpha:!1,vf:!0,antialias:!1,debug:!1,
Lg:!1},v);v.ka?(b=v.ka,p=v.ka.canvas):v.fd&&!v.ib?p=document.getElementById(v.fd):v.ib&&(p=v.ib);p||(p=document.createElement("canvas"));p.width=v.width;p.height=v.height;if(b)r=b instanceof WebGL2RenderingContext;else{r=!0;var E={antialias:v.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:v.premultipliedAlpha,stencil:!1,depth:v.vf,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(E.antialias=!1);var f=e(E);f||!E.antialias||c()||(E.antialias=!1,f=e(E));f&&(b=p.getContext("webgl2",E));b?r=!0:((b=p.getContext("webgl",E))||(b=p.getContext("experimental-webgl",E)),r=!1)}if(!b)return a("WebGL1 and 2 are not enabled");v.yc&&p.addEventListener&&(l=b.getExtension("WEBGL_lose_context"))&&(y=v.yc,p.addEventListener("webglcontextlost",y,!1));if(!Z.A())return a("Not enough GL capabilities");k(b);C.A();Q.A();Ea.ad(b,Z.$e());x.forEach(function(B){B(b)});x.splice(0);return!0},zg:function(){return new Promise(function(v){b?
v(b):x.push(v)})},m:function(){b&&(Z.m(),C.m(),Ea.m());l&&y&&(p.removeEventListener("webglcontextlost",y,!1),l=y=null);b=w=n=q=p=null;x.splice(0)}};return A}(),za=function(){function a(){null===c&&("undefined"!==typeof C?c=C:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},bg:function(d){c!==d&&(c&&c.S(),c=d)},Cb:function(){return c.Cb()},Ma:function(){return c.Ma()},Mb:function(d){return c.Mb(d)},Ic:function(){return c.Ic()},S:function(){return c.S()},set:function(d){a();
return c.set(d)},bb:function(d){a();return c.bb(d)},Hc:function(d){a();return c.Hc(d)}}}(),Da=function(){function a(g){b.bindTexture(b.TEXTURE_2D,g)}function c(g){L[0]=g;g=u[0];var m=g>>16&32768,I=g>>12&2047,M=g>>23&255;return 103>M?m:142<M?m|31744|((255==M?0:1)&&g&8388607):113>M?(I|=2048,m|(I>>114-M)+(I>>113-M&1)):m=(m|M-112<<10|I>>1)+(I&1)}function d(g){var m=new Uint16Array(g.length);g.forEach(function(I,M){m[M]=c(I)});return m}function e(){if(null!==O.kc)return O.kc;var g=p(d([.5,.5,.5,.5]),!0);
return null===g?!0:O.kc=g}function k(){if(null!==O.lc)return O.lc;var g=p(new Uint8Array([127,127,127,127]),!1);return null===g?!0:O.lc=g}function p(g,m){if(!za.Cb()||!E)return null;var I=null,M=Math.sqrt(g.length/4);try{var P=b.getError();if("FUCKING_BIG_ERROR"===P)return!1;I=N.instance({isFloat:!1,U:m,array:g,width:M});P=b.getError();if(P!==b.NO_ERROR)return!1}catch(ea){return!1}pa.N();b.viewport(0,0,M,M);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);za.set("s0");I.hb(0);la.l(!0,!0);g=4*M*M;
m=new Uint8Array(g);b.readPixels(0,0,M,M,b.RGBA,b.UNSIGNED_BYTE,m);M=!0;for(P=0;P<g;++P)M=M&&3>Math.abs(m[P]-127);I.remove();pa.ea();return M}var q=0,n=null,l=0,r=null,w=null,y=null,x=null,A=null,v=null,E=!1,f=[],B={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,Kd:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,K:null,jc:null,xf:!1,U:!1,I:null,Fb:4,sc:0},K=!1,z=null,D=null,h=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,
0,0,1]],t=!1,G=!1,L=new Float32Array(1),u=new Int32Array(L.buffer),O={kc:null,lc:null},N={A:function(){E||(A=[b.RGBA,null,b.RGBA,b.RGBA],v=[b.RGBA,null,b.RGBA,b.RGBA],n=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],t="undefined"!==typeof JEContext,G="undefined"!==typeof Z,t&&JEContext.Oh()&&n.push(b.TEXTURE8,b.TEXTURE9),r=[-1,-1,-1,-1,-1,-1,-1,-1],x=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],E=!0)},rf:function(){if(!w){for(var g=new Float32Array(16384),m=0;16384>
m;++m)g[m]=2*Math.random()-1;w={random:N.instance({isFloat:!0,isPot:!0,array:g,width:64}),te:N.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}N.rg()},je:function(g){b.framebufferTexture2D(pa.hc(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,g,0)},Dh:function(){return w.te},rg:function(){x[1]=Z.fc(b)},$f:function(){v=A=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},be:function(g){C.set("s1");pa.N();var m=g.G(),I=g.X();b.viewport(0,0,m,I);g.g(0);la.l(!1,!1)},Vh:function(g,m){N.be(g);b.readPixels(0,0,
g.G(),g.X(),b.RGBA,b.UNSIGNED_BYTE,m)},Wh:function(g,m){N.be(g);return Z.Kb(0,0,g.G(),g.X(),m)},td:function(g,m,I,M,P,ea,xa){g.activeTexture(g.TEXTURE0);var Fa=g.createTexture();g.bindTexture(g.TEXTURE_2D,Fa);P=P instanceof Float32Array?P:new Float32Array(P);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST);
g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,ea);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,I,M,0,g.RGBA,g.FLOAT,P);g.bindTexture(g.TEXTURE_2D,null);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);xa&&(pa.ea(),C.bb(g));g.viewport(0,0,I,M);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,m,0);g.bindTexture(g.TEXTURE_2D,Fa);xa?la.l(!0,!0):Q.pb(g);g.deleteTexture(Fa);E&&(r[0]=-1,y=null,q=0)},Tb:function(g){g!==q&&(b.activeTexture(n[g]),q=g)},instance:function(g){var m;function I(){T=void 0!==F.K.videoWidth?
F.K.videoWidth:F.K.width;U=void 0!==F.K.videoHeight?F.K.videoHeight:F.K.height}function M(H){var S=b.getError();if("FUCKING_BIG_ERROR"===S)return!1;b.texImage2D(b.TEXTURE_2D,0,ja,fa,ha,H);S=b.getError();S!==b.NO_ERROR&&fa!==b.RGBA&&(fa=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,ja,fa,ha,H));return!0}function P(){if(!Ib){a(ta);Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,Ca);F.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,F.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,
F.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));F.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.ph().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.vg);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,F.isLinear?b.LINEAR:b.NEAREST);var H=F.isMipmap&&!Qa;b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,F.Kd?b.LINEAR_MIPMAP_LINEAR:F.isLinear?
H?b.NEAREST_MIPMAP_LINEAR:b.LINEAR:H?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);fa=A[F.Fb-1];ja=v[F.Fb-1];ha=x[rb];Z.ma()&&(H=Z.cf(),fa===b.RGBA&&ha===b.FLOAT?F.isMipmap||F.isLinear?ja=Ea.ef(b):Z.bd()?H&&(ja=H):ja=b.RGBA16F||b.RGBA:fa===b.RGB&&ha===b.FLOAT&&H&&(ja=H,fa=b.RGBA));if(F.U&&!F.isFloat||F.isFloat&&F.isMipmap&&Ea.Cf())ja=Z.df(),ha=Z.fc(b);F.sc&&(cb=F.sc);F.isSrgb&&4===F.Fb&&(fa=JEContext.Bh());if(F.K)M(F.K);else if(F.url)M(Ha);else if(ya){H=ya;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,
0,ja,T,U,0,fa,ha,H),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,ja,T,U,0,fa,ha,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,T,U,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(pc){b.texImage2D(b.TEXTURE_2D,0,ja,T,U,0,fa,ha,null)}F.isKeepArray||(ya=null)}else H=b.getError(),"FUCKING_BIG_ERROR"!==H&&(b.texImage2D(b.TEXTURE_2D,0,ja,T,U,0,fa,ha,null),H=b.getError(),H!==b.NO_ERROR&&(fa=b.RGBA,F.U&&ha!==b.FLOAT&&(ha=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,ja,T,U,0,fa,ha,null))));if(F.isMipmap)if(!Qa&&
ba)ba.rb(),db=!0;else if(Qa){H=Math.log2(Math.min(T,U));Ra=Array(1+H);Ra[0]=ta;for(var S=1;S<=H;++S){var ka=Math.pow(2,S),V=T/ka;ka=U/ka;var Pa=b.createTexture();a(Pa);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,ja,V,ka,0,fa,ha,null);a(null);Ra[S]=Pa}db=!0}a(null);r[q]=-1;Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Ua=!0;F.I&&ba&&(F.I(ba),F.I=null)}}function ea(){for(var H=T*U,S=2*H,ka=3*H,V=
0;V<H;++V)Aa[0][V]=Va[V],Aa[1][V]=Va[V+H],Aa[2][V]=Va[V+S],Aa[3][V]=Va[V+ka]}function xa(){var H=T*U*4;Ga=[new Uint8Array(H),new Uint8Array(H),new Uint8Array(H),new Uint8Array(H)];Aa=[new Float32Array(Ga[0].buffer),new Float32Array(Ga[1].buffer),new Float32Array(Ga[2].buffer),new Float32Array(Ga[3].buffer)];eb=new Uint8Array(4*H);Va=new Float32Array(eb.buffer);Wa=!0}function Fa(){m=new Uint8Array(T*U*4);Jb=new Float32Array(m.buffer);sb=!0}var F=Object.assign({},B,g),Xa=l++;null===F.isFlipY&&(F.isFlipY=
F.url?!0:!1);F.data&&(F.array="string"===typeof F.data?Qb(F.data):F.isFloat?new Float32Array(F.data):new Uint8Array(F.data),F.isFlipY=!1);var rb=0,Kb=F.K?!0:!1,Ya=null,tb=null,Lb=!1;F.U=F.U||F.isFloat;F.U&&(rb=1);!F.xf&&F.isFloat&&G&&!Z.bd()&&(F.isFloat=!1);F.isFloat&&(rb=2);F.isAnisotropicFiltering&&t&&!JEContext.Hh()&&(F.isAnisotropicFiltering=!1);var ta=F.jc||b.createTexture(),Ha=null,ya=!1,T=0,U=0,Ua=!1,Ib=!1,Wa=!1,Aa=null,Ga=null,eb=null,Va=null,ja=null,fa=null,ha=null,Ca=F.isFlipY,cc=(g=F.U&&
F.isMipmap)&&Ea.Ee(),Qa=g&&!cc?!0:!1,Ra=null,cb=-1,Mb=-1,db=!1;var sb=!1;var Jb=m=null;F.width&&(T=F.width,U=F.height?F.height:T);var ba={get:function(){return ta},G:function(){return T},X:function(){return U},Eh:function(){return F.url},Ih:function(){return F.isFloat},Kh:function(){return F.U},ci:function(H){ta=H},Lh:function(){return F.isLinear},rb:function(){b.generateMipmap(b.TEXTURE_2D)},Be:function(H,S){Qa?(H||(H=ba.xd()),N.Tb(S),a(Ra[H]),r[S]=-1):ba.g(S)},xd:function(){-1===cb&&(cb=Math.log2(T));
return cb},ke:function(H){b.TEXTURE_MAX_LEVEL&&b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAX_LEVEL,H)},Ye:function(H){H||(H=ba.xd());if(Qa){C.set("s12");N.Tb(0);for(var S=T,ka=U,V=1;V<=H;++V)S/=2,ka/=2,C.W("u14",.25/S,.25/ka),b.viewport(0,0,S,ka),a(Ra[V-1]),b.framebufferTexture2D(pa.hc(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,Ra[V],0),la.l(!1,1===V);r[0]=-1}else H!==Mb&&(Mb=H,ba.ke(H)),ba.rb()},di:function(H){(Kb=!ac.mg(H))?(ya=null,F.K=H,I()):ya=H},g:function(H){if(!Ua)return!1;N.Tb(H);if(r[H]===Xa)return!1;
a(ta);r[H]=Xa;return!0},hb:function(H){b.activeTexture(n[H]);q=H;a(ta);r[H]=Xa},v:function(){y=ba;N.je(ta)},H:function(){b.viewport(0,0,T,U);y=ba;N.je(ta)},Oc:N.Oc,ie:function(H,S){T=H;U=S},resize:function(H,S){ba.ie(H,S);P()},clone:function(H){H=N.instance({width:T,height:U,U:F.U,isFloat:F.isFloat,isLinear:F.isLinear,isMirrorY:F.isMirrorY,isFlipY:H?!Ca:Ca,isPot:F.isPot});za.set("s0");pa.ea();H.H();ba.g(0);la.l(!0,!0);return H},gg:function(){b.viewport(0,0,T,U)},remove:function(){b.deleteTexture(ta);
Ib=!0;f.splice(f.indexOf(ba),1);ba=null},refresh:function(){ba.hb(0);Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Kb?b.texImage2D(b.TEXTURE_2D,0,ja,fa,ha,F.K):b.texImage2D(b.TEXTURE_2D,0,ja,T,U,0,fa,ha,ya);Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},$d:function(){Wa||xa();b.readPixels(0,0,T,4*U,b.RGBA,b.UNSIGNED_BYTE,eb);ea();return Aa},Tf:function(){Wa||xa();return Z.Kb(0,0,T,4*U,eb).then(function(){ea();return Aa})},Vf:function(){sb||Fa();b.readPixels(0,0,T,U,b.RGBA,b.UNSIGNED_BYTE,m);return Jb},
Uf:function(){sb||Fa();return Z.Kb(0,0,T,U,m)},gd:function(H){pa.N();C.set("s15");ba.g(0);if(H)b.viewport(0,0,T,U),C.fg("u15",.25,.25,.25,.25),la.l(!1,!0);else for(H=0;4>H;++H)b.viewport(0,U*H,T,U),C.le("u15",h[H]),la.l(!1,0===H)},Qb:function(H){var S=ha===x[0]&&!k();a(ta);Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);S?(Lb||(Ya=document.createElement("canvas"),Ya.width=T,Ya.height=U,tb=Ya.getContext("2d"),tb.createImageData(T,U),Lb=!0),null.data.set(H),tb.putImageData(null,0,0),b.texImage2D(b.TEXTURE_2D,
0,ja,fa,ha,Ya)):b.texImage2D(b.TEXTURE_2D,0,ja,T,U,0,fa,ha,H);r[q]=Xa;Ca&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},oi:function(H,S){a(ta);S&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,ja,fa,ha,H);r[q]=Xa;S&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},bi:function(H,S){var ka=T*U,V=4*ka;H=F.U?H?"RGBE":"JSON":"RGBA";S&&(H=S);S=Z.ma()&&!1;var Pa=null;switch(H){case "RGBE":Pa="s13";break;case "JSON":Pa=S?"s0":"s15";break;case "RGBA":case "RGBAARRAY":Pa="s7"}Wa||("RGBA"===H||"RGBE"===
H||"RGBAARRAY"===H?(Ga=new Uint8Array(V),Wa=!0):"JSON"!==H||S||xa());pa.N();C.set(Pa);ba.g(0);V=null;if("RGBA"===H||"RGBE"===H||"RGBAARRAY"===H){b.viewport(0,0,T,U);la.l(!0,!0);b.readPixels(0,0,T,U,b.RGBA,b.UNSIGNED_BYTE,Ga);if("RGBAARRAY"===H)return{data:Ga};K||(z=document.createElement("canvas"),D=z.getContext("2d"),K=!0);z.width=T;z.height=U;ka=D.createImageData(T,U);ka.data.set(Ga);D.putImageData(ka,0,0);V=z.toDataURL("image/png")}else if("JSON"===H)if(S)V=new Float32Array(ka),b.viewport(0,0,
T,U),la.l(!0,!0),b.readPixels(0,0,T,U,b.RGBA,b.FLOAT,V);else{for(V=0;4>V;++V)b.viewport(0,U*V,T,U),C.le("u15",h[V]),la.l(!V,!V);ba.$d();V=Array(ka);for(S=0;S<ka;++S)V[4*S]=Aa[0][S],V[4*S+1]=Aa[1][S],V[4*S+2]=Aa[2][S],V[4*S+3]=Aa[3][S]}return{format:H,data:V,width:T,height:U,isMirrorY:F.isMirrorY,isFlipY:"RGBA"===H?F.isFlipY:!F.isFlipY}}};F.isMipmap&&!Qa&&Ua&&!db&&(ba.rb(),db=!0);if(F.url)a(ta),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Ha=new Image,Ha.Kg="Anonymous",Ha.crossOrigin=
"Anonymous",Ha.src=F.url,Ha.onload=function(){T=Ha.width;U=Ha.height;P()};else if(F.K){var Nb=function(){I();T?P():setTimeout(Nb,1)};Nb()}else F.array?(F.U&&!F.isFloat?F.array instanceof Uint16Array?(ya=F.array,P()):e()?(ya=d(F.array),P()):(P(),N.td(b,ta,ba.G(),ba.X(),F.array,Ca,!0)):(ya=F.isFloat?F.array instanceof Float32Array?F.array:new Float32Array(F.array):F.array instanceof Uint8Array?F.array:new Uint8Array(F.array),P()),F.isKeepArray||(ya&&ya!==F.array&&(ya=null),delete F.array)):F.jc?Ua=
!0:P();ba.zh=ba.G;F.I&&Ua&&(F.I(ba),F.I=null);f.push(ba);return ba},N:function(g){g!==q&&(b.activeTexture(n[g]),q=g);r[g]=-1;a(null)},yg:function(g){w.random.g(g)},Oc:function(){y=null;b.framebufferTexture2D(pa.hc(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==q&&b.activeTexture(n[0]);for(var g=0;g<n.length;++g)r[g]=-1;q=-1},Zh:function(){q=-1},og:function(){for(var g=0;g<n.length;++g)N.N(g)},ud:function(){w&&(w.random.remove(),w.te.remove())},ni:function(g,m){if("RGBA"===g.format||
"RGBE"===g.format){var I=new Image;I.src=g.data;I.onload=function(){N.instance({isMirrorY:g.isMirrorY,isFlipY:g.isFlipY,isFloat:!1,K:I,I:function(M){if("RGBA"===g.format)m(M);else{var P=g.width,ea=g.height,xa=N.instance({isMirrorY:g.isMirrorY,isFloat:!0,width:P,height:ea,isFlipY:g.isFlipY});pa.ea();b.viewport(0,0,P,ea);C.set("s14");xa.v();M.g(0);la.l(!0,!0);N.N(0);m(xa);Z.flush();M.remove()}}})}}else"JSON"===g.format?m(N.instance({isFloat:!0,isFlipY:g.isFlipY,width:g.width,height:g.height,array:new Float32Array(g.data)})):
m(!1)},Le:d,m:function(){y&&(ua.ea(),N.Oc(),ua.N());N.og();f.slice(0).forEach(function(g){g.remove()});f.splice(0);E=!1;l=0;"undefined"!==typeof Ea&&Ea.m();w=null}};return N}(),Vb=function(){return{instance:function(a){var c=[Da.instance(a),Da.instance(a)],d=[c[1],c[0]],e=d,k={Yf:function(p){e[1].v();e[0].g(p);k.oe()},Zf:function(p){e[1].H();e[0].g(p);k.oe()},oe:function(){e=e===c?d:c},refresh:function(){e[0].refresh();e[1].refresh()},g:function(p){e[0].g(p)},hb:function(p){e[0].hb(p)},xg:function(p){e[1].g(p)},
th:function(){return e[0]},xh:function(){return e[1]},Qb:function(p){e[0].Qb(p);e[1].Qb(p)},remove:function(){e[0].remove();e[1].remove();e=null},sync:function(){k.Zf(0);C.set("s0");Q.l(!1,!1)}};return k}}}(),la=function(){function a(l){var r={ca:null,indices:null};r.ca=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,r.ca);l.bufferData(l.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),l.STATIC_DRAW);r.indices=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r.indices);l.bufferData(l.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2]),l.STATIC_DRAW);return r}var c=null,d=0,e=!1,k=[],p=-2,q=-2,n={reset:function(){q=p=-2},A:function(){e||(c=a(b),n.Da(),e=!0)},instance:function(l){var r=d++,w=l.indices?l.indices.length:0,y="undefined"===typeof l.mode?b.STATIC_DRAW:l.mode,x=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,x);b.bufferData(b.ARRAY_BUFFER,l.ca instanceof Float32Array?l.ca:new Float32Array(l.ca),y);p=r;var A=null,v=null,E=null;if(l.indices){A=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,A);
var f=null;65536>l.indices.length?(f=Uint16Array,v=b.UNSIGNED_SHORT,E=2):(f=Uint32Array,v=b.UNSIGNED_INT,E=4);f=l.indices instanceof f?l.indices:new f(l.indices);b.bufferData(b.ELEMENT_ARRAY_BUFFER,f,y);q=r}var B={Ce:function(K){p!==r&&(b.bindBuffer(b.ARRAY_BUFFER,x),p=r);K&&za.Ic()},ze:function(){q!==r&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,A),q=r)},bind:function(K){B.Ce(K);B.ze()},Og:function(){b.drawElements(b.TRIANGLES,w,v,0)},Pg:function(K,z){b.drawElements(b.TRIANGLES,K,v,z*E)},remove:function(){b.deleteBuffer(x);
l.indices&&b.deleteBuffer(A);B=null}};k.push(B);return B},Da:function(){-1!==p&&(b.bindBuffer(b.ARRAY_BUFFER,c.ca),p=-1);-1!==q&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.indices),q=-1)},l:function(l,r){l&&la.Da();r&&za.Ma();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},pb:function(l){l=l||b;var r=a(l);l.bindBuffer(l.ARRAY_BUFFER,r.ca);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r.indices);za.Mb(l);l.clear(l.COLOR_BUFFER_BIT);l.drawElements(l.TRIANGLES,3,l.UNSIGNED_SHORT,0);l.flush();l.bindBuffer(l.ARRAY_BUFFER,
null);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,null);l.deleteBuffer(r.ca);l.deleteBuffer(r.indices);n.reset();e&&(n.Da(),za.Ma())},ud:function(){var l=b,r=c;l.deleteBuffer(r.ca);l.deleteBuffer(r.indices)},m:function(){n.ud();k.forEach(function(l){l.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);n.reset();e=!1;k.splice(0);d=0}};return n}(),pa=function(){var a=null,c=null,d=null,e=!1,k=[],p={L:-2,sd:1},q={Cb:function(){return e},A:function(){if(!e){a=b.createFramebuffer();
var n=Z.ma();c=n&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=n&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;e=!0}},qh:function(){return c},ff:function(){return d},hc:function(){return b.FRAMEBUFFER},yh:function(){return p},ih:function(){return a},instance:function(n){void 0===n.Fd&&(n.Fd=!1);var l=n.D?n.D:null,r=n.width,w=void 0!==n.height?n.height:n.width,y=a,x=null,A=!1,v=!1,E=0;l&&(r=r?r:l.G(),w=w?w:l.X());var f={he:function(){A||(y=b.createFramebuffer(),A=!0,E=p.sd++)},ve:function(){f.he();
f.v();x=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,x);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,r,w);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,x);b.clearDepth(1)},bind:function(B,K){E!==p.L&&(b.bindFramebuffer(c,y),p.L=E);l&&l.v();K&&b.viewport(0,0,r,w);B&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},wg:function(){E!==p.L&&(b.bindFramebuffer(c,y),p.L=E)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Gg:function(){b.clear(b.COLOR_BUFFER_BIT)},
Hg:function(){b.clear(b.DEPTH_BUFFER_BIT)},gg:function(){b.viewport(0,0,r,w)},v:function(){E!==p.L&&(b.bindFramebuffer(c,y),p.L=E)},rtt:function(B){l=B;p.L!==E&&(b.bindFramebuffer(b.FRAMEBUFFER,y),p.L=E);B.v()},N:function(){b.bindFramebuffer(c,null);p.L=-1},resize:function(B,K){r=B;w=K;x&&(b.bindRenderbuffer(b.RENDERBUFFER,x),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,r,w))},remove:function(){y===a||v||(b.bindFramebuffer(c,y),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,
null,0),x&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(y),x&&b.deleteRenderbuffer(x));v=!0}};n.Fd&&f.ve();k.push(f);return f},N:function(){b.bindFramebuffer(c,null);p.L=-1},pg:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);Z.me();p.L=-1},reset:function(){p.L=-2},ea:function(){0!==p.L&&(b.bindFramebuffer(c,a),p.L=0)},clear:function(){Z.me();b.clear(b.COLOR_BUFFER_BIT)},m:function(){q.N();k.forEach(function(n){n.remove()});
null!==a&&(b.deleteFramebuffer(a),a=null);q.reset();e=!1;k.splice(0);p.sd=1}};return q}(),Z=function(){function a(){n="undefined"===typeof Ka?JEContext:Ka;l=!0}function c(h,t,G){for(var L=0;L<t.length;++L){var u=G.getExtension(t[L]+"_"+h);if(u)return u}return null}function d(){null!==f.Pb&&(clearTimeout(f.Pb),f.Pb=null);f.Ha=!1}function e(h){if(0===f.ua.length){f.Y=b.PIXEL_PACK_BUFFER;f.ua.splice(0);f.ub.splice(0);for(var t=0;t<f.Ta;++t)f.ua.push(b.createBuffer()),f.ub.push(-1);f.ia=0;f.wc=0}b.bindBuffer(f.Y,
f.ua[f.ia]);h.byteLength!==f.ub[f.ia]&&(b.bufferData(f.Y,h.byteLength,b.STREAM_READ),f.ub[f.ia]=h.byteLength);f.Fh=!0}function k(){b.bindBuffer(f.Y,null)}function p(){f.Fa.forEach(function(h){b.deleteSync(h)});f.Fa.splice(0)}function q(){f.ia=(f.ia+1)%f.Ta;++f.wc}var n=null,l=!1,r={Hd:!1,Kc:null,Lc:null,Ld:!1,Bf:!1,Mc:null,Md:!1,Nc:null,Id:!1,Vb:null,tf:!1,Wb:null,uf:!1},w=null,y={ja:!0,la:!0,ec:!0,Zd:!1},x=null,A=!0,v=null,E=null,f={Me:1,Ta:-1,ia:0,wc:0,Ha:!1,ua:[],Fa:[],ub:[],Y:null,Pb:null},B=
"EXT WEBGL OES MOZ_OES WEBKIT_OES KHR".split(" "),K=["OES","MOZ_OES","WEBKIT_OES"],z="undefined"===typeof window?{}:window,D={A:function(){if(l)return!0;D.reset();l||a();var h=b;if(!w.Hd){w.Kc=D.od(h);z.GL_EXT_FLOAT=w.Kc;w.Ld=w.Kc?!0:!1;if(w.Ld||D.ma())w.Lc=D.pd(h),w.Bf=w.Lc?!0:!1,z.GL_EXT_FLOATLINEAR=w.Lc;w.Hd=!0}if(!w.Id){w.Mc=D.mb(h);w.Mc&&(w.Md=!0,z.GL_EXT_HALFFLOAT=w.Mc);if(w.Md||D.ma())w.Nc=D.qd(h),z.GL_EXT_HALFFLOATLINEAR=w.Nc;w.Gh=w.Nc?!0:!1;w.Id=!0}w.Vb=D.md(h);w.tf=w.Vb?!0:!1;z.GL_EXT_COLORBUFFERFLOAT=
w.Vb;w.Wb=D.nd(h);w.uf=w.Wb?!0:!1;z.GL_EXT_COLORBUFFERHALFFLOAT=w.Wb;pa.A();Da.A();if(!D.Oe())return!1;la.A();Da.rf();return!0},reset:function(){w=Object.assign({},r);x=Object.assign({},y)},G:function(){l||a();return n.G()},X:function(){l||a();return n.X()},ma:function(){l||a();return n.ma()},ld:function(h){D.md(h);D.nd(h);D.od(h);D.pd(h);D.mb(h);D.qd(h)},md:c.bind(null,"color_buffer_float",B),nd:c.bind(null,"color_buffer_half_float",B),od:c.bind(null,"texture_float",K),pd:c.bind(null,"texture_float_linear",
K),mb:c.bind(null,"texture_half_float",K),qd:c.bind(null,"texture_half_float_linear",K),fc:function(h){var t=D.mb(h);return t&&t.HALF_FLOAT_OES?t.HALF_FLOAT_OES:h.HALF_FLOAT||h.FLOAT},cf:function(){return E||b.RGBA32F||b.RGBA},df:function(){return v||b.RGBA16F||b.RGBA},$e:function(){return x},bd:function(){return x.ja},Bg:function(){return x.la},Ag:function(){return x.ec},Fe:function(){return x.Zd&&A},re:function(h){A=h;!h&&f.Ha&&(p(),b.bindBuffer(f.Y,null),f.Ha=!1)},Mh:function(){return f.Ha},Nb:function(h,
t,G){function L(){h.bindTexture(h.TEXTURE_2D,null);h.bindFramebuffer(u,null);h.deleteTexture(g);h.deleteFramebuffer(N)}var u=h.FRAMEBUFFER,O=h.NEAREST,N=h.createFramebuffer();h.bindFramebuffer(u,N);var g=h.createTexture();h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,g);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,O);h.texParameteri(h.TEXTURE_2D,
h.TEXTURE_MIN_FILTER,O);h.texImage2D(h.TEXTURE_2D,0,t,3,3,0,h.RGBA,G,null);h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,g,0);if(h.checkFramebufferStatus(h.READ_FRAMEBUFFER||h.FRAMEBUFFER)!==h.FRAMEBUFFER_COMPLETE)return L(),!1;za.Hc(h);h.clearColor(0,0,0,0);h.viewport(0,0,3,3);h.disable(h.DEPTH_TEST);h.clear(h.COLOR_BUFFER_BIT);la.pb(h);h.bindFramebuffer(u,null);za.bb(h);h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,g);la.pb(h);t=new Uint8Array(36);h.readPixels(0,
0,3,3,h.RGBA,h.UNSIGNED_BYTE,t);L();for(G=0;36>G;++G)if(3!==G%4&&3<Math.abs(t[G]-127))return!1;return!0},Yb:function(h){var t={ja:!1,la:!1};h.disable(h.BLEND);h.clearColor(0,0,0,0);h.clear(h.COLOR_BUFFER_BIT);h.RGBA32F&&D.Nb(h,h.RGBA32F,h.FLOAT)&&(t.ja=!0,E=h.RGBA32F);!t.ja&&D.Nb(h,h.RGBA,h.FLOAT)&&(t.ja=!0,E=h.RGBA);var G=D.fc(h);v=null;h.RGBA16F&&D.Nb(h,h.RGBA16F,G)&&(t.la=!0,v=h.RGBA16F);!t.la&&D.Nb(h,h.RGBA,G)&&(t.la=!0,v=h.RGBA);return t},Pe:function(){var h=pa.instance({width:2});h.he();var t=
Da.instance({width:2,isFloat:!0,Fb:3});h.v();t.v();D.flush();b.checkFramebufferStatus(pa.ff())!==b.FRAMEBUFFER_COMPLETE?(Da.$f(),x.ec=!1):x.ec=!0;h.remove();t.remove()},Qe:function(){var h=!1;D.ma()&&(h="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(t){return"undefined"!==typeof b[t]}));x.Zd=h},Oe:function(){var h=D.Yb(b);Object.assign(x,h);if(!x.ja&&!x.la)return!1;D.Pe();D.Qe();return!0},ae:function(h,t,G,L,u){b.readPixels(h,
t,G,L,b.RGBA,b.UNSIGNED_BYTE,u);return Promise.resolve(u,!1)},Kb:function(h,t,G,L,u,O,N){if(!D.Fe())return D.ae(h,t,G,L,u);f.Ta=N||f.Me;e(u);b.readPixels(h,t,G,L,b.RGBA,b.UNSIGNED_BYTE,0);f.Fa[f.ia]=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);D.flush();var g=!1;return new Promise(function(m,I){function M(){if(!f.Ha)return d(),k(),q(),I(),!1;var P=(f.ia+1)%f.Ta;switch(b.clientWaitSync(f.Fa[P],0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:break;default:return d(),b.deleteSync(f.Fa[P]),f.Fa[P]=null,
b.bindBuffer(f.Y,f.ua[P]),b.getBufferSubData(f.Y,0,u),k(),q(),m(u,g),!0}f.Pb=setTimeout(M,0);return!1}d();f.wc+1<f.Ta?(k(),q(),m(u,!1)):(f.Ha=!0,M()||!O||g||(g=!0,O()))})},me:function(){b.viewport(0,0,D.G(),D.X())},flush:function(){b.flush()},m:function(){d();p();Da.m();pa.m();la.m();f.ua.forEach(function(h){b.deleteBuffer(h)});f.ua.splice(0);za.reset();l=!1}};return D}(),Q=la,ua=pa,Y=Da,Ea=function(){function a(h,t,G,L){f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,L?f.NEAREST_MIPMAP_NEAREST:
f.LINEAR);var u=null;if(null!==G)try{u=f.getError();if("FUCKING_BIG_ERROR"===u)return!1;f.texImage2D(f.TEXTURE_2D,0,h,4,4,0,f.RGBA,t,G);u=f.getError();if(u!==f.NO_ERROR)return!1}catch(O){return!1}L&&f.generateMipmap(f.TEXTURE_2D);f.clear(f.COLOR_BUFFER_BIT);Q.pb(f);u=f.getError();if("FUCKING_BIG_ERROR"===u)return!1;f.readPixels(0,0,2,2,f.RGBA,f.UNSIGNED_BYTE,w);u=f.getError();u===f.INVALID_OPERATION&&"undefined"!==typeof f.PIXEL_PACK_BUFFER&&(f.bindBuffer(f.PIXEL_PACK_BUFFER,null),f.readPixels(0,
0,2,2,f.RGBA,f.UNSIGNED_BYTE,w),u=f.getError());if(u!==f.NO_ERROR)return!1;G=!0;for(L=0;16>L;++L)G=G&&4>Math.abs(w[L]-127);G&&(l.Wd=t,l.Ed=h);return G}function c(h,t){return B.ja&&a(h,f.FLOAT,new Float32Array(y),t)?(n=q.Yc,!0):!1}function d(h,t,G){if(!B.la)return!1;var L=Da.Le(y),u=Z.mb(f);if(u&&u.HALF_FLOAT_OES&&a(h,u.HALF_FLOAT_OES,L,t)||f.HALF_FLOAT&&a(h,f.HALF_FLOAT,L,t))return n=q.Pa,!0;L=new Float32Array(y);if(a(h,f.FLOAT,L,t))return n=q.Pa,!0;f.bindTexture(f.TEXTURE_2D,G);f.texImage2D(f.TEXTURE_2D,
0,f.RGBA,2,2,0,f.RGBA,f.UNSIGNED_BYTE,null);f.bindFramebuffer(l.kb,D);Da.td(f,G,2,2,L,!1,!1);f.bindFramebuffer(l.kb,null);f.bindTexture(f.TEXTURE_2D,G);return a(h,null,null,t)?(n=q.Pa,!0):!1}function e(h,t,G){r=!0;if(d(h,!0,G)||c(t,!0))return!0;r=!1;return d(h,!1,G)||c(t,!1)?!0:!1}function k(h){if(n===q.S){f=h||b;n=q.RGBA8;r=!0;Z.ld(f);B||(B=Z.Yb(f));ua.reset();D=f.createFramebuffer();l.kb=f.DRAW_FRAMEBUFFER||f.FRAMEBUFFER;f.bindFramebuffer(l.kb,null);f.clearColor(0,0,0,0);f.viewport(0,0,2,2);C.S();
K=C.bb(f);h=f.createTexture();f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,h);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);z=h;var t=h=f.RGBA,G=f.RGBA16F,L=f.RGBA32F;L&&(h=L);G&&(t=G);if((G||L)&&e(t,h,z))return p(),!0;h=t=f.RGBA;if(e(t,h,z))return p(),!0;n=q.RGBA8;p();return!1}}function p(){f.deleteProgram(K.ya);f.deleteTexture(z);z=K=null}for(var q={S:-1,Yc:3,
Pa:2,RGBA8:0},n=q.S,l={Wd:null,Ed:null,kb:null},r=!0,w=new Uint8Array(16),y=Array(64),x=0;4>x;++x)for(var A=0;4>A;++A){var v=0===(A+x)%2?1:0,E=4*x+A;y[4*E]=v;y[4*E+1]=v;y[4*E+2]=v;y[4*E+3]=v}var f=null,B=null,K=null,z=null,D=null;return{Ee:function(h){k(h);return r},ad:function(h,t){n===q.S&&(typeof("undefined"!==t)&&(B=t),k(h));return n!==q.RGBA8},Jh:function(h){k(h);return n===q.Yc},Cf:function(h){k(h);return n===q.Pa},rh:function(h){k(h);return l.Wd},ef:function(h){k(h);return l.Ed},m:function(){f=
null;r=!0;n=q.S;B=null}}}(),Ob=function(){return{instance:function(a){function c(){x&&x.remove();x=Y.instance({isFloat:!1,isPot:!1,width:a.size*a.Z[0],height:a.size*a.Z[1]})}var d=null,e=!1,k=!1,p=null,q=!1,n=!1,l=null,r="undefined"===typeof a.preprocessing?!1:a.preprocessing,w="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(e=!0,na&&void 0!==na.ye&&(a.mask=na.ye+a.mask),d=Y.instance({isFloat:!1,url:a.mask}));var y=!1;a.customInputShader&&(y="s50",C.$c({name:"_",id:y,
h:a.customInputShader,mi:["uSource"],precision:"lowp"}),C.M(y,[{type:"1i",name:"_",value:0}]));switch(r){case "sobel":l="s39";q=!0;break;case "meanNormalization":l="s40";q=!0;break;case "grayScale":l="s36";q=!1;break;case "grayScaleTilt":l="s37";n=!0;q=!1;break;case "rgbGrayTilt":l="s38";n=!0;q=!1;break;case "copy":l=y?y:"s0";break;case "inputLightRegulation":l=y?y:"s36";p=dc.instance({Dd:w,Vd:a.size,Td:a.nBlurPass,$:!1});k=!0;break;case "inputMix0":l="none";p=ec.instance({u:w,pa:a.varianceMin,fa:a.blurKernelSizePx,
gain:a.gain||1,$:!1});k=!0;break;case "inputMix1":l="none";p=fc.instance({u:w,pa:a.varianceMin,fa:a.blurKernelSizePx,gain:a.gain||1,$:!1});k=!0;break;case "inputCut4":l="none";p=gc.instance({u:w,pa:a.varianceMin,fa:a.blurKernelSizePx,gain:a.gain||1,Ya:a.isNormalized||!1,Cc:a.overlap||0,$:!1});w*=p.gf();k=!0;break;case "direct":case "none":case "abort":l="abort";break;default:l="s4"}w=Math.ceil(w);n&&C.M(l,[{name:"u29",type:"1f",value:a.tilt}]);e&&(l+="Mask");var x=null;c();var A={G:function(){return a.size},
hf:function(){return w},ic:function(){return A.G()},lf:function(){return k?p.Wa():x},Rb:function(v){a.Z=v;c()},V:function(v){ua.ea();if("abort"===l)return v.g(0),v;"none"!==l&&(C.set(l),q&&C.J("u30",1/a.size),x.H(),e&&d.g(1),Q.l(!1,!1),x.g(0),v=x);k&&p.process(v)},m:function(){x.remove();e&&d.remove()}};return A}}}(),Pb=function(){return{instance:function(a){function c(){if(D.Na){k.input&&(k.input.remove(),k.xb.remove());var t=a.size*a.sparsity;z=Math.log(t/a.size)/Math.log(2);k.input=Y.instance({isMipmap:!0,
isFloat:!0,isPot:!0,width:t*a.Z[0],height:t*a.Z[1],sc:z});k.xb=Y.instance({isFloat:!0,isPot:!0,width:a.size*a.Z[0],height:a.size*a.Z[1]})}}function d(){k.xa&&k.xa.remove();k.xa=Y.instance({isFloat:!0,isPot:!q,isLinear:!q&&n.isLinear,width:a.size*a.Z[0],height:a.size*a.Z[1]})}function e(t){n.buffer.forEach(function(G,L){n.results[L][0]=t[0][G];n.results[L][1]=t[1][G];n.results[L][2]=t[2][G];n.results[L][3]=t[3][G]});return n.results}a.normalize=a.normalize||!1;var k={input:null,bias:null,xb:null,xa:null,
Bc:null,zc:null,Ac:null},p=null,q=!0,n={type:"undef",I:null,isLinear:!1,buffer:[],results:[],yb:!1},l=-1,r=a.isReorganize?a.isReorganize:!1,w=a.kernelsCount?!0:!1,y=[a.Xa?"s32":"s31",a.Xa?"s34":"s33","s35"][a.shiftRGBAMode||0],x={isEnabled:!1},A=1/a.size;a.zf?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.Ib.ic(),q=!1):"full"===a.connectivityUp&&(a.sparsity=a.Ib.ic());var v={elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],E=a.sparsity*
a.sparsity,f=!1,B=a.size,K="";if(a.maxPooling){switch(a.maxPooling.size){case 2:K="s41";break;case 4:K="s42"}f=!0;B/=a.maxPooling.size;k.zc=Y.instance({isFloat:!0,isPot:!1,width:B})}var z=-1,D=null;q&&d();k.bias=Y.instance(a.bias);var h={G:function(){return a.size},ic:function(){return B},vd:function(){return a.classesCount},Ae:function(t){p.g(t)},Qf:function(){a.remap&&a.remap.isEnabled&&(x={isEnabled:!0,If:Y.instance(a.remap.maskTexture),Ka:a.remap.layers.map(function(t){return a.parent.jf(t)}),
depth:a.remap.depth})},ag:function(){switch(a.connectivityUp){case "direct":D=hc.instance(a.connectivity);break;case "square":D=ic.instance(a.connectivity);break;case "squareFast":D=jc.instance(a.connectivity,a.activation);break;case "full":D=kc.instance(Object.assign({Xa:a.Xa},a.connectivity));break;case "conv":l=a.kernelsCount,D=lc.instance(a.connectivity),r&&(k.Bc=Y.instance({width:B,isFloat:!0,isFlipY:!1,isPot:!1}))}c()},V:function(t,G){p=t;D.Na?(k.input.H(),w&&k.bias.g(2),D.V(x),k.input.g(0),
k.input.Ye(z),k.xb.H(),w?C.set("s0"):(C.set(y),C.J("u4",E),k.bias.g(1)),k.input.Be(z,0),Q.l(!1,!1),C.set(v),k.xa.v(),k.xb.g(0),Q.l(!1,!1)):(k.xa.H(),k.bias.g(1),D.V());if(q)return G=k.xa,f&&(k.zc.H(),G.g(0),C.set(K),C.W("u14",A,A),Q.l(!1,!1),G=k.zc),r&&(k.Bc.v(),C.set("s24"),C.W("u18",l,B/l),G.g(0),Q.l(!1,!1),G=k.Bc),G.g(0),G;var L=k.xa;if(a.normalize||n.yb)t=a.normalize,C.set(n.yb?"s9":"s8"),C.J("u10",t?A:1),k.Ac.H(),L.g(0),Q.l(!1,!1),L=k.Ac;t=null;switch(n.type){case "cpuRGBA2Float":L.gd(!1);G?
t=h.Rf(L).then(n.I):(L=h.Sf(L),n.I(L));break;case "cpuMeanFloat":L.gd(!0);if(G)t=L.Uf().then(n.I);else{L=L.Vf();for(var u=0;u<L.length;++u);n.I(L)}break;case "gpuRawAvg":case "gpuRaw":L.g(0);case "none":null!==n.I&&n.I(L)}G&&null===t&&(t=Promise.resolve());return t},Rb:function(t){a.Z=t;c();d()},ig:function(t){t&&(n.type=t.ab||"none",n.I=t.$a||null,n.isLinear=t.Gb?!0:!1);d();t="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var G=0,L=0,u=0;G<t;++G)n.buffer.push(L+
(a.size-1-u)*a.size),n.results.push([-1,-1,-1,-1]),++L,L===a.size&&(L=0,++u);n.yb="gpuRawAvg"===n.type||"cpuMeanFloat"===n.type;if(a.normalize||n.yb)k.Ac=Y.instance({isFloat:!0,isPot:!0,width:a.size})},Rf:function(t){return t.Tf().then(e)},Sf:function(t){t=t.$d();e(t);return n.results},m:function(){for(var t in k){var G=k[t];G&&G.remove()}D&&(D.m(),D=null)}};a.Ib&&h.ag(a.Ib);return h}}}(),hc=function(){return{instance:function(a){var c=Y.instance(a.weights);return{Na:!0,sb:function(){return 1},m:function(){c.remove()},
pf:function(){return c},V:function(){C.set("s30");c.g(1);Q.l(!1,!1)}}}}}(),kc=function(){return{instance:function(a){var c=a.fromLayerSize,d=Y.instance(a.weights),e=a.Xa?"s27":"s26";return{Na:!0,sb:function(){return c},m:function(){d.remove()},V:function(k){if(k.isEnabled){C.set("s28");k.If.g(3);for(var p=Math.min(k.Ka.length,k.depth),q=0;q<p;++q)k.Ka[q].Ae(4+q)}else C.set(e);C.J("u8",a.toLayerSize);C.J("u9",a.fromLayerSize);d.g(1);Q.l(!1,!1)}}}}}(),ic=function(){return{instance:function(a){for(var c=
a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,k=e*d,p=k/c,q=c/d,n=0,l=0,r=0,w=Array(e*d*e*d*4),y=Array(e*d*e*d*4),x=Array(c*c),A=0;A<x.length;++A)x[A]=0;A=Math.floor(e/2);for(var v=.5/d,E=.5/c,f=.5/k,B=0;B<d;++B)for(var K=Math.round(B*q),z=0;z<d;++z){var D=Math.round(z*q),h=B/d,t=z/d;h+=v;t+=v;for(var G=0;G<e;++G){var L=K+G-A;0>L&&(L+=c);L>=c&&(L-=c);for(var u=0;u<e;++u){var O=n/k,N=l/k,g=D+u-A;0>g&&(g+=c);g>=c&&(g-=c);var m=L/c,I=g/c;N=1-N-1/k;m+=E;I+=E;O+=f;N+=f;var M=B*e+G,P=z*e+u;P=d*e-P-1;M=
P*d*e+M;w[4*M]=O;w[4*M+1]=N;w[4*M+2]=m;w[4*M+3]=I;I=x[g*c+L]++;M=I%p;m=L*p+M;g=g*p+(I-M)/p;g=c*p-1-g;g=g*c*p+m;y[4*g]=O;y[4*g+1]=N;y[4*g+2]=h;y[4*g+3]=t;++n>=k&&(n=0,++l);++r}}}x=null;var ea=Y.instance(a.weights);delete a.weights.data;var xa=Y.instance({width:k,isFloat:!0,array:new Float32Array(y),isPot:!0});y=null;var Fa=Y.instance({width:k,isFloat:!0,array:new Float32Array(w),isPot:!0});w=null;return{Na:!0,sb:function(){return p},m:function(){xa.remove();Fa.remove();ea.remove()},V:function(){C.set("s25");
ea.g(1);Fa.g(2);Q.l(!1,!1)}}}}}(),lc=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,k=a.inputScale||[1,1],p=Y.instance(a.weights);return{Na:!0,sb:function(){return e},Ch:function(){return d},pf:function(){return p},m:function(){p.remove()},V:function(){C.set("s29");C.cg("u28",k);C.J("u26",c);C.J("u27",d);C.J("u8",a.toLayerSize);C.J("u9",a.fromLayerSize);p.g(1);Q.l(!1,!1)}}}}}(),jc=function(){return{instance:function(a,c){var d=a.fromLayerSize,
e=a.toLayerSize,k=a.toSparsity,p=a.stride?a.stride:1,q=k*e/d,n=e<d,l=d/e,r=Y.instance(a.weights),w="s51"+[d.toString(),e.toString(),k.toString(),p.toString(),c].join("_");C.We(w)||(a=bc.Ze(c,"gl_FragColor","gl_FragColor"),e=[{type:"1f",name:"u8",value:e},{type:"1f",name:"u32",value:p}],n&&e.push({type:"1f",name:"u9",value:d}),d=[(n?q:k).toFixed(1),a],n&&d.push(l.toFixed(1)),C.sf(n?"s47":"s46",w,d),C.M(w,e.concat([{type:"1i",name:"u6",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u7",value:3}])));
return{Na:!1,sb:function(){return q},m:function(){r.remove()},V:function(){C.set(w);r.g(3);Q.l(!1,!1)}}}}}(),dc=function(){return{instance:function(a){var c=a.Td?a.Td:3,d=a.Dd?a.Dd:64,e=a.Vd?a.Vd:64,k=a.$?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var p=Y.instance(a),q=Y.instance(a),n=Y.instance(a),l=Y.instance(a),r=Y.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),w=1/d;return{process:function(y){C.set("s43");l.v();Q.l(k,!1);C.set("s44");for(var x=0;x<c;++x)p.v(),C.W("u14",w,0),Q.l(k,!1),
n.v(),l.g(0),Q.l(k,!1),q.v(),p.g(0),C.W("u14",0,w),Q.l(k,!1),l.v(),n.g(0),Q.l(k,!1),x!==c-1&&q.g(0);C.set("s45");r.v();y.g(0);q.g(1);l.g(2);Q.l(k,!1);r.g(0)},Wa:function(){return r}}}}}(),ec=function(){return{instance:function(a){function c(w){return Y.instance({isFloat:w,width:d.u,isPot:!1,isFlipY:!1})}var d=Object.assign({pa:.1,fa:9,u:128,gain:1,$:!1},a),e=c(!1),k=[c(!1),c(!1),c(!1)],p=[c(!1),c(!1),c(!1)],q=c(!0),n=[e,p[0],p[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.fa-1)/2).toFixed(2)).replace("2.2222",(1/d.u).toFixed(6));var l="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.pa.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),r={u1:0};C.eb([{id:"s53",
name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:r,i:["u1"],precision:"lowp"},{id:"s54",name:"_",h:a,j:r,i:["u1","u33"],precision:"lowp"},{id:"s55",name:"_",h:l,j:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){C.set("s53");e.H();Q.l(d.$,!1);C.set("s54");for(var w=0;3>w;++w)C.W("u33",1,0),k[w].v(),n[w].g(0),
Q.l(!1,!1),C.W("u33",0,1),p[w].v(),k[w].g(0),Q.l(!1,!1);C.set("s55");q.v();e.g(0);p[0].g(1);p[1].g(2);p[2].g(3);Q.l(!1,!1);q.g(0)},Wa:function(){return q}}}}}(),fc=function(){return{instance:function(a){function c(r){return Y.instance({isFloat:r,width:d.u,isPot:!1,isFlipY:!1})}var d=Object.assign({pa:.1,fa:9,u:128,gain:1,$:!1},a),e=c(!1),k=c(!1),p=c(!1),q=c(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.fa-1)/2).toFixed(2)).replace("2.2222",(1/d.u).toFixed(6));var n="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.pa.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),l={u1:0};C.eb([{id:"s56",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
j:l,i:["u1"],precision:"lowp"},{id:"s57",name:"_",h:a,j:l,i:["u1","u33"],precision:"lowp"},{id:"s58",name:"_",h:n,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){C.set("s56");e.H();Q.l(d.$,!1);C.set("s57");C.W("u33",1,0);k.v();e.g(0);Q.l(!1,!1);C.W("u33",0,1);p.v();k.g(0);Q.l(!1,!1);C.set("s58");q.v();e.g(0);p.g(1);Q.l(!1,!1);q.g(0)},Wa:function(){return q}}}}}(),gc=function(){return{instance:function(a){function c(w){return Y.instance({isFloat:w,width:d.u,isPot:!1,isFlipY:!1})}
var d=Object.assign({pa:.1,fa:9,u:128,gain:1,Cc:0,Ya:!1,$:!1},a),e=c(!1),k=null,p=null,q=null;d.Ya&&(k=c(!1),p=c(!1),q=c(!0));a={u1:0};var n=[{id:"s59",name:"_",h:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",
d.Cc.toFixed(4)),j:a,i:["u1"],precision:"lowp"}];if(d.Ya){var l="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.fa-1)/2).toFixed(2)).replace("2.2222",(1/d.u).toFixed(6)),r="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.pa.toFixed(4)).replace("2.2222",d.gain.toFixed(4));n.push({id:"s60",name:"_",h:l,j:a,i:["u1","u33"],precision:"lowp"},{id:"s61",name:"_",h:r,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}C.eb(n);return{process:function(){C.set("s59");e.H();Q.l(d.$,!1);d.Ya?(C.set("s60"),C.W("u33",1,0),k.v(),e.g(0),Q.l(!1,!1),C.W("u33",0,1),p.v(),k.g(0),Q.l(!1,!1),C.set("s61"),q.v(),e.g(0),p.g(1),Q.l(!1,!1),q.g(0)):e.g(0)},gf:function(){return 2-d.Cc},Wa:function(){return d.Ya?q:e}}}}}(),X={Bd:function(){return X.ed()?
document.createElement("video"):!1},Va:function(a,c){a[c]=!0;a.setAttribute(c,"true")},Ie:function(){var a=!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a},He:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},Ef:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},Dg:function(){return X.cd()||X.He()},cd:function(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},eh:function(){return X.Ie()?X.Ef()?window.innerHeight/window.innerWidth*45:45:45},ed:function(){return navigator.mediaDevices&&
navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},$h:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},dd:function(a){if(!a)return a;var c=null;if(a.video){var d=function(e){return e&&"object"===typeof e?Object.assign({},e):e};c={};"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c=
{audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&X.Zc(c,a.deviceId);return c},Zc:function(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)},pe:function(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a},Ne:function(a){function c(x){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(A,v){return Math.abs(A-x)-Math.abs(v-x)})}function d(x){var A=X.dd(a);x=x(A);k.push(x);e(x)}function e(x){if(x.video&&
x.video.facingMode&&x.video.facingMode.exact){var A=x.video.facingMode.exact;x=X.dd(x);delete x.video.facingMode.exact;x.video.facingMode.ideal=A;k.push(x)}}var k=[];if(!a||!a.video)return k;e(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var p=c(a.video.width.ideal).slice(0,3),q=c(a.video.height.ideal).slice(0,3),n={},l=0;for(n.ra=void 0;l<p.length;n={ra:n.ra},++l){n.ra=p[l];var r={},w=0;for(r.qa=void 0;w<q.length;r={qa:r.qa},++w)if(r.qa=q[w],n.ra!==a.video.width.ideal||
r.qa!==a.video.height.ideal){var y=Math.max(n.ra,r.qa)/Math.min(n.ra,r.qa);y<4/3-.1||y>16/9+.1||d(function(x,A){return function(v){v.video.width.ideal=x.ra;v.video.height.ideal=A.qa;return v}}(n,r))}}}d(function(x){return X.pe(x)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(x){delete x.video.width.ideal;delete x.video.height.ideal;return x}),d(function(x){delete x.video.width;delete x.video.height;return x}));a.video.facingMode&&(d(function(x){delete x.video.facingMode;
return x}),a.video.width&&a.video.height&&d(function(x){X.pe(x);delete x.video.facingMode;return x}));k.push({audio:a.audio,video:!0});return k},Sd:function(a){a.volume=0;X.Va(a,"muted");if(X.cd()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;X.Va(a,"muted")},5)}},se:function(a,c,d){return null===
a?Promise.resolve():new Promise(function(e,k){if(a.srcObject&&a.srcObject.getVideoTracks){var p=a.srcObject.getVideoTracks();1!==p.length?k("INVALID_TRACKNUMBER"):(p=p[0],c?X.get(a,e,k,d):(p.stop(),e()))}else k("BAD_IMPLEMENTATION")})},zd:function(a,c,d,e){function k(q){p||(p=!0,d(q))}var p=!1;return navigator.mediaDevices.getUserMedia(e).then(function(q){function n(){setTimeout(function(){if(a.currentTime){var r=a.videoHeight;if(0===a.videoWidth||0===r)k("VIDEO_NULLSIZE");else{r={Ge:null,hg:null,
Jf:null};try{var w=q.getVideoTracks()[0];w&&(r.Jf=w,r.Ge=w.getCapabilities(),r.hg=w.getSettings())}catch(y){}p||c(a,q,r)}}else k("VIDEO_NOTSTARTED")},700)}function l(){a.removeEventListener("loadeddata",l,!1);var r=a.play();X.Sd(a);"undefined"===typeof r?n():r.then(function(){n()}).catch(function(){k("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=q:(a.src=window.URL.createObjectURL(q),a.videoStream=q);X.Sd(a);a.addEventListener("loadeddata",l,!1)}).catch(function(q){k(q)})},
mf:function(a,c){var d=c||X.Bd();return new Promise(function(e,k){X.get(d,e,k,a)})},get:function(a,c,d,e){if(!a)return d&&d("VIDEO_NOT_PROVIDED"),!1;if(!X.ed())return d&&d("MEDIASTREAMAPI_NOT_FOUND"),!1;X.Va(a,"autoplay");X.Va(a,"playsinline");e&&e.audio?a.volume=0:X.Va(a,"muted");X.Ke(e).then(function(){X.zd(a,c,function(){function k(q){if(0===q.length)d("NO_VALID_MEDIASTREAM_FALLBACK_CONSTRAINTS");else{var n=q.shift();X.zd(a,c,function(){k(q)},n)}}var p=X.Ne(e);k(p)},e)})},Ke:function(a){if(!a||
!a.video||!a.video.facingMode)return Promise.resolve("NO_VIDEO_CONSTRAINTS");if(a.video.deviceId)return Promise.resolve("DEVICEID_ALREADY_SET");var c=a.video.facingMode;c=c.exact||c.ideal;if(!c)return Promise.resolve("NO_FACINGMODE");var d={user:[],environment:["camera2 0"]}[c];return d&&0!==d.length?new Promise(function(e){X.Ad(function(k){k?(k=k.find(function(p){var q=p.label;return q?d.some(function(n){return q.includes(n)}):!1}))?(a.video.deviceId={exact:k.deviceId},e("SUCCESS")):e("NO_PREFERRED_DEVICE_FOUND"):
e("NO_DEVICES_FOUND")})}):Promise.resolve("NO_PREFERRED_CAMERAS")},Ad:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},Cg:function(a,c,d){var e={};e[c]=d;c=[];c.push(e);a.applyConstraints({advanced:c}).catch(function(){})}},
ra=function(){function a(E,f,B,K,z,D,h){if(!A)if(h===D.length)z();else{switch(D[h]){case "A":B();break;case "D":E();break;case "S":f().then(function(t,G){v.Ob();a(E,f,B,G?null:K,z,D,++h)}).catch(function(t){console.log("An error occurred in the WebAR loop: ",t);z()});return;case "R":K&&K()}a(E,f,B,K,z,D,++h)}}var c={n:5,vc:1,Pd:0,qb:[35,49],lb:[2,200],k:.7,qg:200,Pf:.05},d=-1,e=null,k=-1,p=-1,q=0,n=-1,l=-1,r=0,w=0,y=c.lb[1],x=Math.log(2),A=!0,v={kf:function(){switch(d){case -1:return-1;case 0:return l+
e.Pd;case 1:return r}},kh:function(E){return Math.pow(Math.min(Math.max(n,0),e.n-1)/(e.n-1),E||1)},A:function(E){e=Object.assign({},c,E);n=l=e.vc;d=0;v.reset()},Ob:function(E){E=("undefined"===typeof E?Date.now():E)||0;var f=Math.min(Math.max(E-w,e.lb[0]),e.lb[1]);y=f;w=E;var B=-1===k?0:e.k;k=Math.min(Math.max(1E3/f,5),120)*(1-B)+k*B;E-p>e.qg&&5<++q&&(f=e.k,n=n*(1-f)+(k<e.qb[0]?l-1:k>e.qb[1]?l+1:l)*f,Math.abs(n-l)>1-e.Pf&&(f=Math.min(Math.max(Math.round(n),0),e.n-1),f!==l&&(n=l=f,k=(e.qb[1]-e.qb[0])/
2)),p=E)},Dc:function(E,f,B,K,z,D){A=!1;a(E,f,B,K,z,D,0)},stop:function(){A=!0},Fc:function(E){r=E;d=1},Pc:function(){d=0;v.reset()},reset:function(){y=c.lb[1];p=k=-1;q=0},li:function(E,f,B){B=Math.exp(-x*y/B);return(1-B)*E+B*f},bf:function(){return y}};return v}(),Ia=function(){function a(){d(E+A.tc);f.port.postMessage("DONE")}function c(){D.gb=0===A.fb?K(d):K(e)}function d(u){z.Ia&&null!==v&&(u-=E,u=Math.min(Math.max(u,A.hd[0]),A.hd[1]),E+=u,p(),h.isEnabled&&h.Za&&z.aa&&E-h.pc>A.Tc&&(r(),h.pc=E),
v(E))}function e(u){z.Ia&&(D.timeout=setTimeout(d.bind(null,u),A.fb))}function k(){v=null;z.Ia=!1;p()}function p(){D.gb&&(window.cancelAnimationFrame(D.gb),D.gb=null);D.timeout&&(window.clearTimeout(D.timeout),D.timeout=null)}function q(u){u&&!z.aa?(z.aa=!0,B&&ra.Pc(),f.port.postMessage("STOP"),Z.re(!0),c()):!u&&z.aa&&(z.aa=!1,B&&ra.Fc(1),Z.re(!1),f.port.postMessage("START"))}function n(u){u.target.hidden?G():t()}function l(u,O,N){O=u.createShader(O);u.shaderSource(O,N);u.compileShader(O);return O}
function r(){h.Za=!1;var u=h.ka,O=h.vb,N=h.wb,g=h.Y;u.uniform1f(h.Cd,Math.random());h.Ja?O.beginQueryEXT(g,N):u.beginQuery(g,N);u.drawElements(u.POINTS,1,u.UNSIGNED_SHORT,0);h.Ja?O.endQueryEXT(g):u.endQuery(g);Z.flush();y().then(function(m){0===m||isNaN(m)?(h.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",m)):(m=A.ue*A.Sc*1E3/m,h.Sb=(h.Sb+1)%A.Oa,h.qc[h.Sb]=m,++h.Od>A.Oa&&(h.Db.set(h.qc),h.Db.sort(function(I,M){return I-M}),m=
h.Db[Math.floor(A.Oa/2)],h.ob=Math.max(h.ob,m),A.Rc(m/h.ob)),h.Za=!0)}).catch(function(){h.Za=!0})}function w(u){var O=h.ka,N=h.vb,g=h.wb;g=h.Ja?N.hh(g,N.QUERY_RESULT_AVAILABLE_EXT):O.getQueryParameter(g,O.QUERY_RESULT_AVAILABLE);O=O.getParameter(N.GPU_DISJOINT_EXT);g?u(!O):setTimeout(w.bind(null,u),.1)}function y(){return new Promise(function(u,O){w(function(N){if(N){N=h.ka;var g=h.vb,m=h.wb;N=h.Ja?g.getQueryObjectEXT(m,g.QUERY_RESULT_EXT):N.getQueryParameter(m,N.QUERY_RESULT);u(N)}else O()})})}
var x={Jd:!0,hd:[1,200],tc:20,fb:0,Sc:50,ue:240,Tc:3E3,Oa:3,Rc:null},A=null,v=null,E=0,f=null,B=!1,K=null,z={va:!1,aa:!0,oc:!1,nc:!1,mc:!1,Ia:!1},D={gb:null,timeout:null},h={isEnabled:!1,Za:!1,ka:null,vb:null,wb:null,Y:null,Cd:null,Ja:!0,pc:0,Od:0,qc:null,Db:null,Sb:0,ob:0},t=q.bind(null,!0),G=q.bind(null,!1),L={A:function(u){A=Object.assign(x,u);Object.assign(z,{aa:!0,va:!0,Ia:!1});K=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==A.Rc){u=document.createElement("canvas");
u.setAttribute("width","1");u.setAttribute("height","1");var O={antialias:!1};u=u.getContext("webgl2",O)||u.getContext("webgl",O);if(O=u.getExtension("EXT_disjoint_timer_query")||u.getExtension("EXT_disjoint_timer_query_webgl2")){h.ka=u;h.vb=O;h.isEnabled=!0;h.Ja=O.beginQueryEXT?!0:!1;var N=l(u,u.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),g=l(u,u.FRAGMENT_SHADER,"precision lowp float;uniform float u39;void main(){vec4 a=u39*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",
A.Sc.toString())),m=u.createProgram();u.attachShader(m,N);u.attachShader(m,g);u.linkProgram(m);N=u.getAttribLocation(m,"a0");h.Cd=u.getUniformLocation(m,"u39");u.useProgram(m);u.enableVertexAttribArray(N);m=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,m);u.bufferData(u.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),u.STATIC_DRAW);u.vertexAttribPointer(N,4,u.FLOAT,!1,16,0);m=u.createBuffer();u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,m);u.bufferData(u.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),u.STATIC_DRAW);
u.disable(u.DEPTH_TEST);u.disable(u.DITHER);u.disable(u.STENCIL_TEST);u.viewport(0,0,1,1);m=h.Ja?O.createQueryEXT():u.createQuery();h.wb=m;h.Y=O.TIME_ELAPSED_EXT||u.TIME_ELAPSED;h.pc=-A.Tc;h.qc=new Float32Array(A.Oa);h.Db=new Float32Array(A.Oa);h.ob=0;h.Sb=0;h.Od=0;h.Za=!0}}if(A.Jd){u=!1;try{if("undefined"===typeof SharedWorker){var I=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
A.tc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),M=new Worker(I);M.addEventListener("message",a);f={Yd:M,port:M};z.oc=!0}else{var P=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
A.tc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),ea=new SharedWorker(P);ea.port.start();ea.port.addEventListener("message",a);f={Yd:ea,port:ea.port};z.nc=!0}u=!0}catch(xa){}u&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",n):(window.addEventListener("blur",G),window.addEventListener("focus",t)),window.addEventListener("pagehide",
G),window.addEventListener("pageshow",t),z.mc=!0)}B="undefined"!==typeof ra},m:function(){k();z.mc&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",n):(window.removeEventListener("blur",G),window.removeEventListener("focus",t)),window.removeEventListener("pagehide",G),window.removeEventListener("pageshow",t),z.mc=!1);z.nc?(f.port.close(),z.nc=!1):z.oc&&(f.Yd.terminate(),z.oc=!1);Object.assign(z,{aa:!0,va:!1,Ia:!1});v=null},Gf:function(){return z.aa},update:function(u){Object.assign(A,
u)},Dc:function(u){z.va||L.A({});p();z.Ia=!0;v=u;z.aa&&c()},stop:k};return L}(),Ta=function(){function a(y,x){var A=y[0]-.5;y=y[1]-.5;var v=x[0]-.5;x=x[1]-.5;return A*A+y*y-(v*v+x*x)}var c={Ud:4,Hb:[1.5,1.5,2],R:[.1,.1,.1],de:1,u:-1,O:-1,lg:2,Of:1,Ec:!0,Te:.8},d=null,e=[],k=[],p=[],q=[0],n=[.5,.5,1],l=null,r=0,w=[0,0,0];return{A:function(y){d=Object.assign({},c,y);e.splice(0);k.splice(0);p.splice(0);r=0;y=d.Hb[0]*d.R[0];var x=d.Hb[1]*d.R[1],A=1/(1+d.Hb[2]*d.R[2]),v=d.de*Math.min(d.u,d.O),E=v/d.u;
v/=d.O;var f=.5*d.Te;f*=f;for(var B=0;B<d.Ud;++B){var K=[];k.push(K);var z=Math.pow(A,B),D=E*z,h=v*z;z=D*d.Of;p.push(z);var t=D*y,G=h*x;D/=2;h/=2;for(var L=1+(1-D-D)/t,u=1+(1-h-h)/G,O=0;O<u;++O)for(var N=h+O*G,g=N-.5,m=0;m<L;++m){var I=D+m*t,M=I-.5;M*M+g*g>f||(I=[I,N,z],e.push(I),K.push(I))}d.Ec&&K.sort(a);l=e}d.Ec&&e.sort(a)},get:function(y){var x=l.length;if(0===x)return n;for(;y>=q.length;)q.push(0);q[y]>=x&&(q[y]=0);var A=l[Math.floor(q[y])%x];q[y]=(q[y]+1/d.lg)%x;if(0===r)return A;w[0]=A[0];
w[1]=A[1];w[2]=r;return w},Uh:function(y){y>=q.length||(q[y]=Math.floor(Math.random()*l.length))},Gc:function(y){r=y;if(0===r)l=e;else{for(var x=p.length,A=x-1,v=0;v<x;++v)if(p[v]<=y){A=v;break}l=k[A]}},reset:function(){for(var y=e.length/q.length,x=0;x<q.length;++x)q[x]=Math.floor(x*y);r=0;l=e}}}(),da=function(){function a(f,B,K,z){return Math.max(0,K>f?f+B/2-(K-z/2):K+z/2-(f-B/2))}function c(f){return!n.Gd(f)}function d(f,B,K){for(var z=f.length;v.length<z;)v.push({na:[0,0],Eb:[0,0],ha:[0,0],za:0,
scale:0,Ua:0,cb:0});z=f.length;for(var D=0;D<z;++D){var h=f[D],t=v[D],G=B[D].rz,L=Math.cos(G),u=Math.sin(G);t.za=G;t.Ua=L;t.cb=u;t.ha[0]=h.x;t.ha[1]=h.y/K;t.scale=h.ba;t.na[0]=h.ba*n.jd[0];t.na[1]=h.ba*n.jd[1];t.Eb[0]=t.na[0]*t.na[0];t.Eb[1]=t.na[1]*t.na[1]}}function e(f,B,K){var z=Math.abs(-f.cb*(K-f.ha[1])-f.Ua*(B-f.ha[0]));B=Math.abs(f.Ua*(K-f.ha[1])-f.cb*(B-f.ha[0]));return 1>=z*z/f.Eb[0]+B*B/f.Eb[1]}function k(f,B,K,z){var D=f[K];d(f,B,z);var h=v[K];return f.some(function(t,G){if(!(t=G===K||
D.wa>t.wa||3>t.wa||!(0<a(D.x,D.ba*A,t.x,t.ba*A))||!(0<a(D.y,D.ba*z*A,t.y,t.ba*z*A)))){t=v[G];h.scale>t.scale?G=h:(G=t,t=h);for(var L=0,u=0,O=n.Ue,N=0;N<O;++N)for(var g=((N+.5)/O*2-1)*t.na[1],m=0;m<O;++m){var I=((m+.5)/O*2-1)*t.na[0],M=t.ha[0]+(-g*t.cb+I*t.Ua);I=t.ha[1]+(g*t.Ua+I*t.cb);e(t,M,I)&&(++L,e(G,M,I)&&++u)}t=u/L<n.Rd}return t?!1:!0})}function p(f){return f.isDetected}var q={P:1,Rd:.3,jd:[1,1],Ue:6,fe:.3,Gd:null,Af:!0},n=null,l=0,r=null,w=!1,y=0,x=0,A=Math.sqrt(2),v=[],E={A:function(f){n=Object.assign({},
q,f);r=[0]},Nd:function(){return 1!==n.P},wd:function(){return l},Df:function(){return w},ta:function(){return n.P},Ah:function(){return r},Ff:function(f){return r.includes(f)},update:function(f,B){var K=r;if(K.length>f)K.splice(0,K.length-f);else for(;K.length<f;)K.push(0);if(1!==n.P)if(B.every(c)){B=y;for(var z=0;z<f;++z)K[z]=B,B=(B+1)%n.P;y=B}else{z=Math.round(n.fe*f);z=Math.max(1,z);for(var D=y,h=0,t=0;h<f;++h){if(c(B[D])&&++t>z){do++D===n.P&&(D=0);while(c(B[D]))}K[h]=D;D=(D+1)%n.P}y=D}},Ob:function(f){l=
r[f];x=(.5+l)/n.P;w=r.lastIndexOf(l)===f;return l},jg:function(f,B,K){return 1===n.P?!1:k(f,B,l,K)},qe:function(f){n.Af&&1===n.P||C.J(f,x)},Xe:function(f){return f.find(p)},fh:function(f){return f.findIndex(p)},dh:function(f){var B=E.Xe(f);if(!B||f.every(p))return Ta.Gc(0),!1;Ta.Gc(B.s);return!0},Se:function(f){for(var B=new Float32Array(f.length*n.P),K=0,z;K<n.P;++K)for(z=0;z<f.length;++z)B[K*f.length+z]=f[z];return B},dc:function(f){for(var B=[],K=0;K<n.P;++K){var z=B,D=z.push,h=void 0,t=f,G={};
for(h in t){var L=h;var u=t[h];var O=typeof u;u=["string","boolean","number"].includes(O)?u:"object"!==O?null:ArrayBuffer.isView(u)?u.slice():JSON.parse(JSON.stringify(u));G[L]=u}D.call(z,G)}return B}};return E}(),$a=function(){var a={wf:!0,isLinear:!0,uc:[4,11]};return{rd:function(c,d,e){return d.isDetected?Math.floor(d.s*c):(c=Math.floor(Math.log2(c/4)),c=Math.min(Math.max(c,4),9),Math.max(e,Math.pow(2,c)))},instance:function(c){var d=Object.assign({},a,c),e=[],k=null,p=-1,q=null,n=!1;for(c=d.uc[0];c<=
d.uc[1];++c)e[c]=null;return{H:function(l,r){r!==p&&(k&&k.remove(),k=Y.instance({isLinear:d.isLinear,isPot:!0,width:r}));if(n=d.wf&&r<.5*l){l=Math.floor(Math.log2(l));var w=d.uc;l=Math.min(Math.max(l,w[0]),w[1]);w=l;if(!e[w]){var y=Y.instance({isPot:!0,isMipmap:!0,Kd:!0,width:Math.pow(2,w)});e[w]={D:y,Qd:-1}}l=e[l];q=l.D;l.Qd!==r&&(q.ke(Math.log2(r)),l.Qd=r)}else q=k;p=r;q.H()},g:function(l){q.g(l);n&&q.rb()},remove:function(){k&&k.remove();e.forEach(function(l){l&&l.D.remove()})}}}}}(),na={da:0,
Xf:{threshold:.7,nScaleLevels:2,scale0Factor:.8,nDetectsPerLoopRange:[1,4],overlapFactors:[2,2,3],scanCenterFirst:!0,nDetectsPerLoop:-1,multiDetectionThresholdFactors:[.5,.6],translationScalingFactors:[.2,.2,.5],isCleanGLStateAtEachIteration:!0,enableAsyncReadPixels:!1,animateProcessOrder:"DSAR"},ng:50,Lf:.4,Kf:8,Mf:.3,kg:{translationFactorRange:[.002,.005],rotationFactorRange:[.015,.1],qualityFactorRange:[.8,.95],alphaRange:[.03,1],followZRotAlphaFactor:.01,minDisplacementPx:1},we:.2,xe:2,Nf:8,sg:20},
qa={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1920,minHeight:480,maxHeight:1920,rotate:0,flipX:!1},ia={xc:-3,Hf:-1,error:-2,ready:1,play:2,pause:3},ma=ia.xc,J=null,mc={Ab:!1,Jc:null,element:null,D:null,F:[0,0],B:[.5,0,0,.5],Jb:0,Sa:null,zb:!1},R=null,nc={outputScaleFactor:2,Ra:null,Ub:null,antialias:!0,Xc:"./",Wc:null,Vc:"./",Uc:null,ga:null,da:na.da,Xd:na.da,Bb:!1,Ea:!0},aa=null,sa=null,La=1,mb={Zb:-1},W=null,oc={u:0,O:0,F:[0,0],T:null},ca={Aa:null,buffer:null,R:null,
ce:null,ee:1},wa={T:null,La:null},oa={track:null,depth:null},Sa=null,va=null,jb=[],lb=[],ub={VERSION:"1.1.0",init:function(a){function c(){if(ma!==ia.error&&2===++e){Oa();Fb();Na();if(R.Ra){ma=ia.ready;var k=va[0];R.Ra(!1,{GL:b,canvasElement:R.ga,videoTexture:J.D.get(),videoTransformMat2:J.B,maxFacesDetected:da.ta(),videoElement:J.element,RGBDBuf:k.RGBDBuf,RGBDRes:k.RGBDRes});ib()}hb()}}if(ma!==ia.xc)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;ma=ia.Hf;J=Object.assign({},mc);
R=Object.assign({},nc);W=Object.assign({},oc);"undefined"!==typeof a.antialias&&(R.antialias=a.antialias);a.callbackReady&&(R.Ra=a.callbackReady);a.callbackTrack&&(R.Ub=a.callbackTrack);"undefined"!==typeof a.animateDelay&&(R.da=a.animateDelay);"undefined"!==typeof a.NNTrackPath&&(R.Xc=a.NNTrackPath);"undefined"!==typeof a.NNTrack&&(R.Wc=a.NNTrack);"undefined"!==typeof a.NNDepthPath&&(R.Vc=a.NNDepthPath);"undefined"!==typeof a.NNDepth&&(R.Uc=a.NNDepth);"undefined"!==typeof a.followZRot&&(R.Ea=a.followZRot?
!0:!1);if(!a.canvasId&&!a.canvas)return Ma("NO_CANVASID"),!1;R.ga=a.canvas?a.canvas:document.getElementById(a.canvasId);if(!R.ga)return Ma("INVALID_CANVASID"),!1;W.u=R.ga.width;W.O=R.ga.height;if(!W.u||!W.O)return Ma("INVALID_CANVASDIMENSIONS"),!1;aa=Object.create(na.Xf);a.scanSettings&&Object.assign(aa,a.scanSettings);var d=1;"undefined"!==typeof a.maxFacesDetected&&(d=Math.max(1,a.maxFacesDetected));if(d>na.Kf)return Ma("MAXFACES_TOOHIGH"),!1;da.A({P:d,Rd:na.Lf,fe:na.Mf,Gd:Cb});for(d=0;d<da.ta();++d)jb.push(new Float32Array(na.Nf)),
lb.push(0);Ia.A({Jd:a.isKeepRunningOnWinFocusLost||!1,fb:R.da});ra.A({vc:0,n:aa.nDetectsPerLoopRange[1]-aa.nDetectsPerLoopRange[0]+1,Pd:aa.nDetectsPerLoopRange[0]});-1!==aa.nDetectsPerLoop?ra.Fc(aa.nDetectsPerLoop):ra.Pc();ca.R=aa.translationScalingFactors.slice(0);sa=Object.create(na.kg);a.stabilizationSettings&&Object.assign(sa,a.stabilizationSettings);var e=0;a.videoSettings&&a.videoSettings.videoElement?bb(a.videoSettings.videoElement,c):(a.videoSettings&&Object.assign(qa,a.videoSettings),Hb(a.onWebcamAsk,
a.onWebcamGet,function(k){bb(k,c)}));Promise.all([Eb(R.Wc,R.Xc,Wb),Eb(R.Uc,R.Vc,Xb)]).then(function(k){if(!Yb())return!1;var p=k[1];oa.track=new vb({Ka:k[0].layers,ab:"gpuRawAvg",$a:Zb});oa.depth=new vb({Ka:p.layers,ab:"gpuRawAvg",Gb:!0,$a:$b});C.eb([{id:"s63",name:"_",Ba:"attribute vec2 a0;uniform mat2 u40;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u40*a0;}",Ca:["a0"],sa:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1",
"u40"],precision:"lowp"},{id:"s64",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",Ba:"attribute vec2 a0;uniform sampler2D u41;uniform mat2 u40;uniform vec2 u42;uniform float u43,u44;varying vec2 vv0;void main(){vec4 a=texture2D(u41,vec2(.25,u43));vec2 d=a.gb,f=a.a*u42;float b=cos(u44),c=sin(u44);vec2 g=mat2(b,c,-c,b)*a0,h=d+g*.5*f,i=h-.5;vv0=vec2(.5,.5)+2.*u40*i,gl_Position=vec4(a0,0.,1.);}",Ca:["a0"],sa:[2],i:"u1 u41 u42 u43 u44 u40".split(" "),precision:"lowp"},
{id:"s65",name:"_",h:"uniform sampler2D u45,u41;uniform vec3 u46,u47;uniform float u48,u49,u43,u50,u44,u51;const vec4 e=vec4(.25);void main(){vec4 d=texture2D(u45,vec2(.625,.625)),a=texture2D(u41,vec2(.25,u43));float f=dot(d,e);bool g=f>u49;a.r<-.5?a.r+=1.:g?a.r=2.:a.r>u48?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r=mix(-2.,a.r,u50);if(a.r<.9)a=vec4(1.,u46);else{a.r*=step(1.9,a.r);float h=dot(e,texture2D(u45,vec2(.875,.875))),i=dot(e,texture2D(u45,vec2(.125,.625))),j=dot(e,texture2D(u45,vec2(.375,.625))),b=cos(u44),c=sin(u44);vec2 k=mat2(b,c*u51,-c/u51,b)*vec2(h,i);a.gba+=vec3(k,j)*u47*a.a;}gl_FragColor=a;}",
Ba:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",i:"u45 u41 u46 u48 u47 u50 u44 u51 u49 u43".split(" ")},{id:"s66",name:"_",Ba:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u45;uniform float u50;const vec4 e=vec4(.25);void main(){float a=dot(e,texture2D(u45,vec2(.125,.875))),b=dot(e,texture2D(u45,vec2(.375,.875))),c=dot(e,texture2D(u45,vec2(.625,.875))),d=dot(e,texture2D(u45,vec2(.625,.625)));vec3 f=vec3(a,b,c);gl_FragColor=vec4(f,d*u50);}",i:["u45",
"u50"]},{id:"s62",name:"_",h:"uniform sampler2D u41;uniform vec2 u52;uniform float u53;varying vec2 vv0;void main(){float f=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.5,vv0.x);vec4 a=texture2D(u41,vv0+u52);a.a=mix(a.a*u53,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",i:["u41","u53","u52"]},{id:"s67",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",Ba:"attribute vec2 a0;uniform mat2 u40;uniform vec3 u54;uniform vec2 u42;uniform float u44;varying vec2 vv0;void main(){vec2 c=u54.xy*.5+vec2(.5),d=u54.z*u42;float a=cos(u44),b=sin(u44);vec2 f=mat2(a,b,-b,a)*a0,g=c+f*.5*d,h=g-.5;vv0=vec2(.5,.5)+2.*u40*h,gl_Position=vec4(a0,0.,1.);}",
Ca:["a0"],sa:[2],i:["u1","u54","u42","u44","u40"],precision:"lowp"},{id:"s68",name:"_",h:"uniform sampler2D u55,u56;varying vec2 vv0;void main(){vec3 a=texture2D(u55,vv0).rgb;float b=dot(texture2D(u56,vv0),vec4(.25));gl_FragColor=vec4(a,b*.5+.5);}",Ca:["a0"],sa:[2],i:["u55","u56"],precision:"lowp"}]);Db();k=da.ta();if(1!==k)throw Error("Multi detection is not implemented for depth retrieval");ca.buffer=new Uint8Array(16*k);Sa=da.dc({jb:0,x:0,y:0,ba:1,rx:0,ry:0,za:0,wa:0});k=oa.depth.yd()*R.outputScaleFactor;
va=da.dc({detected:0,isDetected:!1,x:0,y:0,s:1,xRaw:0,yRaw:0,sRaw:1,rx:0,ry:0,rz:0,RGBDBuf:new Uint8Array(k*k*4),RGBDRes:k});da.dc({dx:0,dy:0,cc:0,$b:0,ac:0,bc:0});ob();nb();c()});return!0},destroy:function(){Ia.m();return new Promise(function(a){ub.toggle_pause(!0,!0).finally(function(){oa.track&&oa.track.m();oa.depth&&oa.depth.m();Ka.m();va=Sa=null;oa.track=null;oa.depth=null;jb.splice(0);lb.splice(0);W.T=null;ca.Aa=null;J.D=null;ma=ia.xc;wa.T=null;wa.La=null;a()}).catch(function(){})})},toggle_videoStream:function(a){return J.zb||
!J.element?Promise.resolve():X.se(J.element,a,J.Sa)},toggle_pause:function(a,c){if(!Za())return Promise.reject("NOT_READY");c=c?ub.toggle_videoStream(!a):Promise.resolve();a?zb():c.then(function(){hb()});return c},update_videoSettings:function(a){zb();return new Promise(function(c,d){X.se(J.element,!1,J.Sa).then(function(){Object.assign(qa,a);Hb(null,null,function(e){bb(e,function(){Oa();Na();hb();c()})})}).catch(d)})},toggle_slow:function(a){Za()&&ma===ia.play&&(a&&!R.Bb?(R.Xd=R.da,aa.nDetectsPerLoop=
1,this.set_animateDelay(na.ug),R.Bb=!0):!a&&R.Bb&&(aa.nDetectsPerLoop=-1,this.set_animateDelay(R.Xd),R.Bb=!1))},set_animateDelay:function(a){R.da=a;Ia.update({fb:R.da})},resize:function(){if(!Za())return!1;var a=R.ga.width,c=R.ga.height;if(!pb()&&a===W.u&&c===W.O)return!1;W.u=a;W.O=c;C.S();ob();nb();Oa();Na();return!0},set_inputTexture:function(a,c,d){J.F[0]=c;J.F[1]=d;J.D=Y.instance({width:c,height:d,jc:a});J.Ab=!0;Oa();ib();Na()},reset_GLState:function(){ib();W.T.remove();ca.Aa.remove();wa.T.remove();
wa.La.remove();Db()},render_video:function(){ua.N();C.set("s63");b.viewport(0,0,W.u,W.O);J.D.g(0);Q.l(!0,!0)},reset_inputTexture:function(){J.Ab=!1;J.D=J.Jc;pb();Oa();Na()},get_videoDevices:function(a){return X.Ad(a)},is_winFocus:function(){return Ia.Gf()},set_scanSettings:function(a){Object.assign(aa,a);-1!==aa.nDetectsPerLoop?ra.Fc(aa.nDetectsPerLoop):ra.Pc();ob();nb()},set_stabilizationSettings:function(a){Object.assign(sa,a)},set_videoOrientation:function(a,c){Za()&&(qa.flipX=c,qa.rotate=a,Oa(),
Na())},update_videoElement:function(a,c){bb(a?a:J.element,function(){Fb();Oa();Na();c&&c()})},create_new:function(){return window.WEBARROCKSFACEDEPTHGEN()}};return ub};window.WEBARROCKSFACEDEPTH=window.WEBARROCKSFACEDEPTHGEN();
;return WEBARROCKSFACEDEPTH||window.WEBARROCKSFACEDEPTH;})();