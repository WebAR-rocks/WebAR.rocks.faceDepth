 /**
 * WebAR.rocks.faceDepth - https://github.com/WebAR-rocks/WebAR.rocks.faceDepth
 *
 * Copyright 2022 WebAR.rocks ( https://webar.rocks )
 *
 * 
*/

/* eslint-enable */
/* prettier-ignore */
var Ea="function"==typeof Object.defineProperties?Object.defineProperty:function(J,N,S){if(J==Array.prototype||J==Object.prototype)return J;J[N]=S.value;return J};function tb(J){J=["object"==typeof globalThis&&globalThis,J,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var N=0;N<J.length;++N){var S=J[N];if(S&&S.Math==Math)return S}throw Error("Cannot find global object");}var ub=tb(this);
function Hb(J,N){if(N)a:{var S=ub;J=J.split(".");for(var ba=0;ba<J.length-1;ba++){var fa=J[ba];if(!(fa in S))break a;S=S[fa]}J=J[J.length-1];ba=S[J];N=N(ba);N!=ba&&null!=N&&Ea(S,J,{configurable:!0,writable:!0,value:N})}}function Ib(J){var N=0;return function(){return N<J.length?{done:!1,value:J[N++]}:{done:!0}}}function Jb(J){var N="undefined"!=typeof Symbol&&Symbol.iterator&&J[Symbol.iterator];return N?N.call(J):{next:Ib(J)}}
Hb("Symbol",function(J){function N(fa){if(this instanceof N)throw new TypeError("Symbol is not a constructor");return new S("jscomp_symbol_"+(fa||"")+"_"+ba++,fa)}function S(fa,ya){this.u=fa;Ea(this,"description",{configurable:!0,writable:!0,value:ya})}if(J)return J;S.prototype.toString=function(){return this.u};var ba=0;return N});
Hb("Symbol.iterator",function(J){if(J)return J;J=Symbol("Symbol.iterator");for(var N="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),S=0;S<N.length;S++){var ba=ub[N[S]];"function"===typeof ba&&"function"!=typeof ba.prototype[J]&&Ea(ba.prototype,J,{configurable:!0,writable:!0,value:function(){return Wb(Ib(this))}})}return J});function Wb(J){J={next:J};J[Symbol.iterator]=function(){return this};return J}
Hb("Promise",function(J){function N(P){this.Z=0;this.Ta=void 0;this.u=[];var V=this.Aa();try{P(V.resolve,V.reject)}catch(ha){V.reject(ha)}}function S(){this.u=null}function ba(P){return P instanceof N?P:new N(function(V){V(P)})}if(J)return J;S.prototype.Z=function(P){if(null==this.u){this.u=[];var V=this;this.Aa(function(){V.Ta()})}this.u.push(P)};var fa=ub.setTimeout;S.prototype.Aa=function(P){fa(P,0)};S.prototype.Ta=function(){for(;this.u&&this.u.length;){var P=this.u;this.u=[];for(var V=0;V<P.length;++V){var ha=
P[V];P[V]=null;try{ha()}catch(ka){this.Sa(ka)}}}this.u=null};S.prototype.Sa=function(P){this.Aa(function(){throw P;})};N.prototype.Aa=function(){function P(ka){return function(za){ha||(ha=!0,ka.call(V,za))}}var V=this,ha=!1;return{resolve:P(this.sg),reject:P(this.Sa)}};N.prototype.sg=function(P){if(P===this)this.Sa(new TypeError("A Promise cannot resolve to itself"));else if(P instanceof N)this.we(P);else{a:switch(typeof P){case "object":var V=null!=P;break a;case "function":V=!0;break a;default:V=
!1}V?this.Qf(P):this.Rd(P)}};N.prototype.Qf=function(P){var V=void 0;try{V=P.then}catch(ha){this.Sa(ha);return}"function"==typeof V?this.xe(V,P):this.Rd(P)};N.prototype.Sa=function(P){this.Sd(2,P)};N.prototype.Rd=function(P){this.Sd(1,P)};N.prototype.Sd=function(P,V){if(0!=this.Z)throw Error("Cannot settle("+P+", "+V+"): Promise already settled in state"+this.Z);this.Z=P;this.Ta=V;this.Jf()};N.prototype.Jf=function(){if(null!=this.u){for(var P=0;P<this.u.length;++P)ya.Z(this.u[P]);this.u=null}};var ya=
new S;N.prototype.we=function(P){var V=this.Aa();P.ab(V.resolve,V.reject)};N.prototype.xe=function(P,V){var ha=this.Aa();try{P.call(V,ha.resolve,ha.reject)}catch(ka){ha.reject(ka)}};N.prototype.then=function(P,V){function ha(Ka,Oa){return"function"==typeof Ka?function(cb){try{ka(Ka(cb))}catch(gb){za(gb)}}:Oa}var ka,za,db=new N(function(Ka,Oa){ka=Ka;za=Oa});this.ab(ha(P,ka),ha(V,za));return db};N.prototype.catch=function(P){return this.then(void 0,P)};N.prototype.ab=function(P,V){function ha(){switch(ka.Z){case 1:P(ka.Ta);
break;case 2:V(ka.Ta);break;default:throw Error("Unexpected state: "+ka.Z);}}var ka=this;null==this.u?ya.Z(ha):this.u.push(ha)};N.resolve=ba;N.reject=function(P){return new N(function(V,ha){ha(P)})};N.race=function(P){return new N(function(V,ha){for(var ka=Jb(P),za=ka.next();!za.done;za=ka.next())ba(za.value).ab(V,ha)})};N.all=function(P){var V=Jb(P),ha=V.next();return ha.done?ba([]):new N(function(ka,za){function db(cb){return function(gb){Ka[cb]=gb;Oa--;0==Oa&&ka(Ka)}}var Ka=[],Oa=0;do Ka.push(void 0),
Oa++,ba(ha.value).ab(db(Ka.length-1),za),ha=V.next();while(!ha.done)})};return N});Hb("Math.log2",function(J){return J?J:function(N){return Math.log(N)/Math.LN2}});function Xb(J,N){J instanceof String&&(J+="");var S=0,ba=!1,fa={next:function(){if(!ba&&S<J.length){var ya=S++;return{value:N(ya,J[ya]),done:!1}}ba=!0;return{done:!0,value:void 0}}};fa[Symbol.iterator]=function(){return fa};return fa}Hb("Array.prototype.keys",function(J){return J?J:function(){return Xb(this,function(N){return N})}});
var Yb="function"==typeof Object.assign?Object.assign:function(J,N){for(var S=1;S<arguments.length;S++){var ba=arguments[S];if(ba)for(var fa in ba)Object.prototype.hasOwnProperty.call(ba,fa)&&(J[fa]=ba[fa])}return J};Hb("Object.assign",function(J){return J||Yb});Hb("Object.is",function(J){return J?J:function(N,S){return N===S?0!==N||1/N===1/S:N!==N&&S!==S}});
Hb("Array.prototype.includes",function(J){return J?J:function(N,S){var ba=this;ba instanceof String&&(ba=String(ba));var fa=ba.length;S=S||0;for(0>S&&(S=Math.max(S+fa,0));S<fa;S++){var ya=ba[S];if(ya===N||Object.is(ya,N))return!0}return!1}});
Hb("String.prototype.includes",function(J){return J?J:function(N,S){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(N instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(N,S||0)}});
function Zb(J,N,S){J instanceof String&&(J=String(J));for(var ba=J.length,fa=0;fa<ba;fa++){var ya=J[fa];if(N.call(S,ya,fa,J))return{Ed:fa,ue:ya}}return{Ed:-1,ue:void 0}}Hb("Array.prototype.find",function(J){return J?J:function(N,S){return Zb(this,N,S).ue}});Hb("Array.prototype.findIndex",function(J){return J?J:function(N,S){return Zb(this,N,S).Ed}});
Hb("Promise.prototype.finally",function(J){return J?J:function(N){return this.then(function(S){return Promise.resolve(N()).then(function(){return S})},function(S){return Promise.resolve(N()).then(function(){throw S;})})}});
const WEBARROCKSFACEDEPTHGEN=function(){function J(a){var c=null,d=null,e=null,h=0,n=this;this.i=function(u){this.cg(u.Va);e.Re({Bb:u.Bb,xc:u.xc||!1,zb:u.zb})};this.mf=function(u){return c[u]};this.cg=function(u){var r=null;h=u.length;c=u.map(function(l,v){l=Object.assign({},l,{index:v,parent:n,Db:r,Cf:v===h-1});return r=v=0===v?$b.instance(l):ac.instance(l)});d=c[0];e=c[h-1];c.forEach(function(l,v){0!==v&&l.Tf()})};this.R=function(u){u.b(0);var r=u;c.forEach(function(l){r=l.R(r,!1)});return r};this.dc=function(){return d.v()};
this.Ad=function(){return e.v()};this.fc=function(){return e.qf()};this.xd=function(){return e.xd()};this.h=function(){c&&(c.forEach(function(u){u.h()}),e=d=c=null,h=0)};"undefined"!==typeof a&&this.i(a)}function N(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function S(a,c,d){var e=1,h=0;for(d=c+d-1;d>=c;--d)h+=e*N(a,d),e*=2;return h}function ba(a){var c=null;a=a.data;"undefined"===typeof btoa?c=Buffer.from(a,"base64").toString("latin1"):c=atob(a);a=c.length;for(var d=new Uint8Array(a),e=0;e<a;++e)d[e]=
c.charCodeAt(e);return d}function fa(a){return"string"===typeof a?JSON.parse(a):a}function ya(a){if("undefined"===typeof fa(a).nb){var c=fa(a);a=c.ne;var d=c.nf,e=c.n;c=ba(c);for(var h=new Float32Array(e),n=new Float32Array(d),u=a+d+1,r=0;r<e;++r){var l=u*r,v=0===N(c,l)?1:-1,A=S(c,l+1,a);l=l+1+a;for(var E=n.length,y=0,q=l;q<l+E;++q)n[y]=N(c,q,!0),++y;for(E=l=0;E<d;++E)l+=n[E]*Math.pow(2,-E-1);h[r]=0===l&&0===A?0:v*(1+l)*Math.pow(2,1+A-Math.pow(2,a-1))}a=h}else if(e=fa(a),a=e.nb,0===a)a=new Uint8Array(e.nb);
else{d=e.n;e=ba(e);c=new Uint32Array(d);for(h=0;h<d;++h)c[h]=S(e,h*a,a);a=c}return a}function P(){return-1!==[qa.ready,qa.play,qa.pause].indexOf(va)}function V(){if(va===qa.play)return!1;va=qa.play;eb.stop();cb(0)}function ha(){if(va!==qa.play)return!1;Ca.stop();eb.stop();va=qa.pause;return!0}function ka(a,c,d,e,h){a=4*(2*c+a)+d;return e+(ma.buffer[a]/255+ma.buffer[a+8]/65025)*(h-e)}function za(){b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Wa.uf()}function db(a,c,d,e,h,n,u){return ja.enableAsyncReadPixels?
ia.Fb(a,c,d,e,h,n,u):ia.ce(a,c,d,e,h)}function Ka(){var a=na.oa();Fa.I();b.viewport(0,0,2,2*a);I.set("s52");ma.va.b(0);Y.g(!1,!1);return db(0,0,2,2*a,ma.buffer,Kb,1)}function Oa(a,c){return Aa.track.dc()*(.5*a/c)}function cb(){va!==qa.pause&&(ja.isCleanGLStateAtEachIteration&&(I.nd(),Y.reset(),Y.za(),b.disable(b.DEPTH_TEST),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1),I.Ia()),Ca.Ac(gb,Ka,bc,Kb,cc,ja.animateProcessOrder))}function gb(){Fa.$();if(!L.rb)if(L.qb)L.element.needsUpdate&&(L.D.ke(L.element.videoWidth,
L.element.videoHeight),L.D.Lb(L.element.arrayBuffer),L.element.needsUpdate=!1);else{var a=L.element.currentTime,c=a-L.Eb;0>c&&(L.Eb=a,c=0);1E3*c<wa.xg||(L.Eb+=c,L.D.refresh())}a=Ca.pf();na.update(a,La);for(c=0;c<a;++c){na.Jb(c);I.set("s54");var d=La[na.yd()];T.Ba&&I.C("u41",d.rz);na.qe("u40");ea.O.S();L.D.b(0);ma.va.b(1);Y.g(!1,!1);Aa.track.R(ea.O)}Ca.Jb();a=La[0];a.isDetected&&(I.set("s57"),Ga.O.S(),L.D.b(0),I.C("u41",a.rz),I.hg("u51",a.x,a.y,a.s),Y.g(!1,!1),Aa.depth.R(Ga.O))}function Kb(){Fa.ug();
ja.isCleanGLStateAtEachIteration&&(Fa.reset(),da.reset(),b.enable(b.DEPTH_TEST));T.Ob&&T.Ob(na.Od()?La:La[0]);ja.isCleanGLStateAtEachIteration&&(b.disable(b.BLEND),Y.reset(),Y.za())}function bc(){for(var a=0;a<na.oa();++a)if(na.Hf(a)){var c=a,d=hb[c],e=[c],h=La[c],n=vb[c],u=2*c;d.cb=ka(1,u,3,0,1);h.detected=Pa.ia(h.detected,d.cb,wa.Ae);h.isDetected=Lb(h);d.x=ka(0,u,1,-1,1);d.y=ka(0,u,2,-1,1);d.W=ka(0,u,3,0,1);if(d.cb<ja.multiDetectionThresholdFactors[0]*ja.threshold)d.ra=Math.floor(d.ra/2),T.Ba&&
(h.rz=0,h.ry=0);else{var r=ma.ee;d.Bc=ka(1,u,0,-r[0],r[0]);d.Cc=ka(1,u,1,-r[1],r[1]);d.ta=ka(1,u,2,-r[2],r[2]);u=d.W*ma.ge;e.Zb=d.x-h.xRaw;e.$b=d.y-h.yRaw;e.Xb=u-h.sRaw;e.Ub=d.Bc-h.rx;e.Vb=d.Cc-h.ry;e.Wb=T.Ba?d.ta:d.ta-h.rz;r=Ca.gf();e=(1-wb.qc(Da.translationFactorRange[0],Da.translationFactorRange[1],Math.sqrt(e.Zb*e.Zb+e.$b*e.$b+e.Xb*e.Xb)/r))*(1-wb.qc(Da.rotationFactorRange[0],Da.rotationFactorRange[1],Math.sqrt(e.Ub*e.Ub+e.Vb*e.Vb+e.Wb*e.Wb)/r))*wb.qc(Da.qualityFactorRange[0],Da.qualityFactorRange[1],
d.cb);c=n[++xb[c]%n.length]=e;for(r=0;r<n.length;++r)c=Math.min(c,n[r]);c=Math.max(.5,c);e=Math.min(c,e);n=Pa.ia(Da.alphaRange[1],Da.alphaRange[0],Math.pow(e,wa.Be));h.xRaw=Pa.ia(h.xRaw,d.x,n);h.yRaw=Pa.ia(h.yRaw,d.y,n);h.sRaw=Pa.ia(h.sRaw,u,n);h.rx=Pa.ia(h.rx,d.Bc,n);h.ry=Pa.ia(h.ry,d.Cc,n);h.rz=T.Ba?h.rz+Da.followZRotAlphaFactor*n*d.ta:Pa.ia(h.rz,d.ta,n);u=h.sRaw*yb.Tb*Math.sin(h.ry);n=h.xRaw+Math.cos(h.rz)*u;u=h.yRaw+Math.sin(h.rz)*u/Xa;c=h.sRaw;e=Da.minDisplacementPx;r=Oa(n-h.x,c);var l=Oa(u-
h.y,c/Xa);r*r+l*l>e*e&&(h.x=n,h.y=u,h.s=c);++d.ra}}}function cc(){va===qa.play&&eb.Ac(cb)}function Mb(){ea.O=da.instance({isPot:!0,isFloat:!1,width:Aa.track.dc()});var a={width:2,height:na.oa(),isFloat:!0,isPot:!1,array:na.We(new Float32Array([0,.5,.5,0,0,0,0,0]))};ma.va=dc.instance(a);Ga.O=da.instance({isPot:!0,isFloat:!1,width:Aa.depth.dc()});Ga.Ha=da.instance({isPot:!0,isFloat:!1,width:Aa.depth.Ad()*T.outputScaleFactor})}function zb(){I.K("s54",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u38",
value:1},{type:"2f",name:"u39",value:ea.B},{type:"1f",name:"u40",value:.5},{type:"1f",name:"u41",value:0}]);I.K("s55",[{type:"1i",name:"u42",value:0},{type:"1i",name:"u38",value:1},{type:"1f",name:"u45",value:wa.rg},{type:"1f",name:"u46",value:ja.threshold},{type:"3f",name:"u44",value:[ma.M[0]*ea.B[0],ma.M[1]*ea.B[1],ma.M[2]]},{type:"1f",name:"u40",value:.5},{type:"1f",name:"u47",value:1},{type:"1f",name:"u41",value:0}]);I.K("s56",[{type:"1i",name:"u42",value:0}]);I.K("s52",[{type:"1i",name:"u38",
value:0},{type:"1f",name:"u50",value:ea.B[0]},{type:"2f",name:"u49",value:[0,.5/na.oa()]}]);I.K("s57",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u39",value:ea.B}]);I.K("s58",[{type:"1i",name:"u52",value:1},{type:"1i",name:"u53",value:0}])}function Ab(){ea.B[0]=1;ea.B[1]=ea.A/ea.J;ib.i({Cb:ja.overlapFactors,Wd:ja.nScaleLevels,A:ea.A,J:ea.J,fe:ja.scale0Factor,M:ma.M,Dc:ja.scanCenterFirst})}function Nb(a,c,d){return new Promise(function(e){a?d("string"===typeof a?JSON.parse(a):a,e):ob.get(c,function(h){h=
JSON.parse(h);d(h,e)})})}function ec(a,c){var d=a.exportData;ma.ee=d.rotationEulerAnglesFactors;if(d.translationScalingFactors){var e=d.translationScalingFactors,h=ja.translationScalingFactors;ma.M[0]=e[0]*h[0];ma.M[1]=e[1]*h[1];ma.M[2]=e[2]*h[2]}ma.ge=d.dsMean?1+d.dsMean:1;yb.Tb=.7;"undefined"!==typeof d.fgDisplaceXFactor&&(yb.Tb=d.fgDisplaceXFactor);c(a)}function fc(a,c){c(a)}function gc(){if(Wa.i({bb:T.aa,width:ea.A,height:ea.J,debug:!1,wc:function(){Ya("GLCONTEXT_LOST")},antialias:T.antialias,
premultipliedAlpha:!0}))return!0;Ya("GL_INCOMPATIBLE");return!1}function hc(){var a=na.yd(),c=La[a];ma.va.ag(1);b.viewport(0,a,1,1);I.set("s55");T.Ba&&I.C("u41",c.rz);na.qe("u40");var d=1,e=na.mg(hb,La,ea.A/ea.J);na.Od()&&(e&&(d=0,hb[a].ra=0,c.isDetected=!1,c.detected=0),I.C("u47",d));I.ig("u43",ib.get(a));Y.g(!1,!1);if(na.Gf()||e)b.viewport(1,a,1,1),I.set("s56"),I.C("u47",d),Y.g(!1,!1);ma.va.sync()}function ic(a){var c=La[0];I.set("s58");Ga.Ha.S();a.b(0);Ga.O.b(1);Y.g(!1,!1);I.set("s1");Fa.I();Ga.Ha.b(0);
a=Ga.Ha.v();Y.g(!1,!1);db(0,0,a,a,c.RGBDBuf,null,1)}function Ob(){L.D&&L.D.remove();L.qb=L.element.isFakeVideo?!0:!1;if(L.qb){var a=Pb();a={isFlipY:!1,array:L.element.arrayBuffer,width:a.w,height:a.Da,isKeepArray:!0}}else a={F:L.element};L.Ic=da.instance(Object.assign({isPot:!1,isLinear:!0,isFloat:!1},a));L.D=L.Ic}function Za(){var a=[{type:"mat2",name:"u37",value:L.j}];I.K("s53",[{type:"1i",name:"u1",value:0}].concat(a));I.K("s54",a);I.K("s57",a)}function $a(){var a=[.5,.5],c=L.B[1]/L.B[0];Xa=Wa.T()/
Wa.v();90===Math.abs(Ba.rotate)&&(c=1/c);c>Xa?a[1]*=Xa/c:a[0]*=c/Xa;I.K("s55",[{name:"u48",type:"1f",value:Xa}]);L.j[0]=0;L.j[1]=0;L.j[2]=0;L.j[3]=0;switch(Ba.rotate){case 0:L.j[0]=a[0];L.j[3]=a[1];break;case 180:L.j[0]=-a[0];L.j[3]=-a[1];break;case 90:L.j[1]=a[0];L.j[2]=-a[1];break;case -90:L.j[1]=-a[0],L.j[2]=a[1]}Ba.flipX&&(L.j[0]*=-1,L.j[2]*=-1);L.rb||(L.j[1]*=-1,L.j[3]*=-1)}function Pb(){var a={w:L.element.videoWidth||L.element.width,Da:L.element.videoHeight||L.element.height};if(!a.w||!a.Da||
4>a.w||4>a.Da)throw Error("INVALID VIDEO DIMENSIONS - width = "+a.w+" height = "+a.Da);return a}function Bb(){var a=Pb(),c=L.B[0]!==a.w||L.B[1]!==a.Da;c&&(L.B[0]=a.w,L.B[1]=a.Da);return c}function pb(a,c){if(va===qa.error)return!1;L.element=a;Bb();c&&c();return!0}function Qb(a,c,d){a&&a();L.Oa={video:{facingMode:{exact:Ba.facingMode},width:{min:Ba.minWidth,max:Ba.maxWidth,ideal:Ba.idealWidth},height:{min:Ba.minHeight,max:Ba.maxHeight,ideal:Ba.idealHeight}},audio:!1};Z.Yc(L.Oa,Ba.deviceId);Z.get(L.element?
L.element:Z.Cd(),function(e){c&&c(e);d(e)},function(){Ya("WEBCAM_UNAVAILABLE")},L.Oa)}function Ya(a){va!==qa.error&&(va=qa.error,T.Na&&T.Na(a))}function Lb(a){return a.detected>ja.multiDetectionThresholdFactors[1]*ja.threshold}var Pa={yh:function(a){return Math.ceil(Math.log2(a))},Uh:function(a){return Math.log2(a)},Qh:function(a){return 0===Math.log2(a)%1},Ig:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},Jg:function(a,c,d){return Math.min(Math.max(a,
c),d)},Mg:function(a){return a*Math.PI/180},ai:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},bi:function(a){return Math.round(1E6*a)/1E6},zh:function(a,c){return(100*a/c).toFixed(3)},ia:function(a,c,d){return a*(1-d)+c*d},Vh:function(a,c){return a[0]*(1-c)+a[1]*c},Ve:function(a,c){return Pa.Me(a-c)},Me:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},Qg:function(a,c){return Math.abs(Pa.Ve(a,c))},yg:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),
Math.cos(a)+Math.cos(c))}},ob={get:function(a,c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status?c(e.responseText):"undefined"!==typeof d&&d(e.status))};e.send()},rf:function(a){return new Promise(function(c,d){ob.get(a,c,d)})},vh:function(a,c,d){a+=d?"?"+ob.Ze(d):"";ob.get(a,function(e){c(JSON.parse(e))})},Xh:function(a,c,d){var e=new XMLHttpRequest;e.open("POST",a,!0);e.setRequestHeader("Content-type",
"application/x-www-form-urlencoded");e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};e.send(c)},Ze:function(a){return"string"===typeof a?a:Object.keys(a).map(function(c){return encodeURIComponent(c)+"="+encodeURIComponent(a[c])}).join("&")},jh:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},jc={create:function(a,c){for(var d=Array(c),e=0;e<c;++e)d[e]=a;return d},
Ng:function(a,c){for(var d=0;d<a.length;++d)c[d]=a[d]},clone:function(a){for(var c=Array(a.length),d=0;d<a.length;++d)c[d]=a[d];return c},ei:function(a,c,d){a.forEach(function(e,h){c[h]=e*d})},li:function(a){for(var c=a.length-1;0<c;--c){var d=Math.floor(Math.random()*(c+1)),e=a[c];a[c]=a[d];a[d]=e}},ni:function(a){return a.sort(function(c,d){return c-d})},qg:function(a){return Array.isArray(a)||a.constructor===Float32Array||a.constructor===Uint8Array}},Cb={Rb:function(a,c){if(0===c||"object"!==typeof a)return a;
a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=Cb.Rb(a[d],c);return a},Pg:function(a){return JSON.parse(JSON.stringify(a))}},wb={mi:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},qc:function(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)},ah:function(a,c,d,e){return Math.pow(Math.min(Math.max((e-a)/(c-a),0),1),d)},ui:function(){return 0},Wh:function(){return 1},Th:function(a){return a},Yg:function(a){return a*a},dh:function(a){return a*(2-a)},Vg:function(a){return.5>
a?2*a*a:-1+(4-2*a)*a},Tg:function(a){return a*a*a},bh:function(a){return--a*a*a+1},Ug:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Zg:function(a){return a*a*a*a},eh:function(a){return 1- --a*a*a*a},Wg:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},$g:function(a){return a*a*a*a*a},fh:function(a){return 1+--a*a*a*a*a},Xg:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},kc={cf:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.,0.,0.,0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+
c+"))-vec4(1.,1.,1.,1.),"+c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1,0.1,0.1,0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},I=function(){function a(t,m,k){m=t.createShader(m);t.shaderSource(m,k);t.compileShader(m);return t.getShaderParameter(m,t.COMPILE_STATUS)?m:null}function c(t,m,k){m=a(t,t.VERTEX_SHADER,m);k=a(t,t.FRAGMENT_SHADER,k);t===b&&r.push(m,k);var H=
t.createProgram();t.attachShader(H,m);t.attachShader(H,k);t.linkProgram(H);return H}function d(t){return["float","sampler2D","int"].map(function(m){return"precision "+t+" "+m+";\n"}).join("")}function e(t,m){m.o=m.o?!0:!1;if(!m.o){m.wa=m.wa||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";m.xa=m.xa||["a0"];m.ma=m.ma||[2];m.precision=m.precision||y;m.id=A++;void 0!==m.ie&&(m.ie.forEach(function(Q,R){m.a=m.a.replace(Q,m.Gb[R])}),
m.ie.splice(0));m.Pc=0;m.ma.forEach(function(Q){m.Pc+=4*Q});var k=d(m.precision);m.sa=c(t,k+m.wa,k+m.a);m.l={};m.c.forEach(function(Q){m.l[Q]=t.getUniformLocation(m.sa,Q)});m.attributes={};m.Ma=[];m.xa.forEach(function(Q){var R=t.getAttribLocation(m.sa,Q);m.attributes[Q]=R;m.Ma.push(R)});if(m.f){t.useProgram(m.sa);v=m;l=m.id;for(var H in m.f)t.uniform1i(m.l[H],m.f[H])}m.qa=!0}}function h(t){Ma.fg(z);l!==t.id&&(z.N(),l=t.id,v=t,b.useProgram(t.sa),t.Ma.forEach(function(m){0!==m&&b.enableVertexAttribArray(m)}))}
function n(t,m,k){e(t,m,k);t.useProgram(m.sa);t.enableVertexAttribArray(m.attributes.a0);l=-1;return v=m}function u(){return{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:["u1"],f:{u1:0}}}var r=[],l=-1,v=null,A=0,E=!1,y="highp",q=["u1"],K=["u0"],G={u1:0},g={u0:0},w={u1:0,u2:1},B={u1:0,u3:1},f=["u1","u3","u4"],C={u5:0},p={s0:u(),s1:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:q,f:G,precision:"lowp"},s2:{a:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
c:["u1","u2"],f:w},s3:{a:"uniform sampler2D u1;uniform vec2 u6,u7;varying vec2 vv0;void main(){vec2 a=vv0*u6+u7;gl_FragColor=texture2D(u1,a);}",c:["u1","u6","u7"],f:G,o:!0},s4:{a:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",c:q,f:G},s5:{a:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",c:["u1","u2"],f:w},s6:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",
c:q,f:G},s7:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",c:q,f:G},s8:{a:"uniform sampler2D u0;uniform float u6;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u6;}",c:["u0","u6"],f:g},s9:{a:"uniform sampler2D u0;uniform float u6;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u6,f);gl_FragColor=b*g;}",c:["u0","u6"],f:g},s10:{a:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
c:q,f:G},s11:{a:"uniform sampler2D u1,u8;uniform float u9;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u8,vv0);gl_FragColor=mix(b,a,u9*f);}",c:["u1","u8","u9"],f:{u1:0,u8:1}},s12:{a:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u10)+texture2D(u1,vv0+u10*vec2(1.,-1.))+texture2D(u1,vv0+u10*vec2(-1.,-1.))+texture2D(u1,vv0+u10*vec2(-1.,1.)));}",c:["u1","u10"],f:G},s13:{a:"uniform sampler2D u1;uniform vec4 u11;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u11);gl_FragColor=j(a);}",
c:["u1","u11"],f:G},s14:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",c:K,f:g,o:!0},s15:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",c:K,f:g},s16:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",c:K,f:g},
s17:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",c:K,f:g},s18:{a:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",c:K,f:g},s19:{a:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",c:K,f:g,o:!0},s20:{a:"uniform sampler2D u0,u12;uniform float u13;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u12,e);float b=u13*u13;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",
c:["u0","u12","u13"],f:{u0:0,u12:1},o:!0},s21:{a:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),f=floor(u14.x*fract(b*u14.y)),g=(f*u14.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",c:["u1","u14"],f:G},s22:{a:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),f=texture2D(u16,c);gl_FragColor=d*f;}",c:["u15","u16","u17"],f:{u16:0,u15:1,
u17:2},o:!0},s23:{a:"uniform float u18,u19;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 c=fract(vv0*u18),a=vv0;float b=u18*u19;a=(.5+floor(b*vv0))/b;vec4 d=texture2D(u15,a),f=texture2D(u16,c);gl_FragColor=d*f;}",c:["u16","u15","u18","u19"],f:{u16:0,u15:1}},s24:{a:"uniform float u18,u19;uniform sampler2D u15,u16,u20,u21,u22,u23;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u18),d=vv0;float h=u18*u19;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u15,d),m=texture2D(u16,c),a=texture2D(u23,d);a=floor(.5+a*255.);vec4 n=texture2D(u20,c),o=texture2D(u21,c),p=texture2D(u22,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
c:"u15 u16 u18 u19 u23 u20 u21 u22".split(" "),f:{u16:0,u15:1,u23:3,u20:4,u21:5,u22:6},o:!0},s25:{a:"uniform sampler2D u15,u16,u3;uniform float u18,u24,u25,u19;uniform vec2 u26;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u24*vv0),d=u24*vv0-c;float g=u18/u24;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u24;float m=u24*u19/u18;vec2 b=m*h;b=floor(u26*b+.5*(u19-1.)*(f-u26));vec2 a=(b+i*u25)/u19;a+=.25/u19;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u15,j),o=texture2D(u16,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u25*u25+q)*k.x*k.y;}",
c:"u15 u16 u18 u24 u25 u19 u3 u26".split(" "),f:{u16:0,u15:1,u3:2}},s26:{a:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",c:["u15","u16"],f:{u16:0,u15:1},o:!0},s27:{a:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",c:f,f:B},s28:{a:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
c:f,f:B,o:!0},s29:{a:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",c:f,f:B,o:!0},s30:{a:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
c:q,f:G,precision:"lowp"},s31:{a:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",c:["u1","u27"],f:G,precision:"lowp"},s32:{a:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
c:["u1","u27"],f:G,precision:"lowp"},s33:{a:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
c:["u1","u2","u28"],f:w,o:!0},s34:{a:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u28,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",c:["u1","u2","u28"],f:w,o:!0},s35:{a:"uniform sampler2D u5;uniform vec2 u10;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u10*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u10*h),d=texture2D(u5,a+u10*i),j=texture2D(u5,a+u10),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
c:["u5","u10"],f:C},s36:{a:"uniform sampler2D u5;uniform vec2 u10;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u10*k),d=texture2D(u5,a+u10*l),g=texture2D(u5,a+u10),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u10*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u10*m),d=f(a+u10*2.),g=f(a+u10*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",c:["u5","u10"],
f:C,o:!0},s37:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",c:["u1"],f:G,precision:"lowp",o:!0},s38:{a:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u10)+2002./e*texture2D(u1,vv0-2.*u10)+3003./e*texture2D(u1,vv0-u10)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u10)+2002./e*texture2D(u1,vv0+2.*u10)+1001./e*texture2D(u1,vv0+3.*u10);gl_FragColor=a;}",c:["u10","u1"],
f:G,precision:"lowp",o:!0},s39:{a:"uniform sampler2D u1,u12,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u12,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",c:["u1","u12","u29"],f:{u1:0,u12:1,u29:2},o:!0}},D={s40:{a:"uniform float u18,u30;uniform sampler2D u15,u16,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:["u18","u15","u16","u3","u30"],Gb:["1.1111","gl_FragColor\\*=2.2222;"]},s41:{a:"uniform float u18,u30,u19;uniform sampler2D u15,u16,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u19,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u19;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u19,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:"u18 u19 u15 u16 u3 u30".split(" "),Gb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},x=null,O=null,z={ub:function(){return E},i:function(){if(!E){x=Cb.Rb(p,2);O=Cb.Rb(D,2);y="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var t in x)e(b,x[t],t);I.set("s0");b.enableVertexAttribArray(0);E=!0}},$c:function(t){t.forEach(function(m){z.Zc(m)})},Zc:function(t){x[t.id]=t;e(b,t,t.id)},wf:function(t,
m,k){m||(m=t);x[m]=Object.create(O[t]);x[m].Bf=!0;O[t].Gb&&O[t].Gb.forEach(function(H,Q){x[m].a=x[m].a.replace(new RegExp(H,"g"),k[Q])});e(b,x[m],m)},set:function(t){var m=x[t];m.o&&(m.o=!1,e(b,m,t));h(m)},Wa:function(t){return n(t,u(),"s42")},Gc:function(t){return n(t,{a:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",c:[],precision:y},"s43")},$e:function(t){return"undefined"===typeof x[t]?!1:x[t].qa},N:function(){-1!==l&&(l=-1,v.Ma.forEach(function(t){0!==t&&b.disableVertexAttribArray(t)}))},Hc:function(){var t=
0;v.Ma.forEach(function(m,k){k=v.ma[k];b.vertexAttribPointer(m,k,b.FLOAT,!1,v.Pc,t);t+=4*k})},nd:function(){b.enableVertexAttribArray(0)},Ia:function(){z.Hb(b)},Hb:function(t){t.vertexAttribPointer(v.Ma[0],2,t.FLOAT,!1,8,0)},hi:function(t,m){b.uniform1i(v.l[t],m)},C:function(t,m){b.uniform1f(v.l[t],m)},ua:function(t,m,k){b.uniform2f(v.l[t],m,k)},gg:function(t,m){b.uniform2fv(v.l[t],m)},ig:function(t,m){b.uniform3fv(v.l[t],m)},hg:function(t,m,k,H){b.uniform3f(v.l[t],m,k,H)},jg:function(t,m,k,H,Q){b.uniform4f(v.l[t],
m,k,H,Q)},le:function(t,m){b.uniform4fv(v.l[t],m)},ii:function(t,m){b.uniformMatrix2fv(v.l[t],!1,m)},ji:function(t,m){b.uniformMatrix3fv(v.l[t],!1,m)},ki:function(t,m){b.uniformMatrix4fv(v.l[t],!1,m)},K:function(t,m){z.set(t);m.forEach(function(k){switch(k.type){case "4f":b.uniform4fv(v.l[k.name],k.value);break;case "3f":b.uniform3fv(v.l[k.name],k.value);break;case "2f":b.uniform2fv(v.l[k.name],k.value);break;case "1f":b.uniform1f(v.l[k.name],k.value);break;case "1i":b.uniform1i(v.l[k.name],k.value);
break;case "mat2":b.uniformMatrix2fv(v.l[k.name],!1,k.value);break;case "mat3":b.uniformMatrix3fv(v.l[k.name],!1,k.value);break;case "mat4":b.uniformMatrix4fv(v.l[k.name],!1,k.value)}})},xh:function(){return"lowp"},h:function(){z.N();b.disableVertexAttribArray(0);for(var t in x){var m=x[t];m.qa&&(m.qa=!1,b.deleteProgram(m.sa));m.Bf&&delete x[t]}r.forEach(function(k){b.deleteShader(k)});r.splice(0);A=0;E=!1;v=null;l=-1}};return z}(),b=null,Wa=function(){function a(q){console.log("ERROR in ContextFF: ",
q);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(q){function K(){Sa.h();ia.reset();g.getExtension("WEBGL_lose_context").loseContext()}if(c())return!1;var G=document.createElement("canvas");G.setAttribute("width",5);G.setAttribute("height",5);var g=null;try{g=G.getContext("webgl2",q)}catch(w){return!1}if(!g)return!1;e(g);ia.od(g);q=ia.Sb(g);if(!q.da&&!q.fa)return K(),!1;q=Sa.bd(g,q);K();return q?!0:!1}function e(q){q.clearColor(0,0,0,0);
q.disable(q.DEPTH_TEST);q.disable(q.BLEND);q.disable(q.DITHER);q.disable(q.STENCIL_TEST);q.disable(q.CULL_FACE);q.GENERATE_MIPMAP_HINT&&q.hint(q.GENERATE_MIPMAP_HINT,q.FASTEST);q.disable(q.SAMPLE_ALPHA_TO_COVERAGE);q.disable(q.SAMPLE_COVERAGE);q.depthFunc(q.LEQUAL);q.clearDepth(1)}var h=null,n=null,u=null,r=null,l=!0,v=null,A=null,E=[],y={v:function(){return h.width},T:function(){return h.height},oh:function(){return h},mh:function(){return b},ga:function(){return l},flush:function(){b.flush()},uf:function(){Fa.$();
y.Zf()},Zf:function(){da.reset();Y.reset();I.N();I.nd();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);Y.za();I.Ia()},ff:function(){v||(v=new Uint8Array(h.width*h.height*4));b.readPixels(0,0,h.width,h.height,b.RGBA,b.UNSIGNED_BYTE,v);return v},qh:function(){return h.toDataURL("image/jpeg")},rh:function(){Fa.I();n||(n=document.createElement("canvas"),u=n.getContext("2d"));n.width=h.width;n.height=h.height;for(var q=y.ff(),K=u.createImageData(n.width,n.height),G=n.width,g=n.height,w=K.data,B=0;B<g;++B)for(var f=
g-B-1,C=0;C<G;++C){var p=4*(B*G+C),D=4*(f*G+C);w[p]=q[D];w[p+1]=q[D+1];w[p+2]=q[D+2];w[p+3]=q[D+3]}u.putImageData(K,0,0);return n.toDataURL("image/png")},ph:function(q){!n&&q&&(n=document.createElement("canvas"),u=n.getContext("2d"));var K=q?n:document.createElement("canvas");K.width=h.width;K.height=h.height;(q?u:K.getContext("2d")).drawImage(h,0,0);return K},i:function(q){q=Object.assign({ea:null,wc:null,bb:null,hd:null,width:512,height:512,premultipliedAlpha:!1,zf:!0,antialias:!1,debug:!1,Og:!1},
q);q.ea?(b=q.ea,h=q.ea.canvas):q.hd&&!q.bb?h=document.getElementById(q.hd):q.bb&&(h=q.bb);h||(h=document.createElement("canvas"));h.width=q.width;h.height=q.height;if(b)l=b instanceof WebGL2RenderingContext;else{l=!0;var K={antialias:q.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:q.premultipliedAlpha,stencil:!1,depth:q.zf,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(K.antialias=
!1);var G=d(K);G||!K.antialias||c()||(K.antialias=!1,G=d(K));G&&(b=h.getContext("webgl2",K));b?l=!0:((b=h.getContext("webgl",K))||(b=h.getContext("experimental-webgl",K)),l=!1)}if(!b)return a("WebGL1 and 2 are not enabled");q.wc&&h.addEventListener&&(r=b.getExtension("WEBGL_lose_context"))&&(A=q.wc,h.addEventListener("webglcontextlost",A,!1));if(!ia.i())return a("Not enough GL capabilities");e(b);I.i();Y.i();Sa.bd(b,ia.ef());E.forEach(function(g){g(b)});E.splice(0);return!0},Eg:function(){return new Promise(function(q){b?
q(b):E.push(q)})},h:function(){b&&(ia.h(),I.h(),Sa.h());r&&A&&(h.removeEventListener("webglcontextlost",A,!1),r=A=null);b=v=u=n=h=null;E.splice(0)}};return y}(),Ma=function(){function a(){null===c&&("undefined"!==typeof I?c=I:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},fg:function(d){c!==d&&(c&&c.N(),c=d)},ub:function(){return c.ub()},Ia:function(){return c.Ia()},Hb:function(d){return c.Hb(d)},Hc:function(){return c.Hc()},N:function(){return c.N()},set:function(d){a();
return c.set(d)},Wa:function(d){a();return c.Wa(d)},Gc:function(d){a();return c.Gc(d)}}}(),Ra=function(){function a(k){b.bindTexture(b.TEXTURE_2D,k)}function c(k){O[0]=k;k=z[0];var H=k>>16&32768,Q=k>>12&2047,R=k>>23&255;return 103>R?H:142<R?H|31744|((255==R?0:1)&&k&8388607):113>R?(Q|=2048,H|(Q>>114-R)+(Q>>113-R&1)):H=(H|R-112<<10|Q>>1)+(Q&1)}function d(k){var H=new Uint16Array(k.length);k.forEach(function(Q,R){H[R]=c(Q)});return H}function e(){if(null!==t.ic)return t.ic;var k=n(d([.5,.5,.5,.5]),!0);
return null===k?!0:t.ic=k}function h(){if(null!==t.jc)return t.jc;var k=n(new Uint8Array([127,127,127,127]),!1);return null===k?!0:t.jc=k}function n(k,H){if(!Ma.ub()||!G)return null;var Q=null,R=Math.sqrt(k.length/4);try{var ca=b.getError();if("FUCKING_BIG_ERROR"===ca)return!1;Q=m.instance({isFloat:!1,P:H,array:k,width:R});ca=b.getError();if(ca!==b.NO_ERROR)return!1}catch(xa){return!1}ta.I();b.viewport(0,0,R,R);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);Ma.set("s0");Q.$a(0);ua.g(!0,!0);k=4*
R*R;H=new Uint8Array(k);b.readPixels(0,0,R,R,b.RGBA,b.UNSIGNED_BYTE,H);R=!0;for(ca=0;ca<k;++ca)R=R&&3>Math.abs(H[ca]-127);Q.remove();ta.$();return R}var u=0,r=null,l=0,v=null,A=null,E=null,y=null,q=null,K=null,G=!1,g=[],w={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,F:null,hc:null,Af:!1,P:!1,na:null,yb:4,rc:0},B=!1,f=null,C=null,p=[[1,0,0,0],[0,1,0,0],[0,0,1,0],
[0,0,0,1]],D=!1,x=!1,O=new Float32Array(1),z=new Int32Array(O.buffer),t={ic:null,jc:null},m={i:function(){G||(q=[b.RGBA,null,b.RGBA,b.RGBA],K=[b.RGBA,null,b.RGBA,b.RGBA],r=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],D="undefined"!==typeof JEContext,x="undefined"!==typeof ia,D&&JEContext.Rh()&&r.push(b.TEXTURE8,b.TEXTURE9),v=[-1,-1,-1,-1,-1,-1,-1,-1],y=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],G=!0)},vf:function(){if(!A){for(var k=new Float32Array(16384),H=0;16384>
H;++H)k[H]=2*Math.random()-1;A={random:m.instance({isFloat:!0,isPot:!0,array:k,width:64}),te:m.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}m.wg()},Gh:function(){return A.te},wg:function(){y[1]=ia.cc(b)},dg:function(){K=q=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},de:function(k){I.set("s1");ta.I();var H=k.v(),Q=k.T();b.viewport(0,0,H,Q);k.b(0);ua.g(!1,!1)},Zh:function(k,H){m.de(k);b.readPixels(0,0,k.v(),k.T(),b.RGBA,b.UNSIGNED_BYTE,H)},$h:function(k,H){m.de(k);return ia.Fb(0,0,k.v(),
k.T(),H)},vd:function(k,H,Q,R,ca,xa,Ha){k.activeTexture(k.TEXTURE0);var Ta=k.createTexture();k.bindTexture(k.TEXTURE_2D,Ta);ca=ca instanceof Float32Array?ca:new Float32Array(ca);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.NEAREST);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,xa);k.texImage2D(k.TEXTURE_2D,0,k.RGBA,
Q,R,0,k.RGBA,k.FLOAT,ca);k.bindTexture(k.TEXTURE_2D,null);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!1);Ha&&(ta.$(),I.Wa(k));k.viewport(0,0,Q,R);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,H,0);k.bindTexture(k.TEXTURE_2D,Ta);Ha?ua.g(!0,!0):Y.ib(k);k.deleteTexture(Ta);G&&(v[0]=-1,E=null,u=0)},Nb:function(k){k!==u&&(b.activeTexture(r[k]),u=k)},instance:function(k){var H;function Q(){W=void 0!==F.F.videoWidth?F.F.videoWidth:F.F.width;X=void 0!==F.F.videoHeight?F.F.videoHeight:F.F.height}
function R(M){var U=b.getError();if("FUCKING_BIG_ERROR"===U)return!1;b.texImage2D(b.TEXTURE_2D,0,ra,oa,pa,M);U=b.getError();U!==b.NO_ERROR&&oa!==b.RGBA&&(oa=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,ra,oa,pa,M));return!0}function ca(){if(!Rb){a(Ia);Qa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,Qa);F.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,F.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,F.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,
b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));F.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.sh().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Ag);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,F.isLinear?b.LINEAR:b.NEAREST);F.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,F.isMipmap&&!ab?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,F.isMipmap&&!ab?b.NEAREST_MIPMAP_NEAREST:
b.NEAREST);oa=q[F.yb-1];ra=K[F.yb-1];pa=y[Db];if(ia.ga()){var M=ia.hf();oa===b.RGBA&&pa===b.FLOAT?F.isMipmap||F.isLinear?ra=Sa.kf(b):ia.cd()?M&&(ra=M):ra=b.RGBA16F||b.RGBA:oa===b.RGB&&pa===b.FLOAT&&M&&(ra=M,oa=b.RGBA)}if(F.P&&!F.isFloat||F.isFloat&&F.isMipmap&&Sa.Ff())ra=ia.jf(),pa=ia.cc(b);F.rc&&(qb=F.rc);F.isSrgb&&4===F.yb&&(oa=JEContext.Eh());if(F.F)R(F.F);else if(F.url)R(Va);else if(Ja){M=Ja;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,ra,W,X,0,oa,pa,M),b.getError()!==
b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,ra,W,X,0,oa,pa,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,W,X,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(wc){b.texImage2D(b.TEXTURE_2D,0,ra,W,X,0,oa,pa,null)}F.isKeepArray||(Ja=null)}else M=b.getError(),"FUCKING_BIG_ERROR"!==M&&(b.texImage2D(b.TEXTURE_2D,0,ra,W,X,0,oa,pa,null),M=b.getError(),M!==b.NO_ERROR&&(oa=b.RGBA,F.P&&pa!==b.FLOAT&&(pa=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,ra,W,X,0,oa,pa,null))));if(F.isMipmap)if(!ab&&la)la.bc(),rb=
!0;else if(ab){M=Math.log2(Math.min(W,X));fb=Array(1+M);fb[0]=Ia;for(var U=1;U<=M;++U){var sa=Math.pow(2,U),aa=W/sa;sa=X/sa;var bb=b.createTexture();a(bb);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,ra,aa,sa,0,oa,pa,null);a(null);fb[U]=bb}rb=!0}a(null);v[u]=-1;Qa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);jb=!0;F.na&&la&&(F.na(la),F.na=null)}}function xa(){for(var M=W*X,U=2*M,sa=3*M,aa=0;aa<M;++aa)Na[0][aa]=
kb[aa],Na[1][aa]=kb[aa+M],Na[2][aa]=kb[aa+U],Na[3][aa]=kb[aa+sa]}function Ha(){var M=W*X*4;Ua=[new Uint8Array(M),new Uint8Array(M),new Uint8Array(M),new Uint8Array(M)];Na=[new Float32Array(Ua[0].buffer),new Float32Array(Ua[1].buffer),new Float32Array(Ua[2].buffer),new Float32Array(Ua[3].buffer)];sb=new Uint8Array(4*M);kb=new Float32Array(sb.buffer);lb=!0}function Ta(){H=new Uint8Array(W*X*4);Sb=new Float32Array(H.buffer);Eb=!0}var F=Object.assign({},w,k),mb=l++;null===F.isFlipY&&(F.isFlipY=F.url?
!0:!1);F.data&&(F.array="string"===typeof F.data?ya(F.data):F.isFloat?new Float32Array(F.data):new Uint8Array(F.data),F.isFlipY=!1);var Db=0,Tb=F.F?!0:!1,nb=null,Fb=null,Ub=!1;F.P=F.P||F.isFloat;F.P&&(Db=1);!F.Af&&F.isFloat&&x&&!ia.cd()&&(F.isFloat=!1);F.isFloat&&(Db=2);F.isAnisotropicFiltering&&D&&!JEContext.Kh()&&(F.isAnisotropicFiltering=!1);var Ia=F.hc||b.createTexture(),Va=null,Ja=!1,W=0,X=0,jb=!1,Rb=!1,lb=!1,Na=null,Ua=null,sb=null,kb=null,ra=null,oa=null,pa=null,Qa=F.isFlipY,lc=(k=F.P&&F.isMipmap)&&
Sa.He(),ab=k&&lc?!0:!1,fb=null,qb=-1,rb=!1;var Eb=!1;var Sb=H=null;F.width&&(W=F.width,X=F.height?F.height:W);var la={get:function(){return Ia},v:function(){return W},T:function(){return X},Hh:function(){return F.url},Lh:function(){return F.isFloat},Nh:function(){return F.P},Oh:function(){return F.isLinear},bc:function(){b.generateMipmap(b.TEXTURE_2D)},Fe:function(M,U){ab?(M||(M=la.zd()),m.Nb(U),a(fb[M]),v[U]=-1):la.b(U)},zd:function(){-1===qb&&(qb=Math.log(W)/Math.log(2));return qb},bf:function(M){if(ab){M||
(M=la.zd());I.set("s12");m.Nb(0);for(var U=W,sa=X,aa=1;aa<=M;++aa)U/=2,sa/=2,I.ua("u10",.25/U,.25/sa),b.viewport(0,0,U,sa),a(fb[aa-1]),b.framebufferTexture2D(ta.lb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,fb[aa],0),ua.g(!1,1===aa);v[0]=-1}else la.bc()},gi:function(M){(Tb=!jc.qg(M))?(Ja=null,F.F=M,Q()):Ja=M},b:function(M){if(!jb)return!1;m.Nb(M);if(v[M]===mb)return!1;a(Ia);v[M]=mb;return!0},$a:function(M){b.activeTexture(r[M]);u=M;a(Ia);v[M]=mb},m:function(){E=la;b.framebufferTexture2D(ta.lb(),b.COLOR_ATTACHMENT0,
b.TEXTURE_2D,Ia,0)},S:function(){E=la;b.viewport(0,0,W,X);b.framebufferTexture2D(ta.lb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,Ia,0)},Nc:m.Nc,ke:function(M,U){W=M;X=U},resize:function(M,U){la.ke(M,U);ca()},clone:function(M){M=m.instance({width:W,height:X,P:F.P,isFloat:F.isFloat,isLinear:F.isLinear,isMirrorY:F.isMirrorY,isFlipY:M?!Qa:Qa,isPot:F.isPot});Ma.set("s0");ta.$();M.m();b.viewport(0,0,W,X);la.b(0);ua.g(!0,!0);return M},kg:function(){b.viewport(0,0,W,X)},remove:function(){b.deleteTexture(Ia);Rb=
!0;g.splice(g.indexOf(la),1);la=null},refresh:function(){la.$a(0);Qa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Tb?b.texImage2D(b.TEXTURE_2D,0,ra,oa,pa,F.F):b.texImage2D(b.TEXTURE_2D,0,ra,W,X,0,oa,pa,Ja);Qa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},be:function(){lb||Ha();b.readPixels(0,0,W,4*X,b.RGBA,b.UNSIGNED_BYTE,sb);xa();return Na},Wf:function(){lb||Ha();return ia.Fb(0,0,W,4*X,sb).then(function(){xa();return Na})},Yf:function(){Eb||Ta();b.readPixels(0,0,W,X,b.RGBA,b.UNSIGNED_BYTE,H);return Sb},
Xf:function(){Eb||Ta();return ia.Fb(0,0,W,X,H)},jd:function(M){ta.I();I.set("s13");la.b(0);if(M)b.viewport(0,0,W,X),I.jg("u11",.25,.25,.25,.25),ua.g(!1,!0);else for(M=0;4>M;++M)b.viewport(0,X*M,W,X),I.le("u11",p[M]),ua.g(!1,0===M)},Lb:function(M){var U=pa===y[0]&&!h();a(Ia);Qa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);U?(Ub||(nb=document.createElement("canvas"),nb.width=W,nb.height=X,Fb=nb.getContext("2d"),Fb.createImageData(W,X),Ub=!0),null.data.set(M),Fb.putImageData(null,0,0),b.texImage2D(b.TEXTURE_2D,
0,ra,oa,pa,nb)):b.texImage2D(b.TEXTURE_2D,0,ra,W,X,0,oa,pa,M);v[u]=mb;Qa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},si:function(M,U){a(Ia);U&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,ra,oa,pa,M);v[u]=mb;U&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},fi:function(M,U){var sa=W*X,aa=4*sa;M=F.P?M?"RGBE":"JSON":"RGBA";U&&(M=U);U=ia.ga()&&!1;var bb=null;switch(M){case "RGBE":bb="s44";break;case "JSON":bb=U?"s0":"s13";break;case "RGBA":case "RGBAARRAY":bb="s7"}lb||("RGBA"===M||"RGBE"===
M||"RGBAARRAY"===M?(Ua=new Uint8Array(aa),lb=!0):"JSON"!==M||U||Ha());ta.I();I.set(bb);la.b(0);aa=null;if("RGBA"===M||"RGBE"===M||"RGBAARRAY"===M){b.viewport(0,0,W,X);ua.g(!0,!0);b.readPixels(0,0,W,X,b.RGBA,b.UNSIGNED_BYTE,Ua);if("RGBAARRAY"===M)return{data:Ua};B||(f=document.createElement("canvas"),C=f.getContext("2d"),B=!0);f.width=W;f.height=X;sa=C.createImageData(W,X);sa.data.set(Ua);C.putImageData(sa,0,0);aa=f.toDataURL("image/png")}else if("JSON"===M)if(U)aa=new Float32Array(sa),b.viewport(0,
0,W,X),ua.g(!0,!0),b.readPixels(0,0,W,X,b.RGBA,b.FLOAT,aa);else{for(aa=0;4>aa;++aa)b.viewport(0,X*aa,W,X),I.le("u11",p[aa]),ua.g(!aa,!aa);la.be();aa=Array(sa);for(U=0;U<sa;++U)aa[4*U]=Na[0][U],aa[4*U+1]=Na[1][U],aa[4*U+2]=Na[2][U],aa[4*U+3]=Na[3][U]}return{format:M,data:aa,width:W,height:X,isMirrorY:F.isMirrorY,isFlipY:"RGBA"===M?F.isFlipY:!F.isFlipY}}};F.isMipmap&&!ab&&jb&&!rb&&(la.bc(),rb=!0);if(F.url)a(Ia),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Va=new Image,Va.u=
"Anonymous",Va.crossOrigin="Anonymous",Va.src=F.url,Va.onload=function(){W=Va.width;X=Va.height;ca()};else if(F.F){var Vb=function(){Q();W?ca():setTimeout(Vb,1)};Vb()}else F.array?(F.P&&!F.isFloat?F.array instanceof Uint16Array?(Ja=F.array,ca()):e()?(Ja=d(F.array),ca()):(ca(),m.vd(b,Ia,la.v(),la.T(),F.array,Qa,!0)):(Ja=F.isFloat?F.array instanceof Float32Array?F.array:new Float32Array(F.array):F.array instanceof Uint8Array?F.array:new Uint8Array(F.array),ca()),F.isKeepArray||(Ja&&Ja!==F.array&&(Ja=
null),delete F.array)):F.hc?jb=!0:ca();la.Ch=la.v;F.na&&jb&&(F.na(la),F.na=null);g.push(la);return la},I:function(k){k!==u&&(b.activeTexture(r[k]),u=k);v[k]=-1;a(null)},Dg:function(k){A.random.b(k)},Nc:function(){E=null;b.framebufferTexture2D(ta.lb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==u&&b.activeTexture(r[0]);for(var k=0;k<r.length;++k)v[k]=-1;u=-1},ci:function(){u=-1},tg:function(){for(var k=0;k<r.length;++k)m.I(k)},wd:function(){A&&(A.random.remove(),A.te.remove())},
ri:function(k,H){if("RGBA"===k.format||"RGBE"===k.format){var Q=new Image;Q.src=k.data;Q.onload=function(){m.instance({isMirrorY:k.isMirrorY,isFlipY:k.isFlipY,isFloat:!1,F:Q,na:function(R){if("RGBA"===k.format)H(R);else{var ca=k.width,xa=k.height,Ha=m.instance({isMirrorY:k.isMirrorY,isFloat:!0,width:ca,height:xa,isFlipY:k.isFlipY});ta.$();b.viewport(0,0,ca,xa);I.set("s45");Ha.m();R.b(0);ua.g(!0,!0);m.I(0);H(Ha);ia.flush();setTimeout(R.remove,50)}}})}}else"JSON"===k.format?H(m.instance({isFloat:!0,
isFlipY:k.isFlipY,width:k.width,height:k.height,array:new Float32Array(k.data)})):H(!1)},Oe:d,h:function(){E&&(Fa.$(),m.Nc(),Fa.I());m.tg();g.slice(0).forEach(function(k){k.remove()});g.splice(0);G=!1;l=0;"undefined"!==typeof Sa&&Sa.h();A=null}};return m}(),dc=function(){return{instance:function(a){var c=[Ra.instance(a),Ra.instance(a)],d=[c[1],c[0]],e=d,h={ag:function(n){e[1].m();e[0].b(n);h.oe()},bg:function(n){e[1].S();e[0].b(n);h.oe()},oe:function(){e=e===c?d:c},refresh:function(){e[0].refresh();
e[1].refresh()},b:function(n){e[0].b(n)},$a:function(n){e[0].$a(n)},Cg:function(n){e[1].b(n)},wh:function(){return e[0]},Ah:function(){return e[1]},Lb:function(n){e[0].Lb(n);e[1].Lb(n)},remove:function(){e[0].remove();e[1].remove();e=null},sync:function(){h.bg(0);I.set("s0");Y.g(!1,!1)}};return h}}}(),ua=function(){function a(l){var v={X:null,H:null};v.X=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,v.X);l.bufferData(l.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),l.STATIC_DRAW);v.H=l.createBuffer();
l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,v.H);l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),l.STATIC_DRAW);return v}var c=null,d=0,e=!1,h=[],n=-2,u=-2,r={reset:function(){u=n=-2},i:function(){e||(c=a(b),r.za(),e=!0)},instance:function(l){var v=d++,A=l.H?l.H.length:0,E="undefined"===typeof l.mode?b.STATIC_DRAW:l.mode,y=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,y);b.bufferData(b.ARRAY_BUFFER,l.X instanceof Float32Array?l.X:new Float32Array(l.X),E);n=v;var q=null,K=null,G=null;if(l.H){q=
b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,q);var g=null;65536>l.H.length?(g=Uint16Array,K=b.UNSIGNED_SHORT,G=2):(g=Uint32Array,K=b.UNSIGNED_INT,G=4);g=l.H instanceof g?l.H:new g(l.H);b.bufferData(b.ELEMENT_ARRAY_BUFFER,g,E);u=v}var w={Ge:function(B){n!==v&&(b.bindBuffer(b.ARRAY_BUFFER,y),n=v);B&&Ma.Hc()},De:function(){u!==v&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,q),u=v)},bind:function(B){w.Ge(B);w.De()},Rg:function(){b.drawElements(b.TRIANGLES,A,K,0)},Sg:function(B,f){b.drawElements(b.TRIANGLES,
B,K,f*G)},remove:function(){b.deleteBuffer(y);l.H&&b.deleteBuffer(q);w=null}};h.push(w);return w},za:function(){-1!==n&&(b.bindBuffer(b.ARRAY_BUFFER,c.X),n=-1);-1!==u&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.H),u=-1)},g:function(l,v){l&&ua.za();v&&Ma.Ia();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},ib:function(l){l=l||b;var v=a(l);l.bindBuffer(l.ARRAY_BUFFER,v.X);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,v.H);Ma.Hb(l);l.clear(l.COLOR_BUFFER_BIT);l.drawElements(l.TRIANGLES,3,l.UNSIGNED_SHORT,0);l.flush();
l.bindBuffer(l.ARRAY_BUFFER,null);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,null);l.deleteBuffer(v.X);l.deleteBuffer(v.H);r.reset();e&&(r.za(),Ma.Ia())},wd:function(){var l=b,v=c;l.deleteBuffer(v.X);l.deleteBuffer(v.H)},h:function(){r.wd();h.forEach(function(l){l.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);r.reset();e=!1;h.splice(0);d=0}};return r}(),ta=function(){var a=null,c=null,d=null,e=!1,h=[],n={G:-2,ud:1},u={ub:function(){return e},i:function(){if(!e){a=
b.createFramebuffer();var r=ia.ga();c=r&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=r&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;e=!0}},th:function(){return c},lf:function(){return d},lb:function(){return b.FRAMEBUFFER},Bh:function(){return n},lh:function(){return a},instance:function(r){void 0===r.Hd&&(r.Hd=!1);var l=r.D?r.D:null,v=r.width,A=void 0!==r.height?r.height:r.width,E=a,y=null,q=!1,K=!1,G=0;l&&(v=v?v:l.v(),A=A?A:l.T());var g={je:function(){q||(E=b.createFramebuffer(),
q=!0,G=n.ud++)},ze:function(){g.je();g.m();y=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,y);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,v,A);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,y);b.clearDepth(1)},bind:function(w,B){G!==n.G&&(b.bindFramebuffer(c,E),n.G=G);l&&l.m();B&&b.viewport(0,0,v,A);w&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Bg:function(){G!==n.G&&(b.bindFramebuffer(c,E),n.G=G)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},
Kg:function(){b.clear(b.COLOR_BUFFER_BIT)},Lg:function(){b.clear(b.DEPTH_BUFFER_BIT)},kg:function(){b.viewport(0,0,v,A)},m:function(){G!==n.G&&(b.bindFramebuffer(c,E),n.G=G)},rtt:function(w){l=w;n.G!==G&&(b.bindFramebuffer(b.FRAMEBUFFER,E),n.G=G);w.m()},I:function(){b.bindFramebuffer(c,null);n.G=-1},resize:function(w,B){v=w;A=B;y&&(b.bindRenderbuffer(b.RENDERBUFFER,y),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,v,A))},remove:function(){E===a||K||(b.bindFramebuffer(c,E),b.framebufferTexture2D(c,
b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),y&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(E),y&&b.deleteRenderbuffer(y));K=!0}};r.Hd&&g.ze();h.push(g);return g},I:function(){b.bindFramebuffer(c,null);n.G=-1},ug:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);ia.me();n.G=-1},reset:function(){n.G=-2},$:function(){0!==n.G&&(b.bindFramebuffer(c,a),n.G=0)},clear:function(){ia.me();b.clear(b.COLOR_BUFFER_BIT)},
h:function(){u.I();h.forEach(function(r){r.remove()});null!==a&&(b.deleteFramebuffer(a),a=null);u.reset();e=!1;h.splice(0);n.ud=1}};return u}(),ia=function(){function a(){r="undefined"===typeof Wa?JEContext:Wa;l=!0}function c(f,C){for(var p=0;p<f.length;++p){var D=C.getExtension(f[p]);if(D)return D}return null}function d(){null!==g.Kb&&(clearTimeout(g.Kb),g.Kb=null);g.Ea=!1}function e(f){if(0===g.pa.length){g.U=b.PIXEL_PACK_BUFFER;g.pa.splice(0);g.mb.splice(0);for(var C=0;C<g.Pa;++C)g.pa.push(b.createBuffer()),
g.mb.push(-1);g.ca=0;g.uc=0}b.bindBuffer(g.U,g.pa[g.ca]);f.byteLength!==g.mb[g.ca]&&(b.bufferData(g.U,f.byteLength,b.STREAM_READ),g.mb[g.ca]=f.byteLength);g.Ih=!0}function h(){b.bindBuffer(g.U,null)}function n(){g.Ca.forEach(function(f){b.deleteSync(f)});g.Ca.splice(0)}function u(){g.ca=(g.ca+1)%g.Pa;++g.uc}var r=null,l=!1,v={Jd:!1,Jc:null,Kc:null,Md:!1,Ef:!1,Lc:null,Nd:!1,Mc:null,Kd:!1,Pb:null,xf:!1,Qb:null,yf:!1},A=null,E={da:!0,fa:!0,ac:!0,ae:!1},y=null,q=!0,K=null,G=null,g={Pe:1,Pa:-1,ca:0,uc:0,
Ea:!1,pa:[],Ca:[],mb:[],U:null,Kb:null},w="undefined"===typeof window?{}:window,B={i:function(){if(l)return!0;B.reset();l||a();var f=b;if(!A.Jd){A.Jc=B.rd(f);w.GL_EXT_FLOAT=A.Jc;A.Md=A.Jc?!0:!1;if(A.Md||B.ga())A.Kc=B.sd(f),A.Ef=A.Kc?!0:!1,w.GL_EXT_FLOATLINEAR=A.Kc;A.Jd=!0}if(!A.Kd){A.Lc=B.gb(f);A.Lc&&(A.Nd=!0,w.GL_EXT_HALFFLOAT=A.Lc);if(A.Nd||B.ga())A.Mc=B.td(f),w.GL_EXT_HALFFLOATLINEAR=A.Mc;A.Jh=A.Mc?!0:!1;A.Kd=!0}A.Pb=B.pd(f);A.xf=A.Pb?!0:!1;w.GL_EXT_COLORBUFFERFLOAT=A.Pb;A.Qb=B.qd(f);A.yf=A.Qb?
!0:!1;w.GL_EXT_COLORBUFFERHALFFLOAT=A.Qb;ta.i();Ra.i();if(!B.Se())return!1;ua.i();Ra.vf();return!0},reset:function(){A=Object.assign({},v);y=Object.assign({},E)},v:function(){l||a();return r.v()},T:function(){l||a();return r.T()},ga:function(){l||a();return r.ga()},od:function(f){B.pd(f);B.qd(f);B.rd(f);B.sd(f);B.gb(f);B.td(f)},pd:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),qd:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float",
"OES_color_buffer_half_float"]),rd:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),sd:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),gb:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),td:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),cc:function(f){var C=B.gb(f);return C&&C.HALF_FLOAT_OES?
C.HALF_FLOAT_OES:f.HALF_FLOAT||f.FLOAT},hf:function(){return G||b.RGBA32F||b.RGBA},jf:function(){return K||b.RGBA16F||b.RGBA},ef:function(){return y},cd:function(){return y.da},Gg:function(){return y.fa},Fg:function(){return y.ac},Ie:function(){return y.ae&&q},re:function(f){q=f;!f&&g.Ea&&(n(),b.bindBuffer(g.U,null),g.Ea=!1)},Ph:function(){return g.Ea},Ib:function(f,C,p){function D(){f.bindTexture(f.TEXTURE_2D,null);f.bindFramebuffer(x,null);f.deleteTexture(t);f.deleteFramebuffer(z)}var x=f.FRAMEBUFFER,
O=f.NEAREST,z=f.createFramebuffer();f.bindFramebuffer(x,z);var t=f.createTexture();f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,t);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,O);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,O);f.texImage2D(f.TEXTURE_2D,0,C,3,3,0,f.RGBA,p,null);f.framebufferTexture2D(f.FRAMEBUFFER,
f.COLOR_ATTACHMENT0,f.TEXTURE_2D,t,0);if(f.checkFramebufferStatus(f.READ_FRAMEBUFFER||f.FRAMEBUFFER)!==f.FRAMEBUFFER_COMPLETE)return D(),!1;Ma.Gc(f);f.clearColor(0,0,0,0);f.viewport(0,0,3,3);f.disable(f.DEPTH_TEST);f.clear(f.COLOR_BUFFER_BIT);ua.ib(f);f.bindFramebuffer(x,null);Ma.Wa(f);f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,t);ua.ib(f);C=new Uint8Array(36);f.readPixels(0,0,3,3,f.RGBA,f.UNSIGNED_BYTE,C);D();for(p=0;36>p;++p)if(3!==p%4&&3<Math.abs(C[p]-127))return!1;return!0},Sb:function(f){var C=
{da:!1,fa:!1};f.disable(f.BLEND);f.clearColor(0,0,0,0);f.clear(f.COLOR_BUFFER_BIT);f.RGBA32F&&B.Ib(f,f.RGBA32F,f.FLOAT)&&(C.da=!0,G=f.RGBA32F);!C.da&&B.Ib(f,f.RGBA,f.FLOAT)&&(C.da=!0,G=f.RGBA);var p=B.cc(f);K=null;f.RGBA16F&&B.Ib(f,f.RGBA16F,p)&&(C.fa=!0,K=f.RGBA16F);!C.fa&&B.Ib(f,f.RGBA,p)&&(C.fa=!0,K=f.RGBA);return C},Te:function(){var f=ta.instance({width:2});f.je();var C=Ra.instance({width:2,isFloat:!0,yb:3});f.m();C.m();B.flush();b.checkFramebufferStatus(ta.lf())!==b.FRAMEBUFFER_COMPLETE?(Ra.dg(),
y.ac=!1):y.ac=!0;f.remove();C.remove()},Ue:function(){var f=!1;B.ga()&&(f="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(C){return"undefined"!==typeof b[C]}));y.ae=f},Se:function(){var f=B.Sb(b);Object.assign(y,f);if(!y.da&&!y.fa)return!1;B.Te();B.Ue();return!0},ce:function(f,C,p,D,x){b.readPixels(f,C,p,D,b.RGBA,b.UNSIGNED_BYTE,x);return Promise.resolve(x,!1)},Fb:function(f,C,p,D,x,O,z){if(!B.Ie())return B.ce(f,C,
p,D,x);g.Pa=z||g.Pe;e(x);b.readPixels(f,C,p,D,b.RGBA,b.UNSIGNED_BYTE,0);g.Ca[g.ca]=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);B.flush();var t=!1;return new Promise(function(m,k){function H(){if(!g.Ea)return d(),h(),u(),k(),!1;var Q=(g.ca+1)%g.Pa;switch(b.clientWaitSync(g.Ca[Q],0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:break;default:return d(),b.deleteSync(g.Ca[Q]),g.Ca[Q]=null,b.bindBuffer(g.U,g.pa[Q]),b.getBufferSubData(g.U,0,x),h(),u(),m(x,t),!0}g.Kb=setTimeout(H,0);return!1}d();g.uc+1<g.Pa?
(h(),u(),m(x,!1)):(g.Ea=!0,H()||!O||t||(t=!0,O()))})},me:function(){b.viewport(0,0,B.v(),B.T())},flush:function(){b.flush()},h:function(){d();n();Ra.h();ta.h();ua.h();g.pa.forEach(function(f){b.deleteBuffer(f)});g.pa.splice(0);Ma.reset();l=!1}};return B}(),Y=ua,Fa=ta,da=Ra,Sa=function(){function a(p,D,x,O){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,O?g.NEAREST_MIPMAP_NEAREST:g.LINEAR);var z=null;if(null!==x)try{z=g.getError();if("FUCKING_BIG_ERROR"===z)return!1;g.texImage2D(g.TEXTURE_2D,0,
p,4,4,0,g.RGBA,D,x);z=g.getError();if(z!==g.NO_ERROR)return!1}catch(t){return!1}O&&g.generateMipmap(g.TEXTURE_2D);g.clear(g.COLOR_BUFFER_BIT);Y.ib(g);z=g.getError();if("FUCKING_BIG_ERROR"===z)return!1;g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,A);z=g.getError();z===g.INVALID_OPERATION&&"undefined"!==typeof g.PIXEL_PACK_BUFFER&&(g.bindBuffer(g.PIXEL_PACK_BUFFER,null),g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,A),z=g.getError());if(z!==g.NO_ERROR)return!1;x=!0;for(O=0;16>O;++O)x=x&&4>Math.abs(A[O]-
127);x&&(l.Yd=D,l.Gd=p);return x}function c(p,D){return w.da&&a(p,g.FLOAT,new Float32Array(E),D)?(r=u.Xc,!0):!1}function d(p,D,x){if(!w.fa)return!1;var O=Ra.Oe(E),z=ia.gb(g);if(z&&z.HALF_FLOAT_OES&&a(p,z.HALF_FLOAT_OES,O,D)||g.HALF_FLOAT&&a(p,g.HALF_FLOAT,O,D))return r=u.La,!0;O=new Float32Array(E);if(a(p,g.FLOAT,O,D))return r=u.La,!0;g.bindTexture(g.TEXTURE_2D,x);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,2,2,0,g.RGBA,g.UNSIGNED_BYTE,null);g.bindFramebuffer(l.eb,C);Ra.vd(g,x,2,2,O,!1,!1);g.bindFramebuffer(l.eb,
null);g.bindTexture(g.TEXTURE_2D,x);return a(p,null,null,D)?(r=u.La,!0):!1}function e(p,D,x){v=!0;if(d(p,!0,x)||c(D,!0))return!0;v=!1;return d(p,!1,x)||c(D,!1)?!0:!1}function h(p){if(r===u.N){g=p||b;r=u.RGBA8;v=!0;ia.od(g);w||(w=ia.Sb(g));Fa.reset();C=g.createFramebuffer();l.eb=g.DRAW_FRAMEBUFFER||g.FRAMEBUFFER;g.bindFramebuffer(l.eb,null);g.clearColor(0,0,0,0);g.viewport(0,0,2,2);I.N();B=I.Wa(g);p=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,p);g.texParameteri(g.TEXTURE_2D,
g.TEXTURE_WRAP_S,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);f=p;var D=p=g.RGBA,x=g.RGBA16F,O=g.RGBA32F;O&&(p=O);x&&(D=x);if((x||O)&&e(D,p,f))return n(),!0;p=D=g.RGBA;if(e(D,p,f))return n(),!0;r=u.RGBA8;n();return!1}}function n(){g.deleteProgram(B.sa);g.deleteTexture(f);f=B=null}for(var u={N:-1,Xc:3,La:2,RGBA8:0},r=u.N,l={Yd:null,Gd:null,eb:null},v=!0,A=new Uint8Array(16),E=Array(64),y=0;4>y;++y)for(var q=0;4>q;++q){var K=
0===(q+y)%2?1:0,G=4*y+q;E[4*G]=K;E[4*G+1]=K;E[4*G+2]=K;E[4*G+3]=K}var g=null,w=null,B=null,f=null,C=null;return{He:function(p){h(p);return v},bd:function(p,D){r===u.N&&(typeof("undefined"!==D)&&(w=D),h(p));return r!==u.RGBA8},Mh:function(p){h(p);return r===u.Xc},Ff:function(p){h(p);return r===u.La},uh:function(p){h(p);return l.Yd},kf:function(p){h(p);return l.Gd},h:function(){g=null;v=!0;r=u.N;w=null}}}(),$b=function(){return{instance:function(a){var c=null,d=!1,e=!1,h=null,n=!1,u=!1,r=null,l="undefined"===
typeof a.preprocessing?!1:a.preprocessing,v="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,wa&&void 0!==wa.Ce&&(a.mask=wa.Ce+a.mask),c=da.instance({isFloat:!1,url:a.mask}));var A=!1;a.customInputShader&&(A="s46",I.Zc({name:"_",id:A,a:a.customInputShader,pi:["uSource"],precision:"lowp"}),I.K(A,[{type:"1i",name:"_",value:0}]));switch(l){case "sobel":r="s33";n=!0;break;case "meanNormalization":r="s34";n=!0;break;case "grayScale":r="s30";n=!1;break;case "grayScaleTilt":r=
"s31";u=!0;n=!1;break;case "rgbGrayTilt":r="s32";u=!0;n=!1;break;case "copy":r=A?A:"s0";break;case "inputLightRegulation":r=A?A:"s30";h=mc.instance({Fd:v,Xd:a.size,Vd:a.nBlurPass,tb:!1});e=!0;break;case "inputMix0":r="none";h=nc.instance({A:v,ve:a.varianceMin,ad:a.blurKernelSizePx,gain:a.gain||1,tb:!1});e=!0;break;case "direct":case "none":r="abort";break;default:r="s4"}u&&I.K(r,[{name:"u27",type:"1f",value:a.tilt}]);d&&(r+="Mask");var E=da.instance({isFloat:!1,isPot:!1,width:a.size}),y={v:function(){return v},
ec:function(){return y.v()},qf:function(){return e?h.fc():E},R:function(q){Fa.$();"abort"!==r&&("none"!==r&&(I.set(r),n&&I.C("u28",1/a.size),E.S(),d&&c.b(1),Y.g(!1,!1),E.b(0),q=E),e&&h.process(q))},h:function(){E.remove();d&&c.remove()}};return y}}}(),ac=function(){return{instance:function(a){function c(D){h.forEach(function(x,O){n[O][0]=D[0][x];n[O][1]=D[1][x];n[O][2]=D[2][x];n[O][3]=D[3][x]});return n}a.normalize=a.normalize||!1;var d={input:null,ya:null,kc:null,ja:null,Ab:null,yc:null,zc:null},
e=null,h=[],n=[],u=!1,r=null,l=!0,v=-1,A=a.isReorganize?a.isReorganize:!1,E=a.kernelsCount?!0:!1,y=["s27","s28","s29"][a.shiftRGBAMode||0],q={isEnabled:!1};a.Cf?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.Db.ec(),l=!1):"full"===a.connectivityUp&&(a.sparsity=a.Db.ec());var K={elu:"s16",elu01:"s17",relu:"s15",arctan:"s18",arctan2:"s19",sigmoid:"s14",copy:"s0"}[a.activation],G=a.sparsity*a.sparsity,g=!1,w=a.size,B="";if(a.maxPooling){switch(a.maxPooling.size){case 2:B="s35";break;case 4:B=
"s36"}g=!0;w/=a.maxPooling.size;d.yc=da.instance({isFloat:!0,isPot:!1,width:w})}var f=-1,C=null;l&&(d.ja=da.instance({isFloat:!0,isPot:!1,width:a.size}));d.ya=da.instance(a.bias);var p={v:function(){return a.size},ec:function(){return w},xd:function(){return a.classesCount},Ee:function(D){e.b(D)},Tf:function(){a.remap&&a.remap.isEnabled&&(q={isEnabled:!0,Kf:da.instance(a.remap.maskTexture),Va:a.remap.layers.map(function(D){return a.parent.mf(D)}),depth:a.remap.depth})},eg:function(){switch(a.connectivityUp){case "direct":C=
oc.instance(a.connectivity);break;case "square":C=pc.instance(a.connectivity);break;case "squareFast":C=qc.instance(a.connectivity,a.activation);break;case "full":C=rc.instance(a.connectivity);break;case "conv":v=a.kernelsCount,C=sc.instance(a.connectivity),A&&(d.Ab=da.instance({width:w,isFloat:!0,isFlipY:!1,isPot:!1}))}if(C.Ja){var D=a.size*a.sparsity;f=Math.log(D/a.size)/Math.log(2);d.input=da.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:D,rc:f});d.kc=da.instance({isFloat:!0,isPot:!0,width:a.size})}},
R:function(D,x){e=D;C.Ja?(d.input.S(),E&&d.ya.b(2),C.R(q),d.input.b(0),d.input.bf(f),d.kc.S(),E?I.set("s0"):(I.set(y),I.C("u4",G),d.ya.b(1)),d.input.Fe(f,0),Y.g(!1,!1),I.set(K),d.ja.m(),d.kc.b(0),Y.g(!1,!1)):(d.ja.S(),d.ya.b(1),C.R());if(l)return g?(d.yc.S(),d.ja.b(0),I.set(B),I.ua("u10",1/a.size,1/a.size),Y.g(!1,!1),x=d.yc):x=d.ja,x.b(0),A&&(d.Ab.m(),I.set("s21"),I.ua("u14",v,w/v),Y.g(!1,!1),x=d.Ab,d.Ab.b(0)),x;var O=d.ja;a.normalize&&(I.set("gpuRawAvg"===u?"s9":"s8"),I.C("u6",1/a.size),d.zc.S(),
d.ja.b(0),Y.g(!1,!1),O=d.zc);D=null;switch(u){case "cpuRGBA2Float":O.jd(!1);x?D=p.Uf(O).then(r):(O=p.Vf(O),r(O));break;case "cpuMeanFloat":O.jd(!0);if(x)D=O.Xf().then(r);else{O=O.Yf();for(var z=0;z<O.length;++z);r(O)}break;case "gpuRawAvg":case "gpuRaw":O.b(0);case "none":null!==r&&r(O)}x&&null===D&&(D=Promise.resolve());return D},Re:function(D){var x=!1;D&&(u=D.Bb||"none",r=D.zb||null,x=D.xc?!0:!1);d.ja=da.instance({isFloat:!0,isPot:!0,isLinear:x,isMipmap:!1,width:a.size});D="undefined"!==typeof a.classesCount&&
a.classesCount?a.classesCount:a.size*a.size;for(var O=x=0,z=0;x<D;++x)h.push(O+(a.size-1-z)*a.size),n.push([-1,-1,-1,-1]),++O,O===a.size&&(O=0,++z);a.normalize&&(d.zc=da.instance({isFloat:!0,isPot:!0,width:a.size}))},Uf:function(D){return D.Wf().then(c)},Vf:function(D){D=D.be();c(D);return n},h:function(){for(var D in d){var x=d[D];x&&x.remove()}C&&(C.h(),C=null)}};a.Db&&p.eg(a.Db);return p}}}();J.ld=function(a){a.forEach(function(c){c.Ne&&da.ld(c.Ne.ti);c.ya&&da.ld(c.ya)})};var oc=function(){return{instance:function(a){var c=
da.instance(a.weights);return{Ja:!0,kb:function(){return 1},h:function(){c.remove()},tf:function(){return c},R:function(){I.set("s26");c.b(1);Y.g(!1,!1)}}}}}(),rc=function(){return{instance:function(a){var c=a.fromLayerSize,d=da.instance(a.weights);return{Ja:!0,kb:function(){return c},h:function(){d.remove()},R:function(e){if(e.isEnabled){I.set("s24");e.Kf.b(3);for(var h=Math.min(e.Va.length,e.depth),n=0;n<h;++n)e.Va[n].Ee(4+n)}else I.set("s23");I.C("u18",a.toLayerSize);I.C("u19",a.fromLayerSize);
d.b(1);Y.g(!1,!1)}}}}}(),pc=function(){return{instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,h=e*d,n=h/c,u=c/d,r=0,l=0,v=0,A=Array(e*d*e*d*4),E=Array(e*d*e*d*4),y=Array(c*c),q=0;q<y.length;++q)y[q]=0;q=Math.floor(e/2);for(var K=.5/d,G=.5/c,g=.5/h,w=0;w<d;++w)for(var B=Math.round(w*u),f=0;f<d;++f){var C=Math.round(f*u),p=w/d,D=f/d;p+=K;D+=K;for(var x=0;x<e;++x){var O=B+x-q;0>O&&(O+=c);O>=c&&(O-=c);for(var z=0;z<e;++z){var t=r/h,m=l/h,k=C+z-q;0>k&&(k+=c);k>=c&&(k-=c);
var H=O/c,Q=k/c;m=1-m-1/h;H+=G;Q+=G;t+=g;m+=g;var R=w*e+x,ca=f*e+z;ca=d*e-ca-1;R=ca*d*e+R;A[4*R]=t;A[4*R+1]=m;A[4*R+2]=H;A[4*R+3]=Q;Q=y[k*c+O]++;R=Q%n;H=O*n+R;k=k*n+(Q-R)/n;k=c*n-1-k;k=k*c*n+H;E[4*k]=t;E[4*k+1]=m;E[4*k+2]=p;E[4*k+3]=D;++r>=h&&(r=0,++l);++v}}}y=null;var xa=da.instance(a.weights);delete a.weights.data;var Ha=da.instance({width:h,isFloat:!0,array:new Float32Array(E),isPot:!0});E=null;var Ta=da.instance({width:h,isFloat:!0,array:new Float32Array(A),isPot:!0});A=null;return{Ja:!0,kb:function(){return n},
h:function(){Ha.remove();Ta.remove();xa.remove()},R:function(){I.set("s22");xa.b(1);Ta.b(2);Y.g(!1,!1)}}}}}(),sc=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,h=a.inputScale||[1,1],n=da.instance(a.weights);return{Ja:!0,kb:function(){return e},Fh:function(){return d},tf:function(){return n},h:function(){n.remove()},R:function(){I.set("s25");I.gg("u26",h);I.C("u24",c);I.C("u25",d);I.C("u18",a.toLayerSize);I.C("u19",a.fromLayerSize);n.b(1);
Y.g(!1,!1)}}}}}(),qc=function(){return{instance:function(a,c){var d=a.fromLayerSize,e=a.toLayerSize,h=a.toSparsity,n=a.stride?a.stride:1,u=h*e/d,r=e<d,l=d/e,v=da.instance(a.weights),A="s47"+[d.toString(),e.toString(),h.toString(),n.toString(),c].join("_");I.$e(A)||(a=kc.cf(c,"gl_FragColor","gl_FragColor"),e=[{type:"1f",name:"u18",value:e},{type:"1f",name:"u30",value:n}],r&&e.push({type:"1f",name:"u19",value:d}),d=[(r?u:h).toFixed(1),a],r&&d.push(l.toFixed(1)),I.wf(r?"s41":"s40",A,d),I.K(A,e.concat([{type:"1i",
name:"u16",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u15",value:3}])));return{Ja:!1,kb:function(){return u},h:function(){v.remove()},R:function(){I.set(A);v.b(3);Y.g(!1,!1)}}}}}(),mc=function(){return{instance:function(a){var c=a.Vd?a.Vd:3,d=a.Fd?a.Fd:64,e=a.Xd?a.Xd:64,h=a.tb?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var n=da.instance(a),u=da.instance(a),r=da.instance(a),l=da.instance(a),v=da.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),A=1/d;return{process:function(E){I.set("s37");
l.m();Y.g(h,!1);I.set("s38");for(var y=0;y<c;++y)n.m(),I.ua("u10",A,0),Y.g(h,!1),r.m(),l.b(0),Y.g(h,!1),u.m(),n.b(0),I.ua("u10",0,A),Y.g(h,!1),l.m(),r.b(0),Y.g(h,!1),y!==c-1&&u.b(0);I.set("s39");v.m();E.b(0);u.b(1);l.b(2);Y.g(h,!1);v.b(0)},fc:function(){return v}}}}}(),nc=function(){return{instance:function(a){function c(l){return da.instance({isFloat:l,width:d.A,isPot:!1,isFlipY:!1})}var d=Object.assign({ve:.1,ad:9,A:128,gain:1,tb:!1},a),e=c(!1),h=[c(!1),c(!1),c(!1)],n=[c(!1),c(!1),c(!1)],u=c(!0),
r=[e,n[0],n[1]];a={u1:0};I.$c([{id:"s49",name:"_",a:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",f:a,c:["u1"],precision:"lowp"},{id:"s50",name:"_",a:"uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.ad-1)/2).toFixed(2)).replace("2.2222",(1/d.A).toFixed(6)),f:a,c:["u1","u31"],precision:"lowp"},{id:"s51",name:"_",a:"uniform sampler2D u32,u33,u34,u35;const float f=1.1111;const vec3 g=vec3(1.,1.,1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u32,vv0).rgb;float c=texture2D(u33,vv0).r,d=texture2D(u34,vv0).r,i=texture2D(u35,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(j-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.ve.toFixed(4)).replace("2.2222",
d.gain.toFixed(4)),f:{u32:0,u33:1,u34:2,u35:3},c:["u32","u33","u34","u35"],precision:"highp"}]);return{process:function(){I.set("s49");e.S();Y.g(d.tb,!1);I.set("s50");for(var l=0;3>l;++l)I.ua("u31",1,0),h[l].m(),r[l].b(0),Y.g(!1,!1),I.ua("u31",0,1),n[l].m(),h[l].b(0),Y.g(!1,!1);I.set("s51");u.m();e.b(0);n[0].b(1);n[1].b(2);n[2].b(3);Y.g(!1,!1);u.b(0)},fc:function(){return u}}}}}(),Z={Cd:function(){return Z.gd()?document.createElement("video"):!1},Ra:function(a,c){a[c]=!0;a.setAttribute(c,"true")},
Le:function(){var a=!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a},dd:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},df:function(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]},Pd:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},Ke:function(){return Z.ed()||Z.dd()},ed:function(){var a=navigator.userAgent.toLowerCase();
return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},hh:function(){return Z.Le()?Z.Pd()?window.innerHeight/window.innerWidth*45:45:45},gd:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},di:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},fd:function(a){if(!a)return a;var c=null;if(a.video){var d=function(e){return e&&"object"===typeof e?Object.assign({},e):e};c={};
"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&Z.Yc(c,a.deviceId);return c},Yc:function(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)},pe:function(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a},
Qe:function(a){function c(y){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(q,K){return Math.abs(q-y)-Math.abs(K-y)})}function d(y){var q=Z.fd(a);y=y(q);h.push(y);e(y)}function e(y){if(y.video&&y.video.facingMode&&y.video.facingMode.exact){var q=y.video.facingMode.exact;y=Z.fd(y);delete y.video.facingMode.exact;y.video.facingMode.ideal=q;h.push(y)}}var h=[];if(!a||!a.video)return h;e(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var n=
c(a.video.width.ideal).slice(0,3),u=c(a.video.height.ideal).slice(0,3),r={},l=0;for(r.la=void 0;l<n.length;r={la:r.la},++l){r.la=n[l];var v={},A=0;for(v.ka=void 0;A<u.length;v={ka:v.ka},++A)if(v.ka=u[A],r.la!==a.video.width.ideal||v.ka!==a.video.height.ideal){var E=Math.max(r.la,v.ka)/Math.min(r.la,v.ka);E<4/3-.1||E>16/9+.1||d(function(y,q){return function(K){K.video.width.ideal=y.la;K.video.height.ideal=q.ka;return K}}(r,v))}}}d(function(y){return Z.pe(y)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&d(function(y){delete y.video.width.ideal;delete y.video.height.ideal;return y}),d(function(y){delete y.video.width;delete y.video.height;return y}));a.video.facingMode&&(d(function(y){delete y.video.facingMode;return y}),a.video.width&&a.video.height&&d(function(y){Z.pe(y);delete y.video.facingMode;return y}));h.push({audio:a.audio,video:!0});return h},pg:function(a){if(Z.Pd()){if(!a||!a.video)return!1;var c=a.video.width,d=a.video.height;if(!c||!d)return!1;if(c.ideal&&d.ideal&&
c.ideal>d.ideal)return a.video.height=c,a.video.width=d,!0}return!1},xb:function(a){a.volume=0;Z.Ra(a,"muted");if(Z.ed()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;Z.Ra(a,"muted")},5)}},se:function(a,c,d){return null===a?Promise.resolve():new Promise(function(e,h){if(a.srcObject&&a.srcObject.getVideoTracks){var n=
a.srcObject.getVideoTracks();1!==n.length?h("INVALID_TRACKNUMBER"):(n=n[0],c?Z.get(a,e,h,d):(n.stop(),e()))}else h("BAD_IMPLEMENTATION")})},Bd:function(a,c,d,e){function h(u){n||(n=!0,d(u))}var n=!1;return navigator.mediaDevices.getUserMedia(e).then(function(u){function r(){setTimeout(function(){if(a.currentTime){var v=a.videoHeight;if(0===a.videoWidth||0===v)h("VIDEO_NULLSIZE");else{var A={Je:null,lg:null,Lf:null};try{var E=u.getVideoTracks()[0];E&&(A.Lf=E,A.Je=E.getCapabilities(),A.lg=E.getSettings())}catch(y){}Z.Ke()?
a.parentNode&&null!==a.parentNode?(n||c(a,u,A),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),Z.xb(a),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";Z.xb(a);setTimeout(function(){a.play();n||c(a,u,A)},100)},80)):n||c(a,u,A)}}else h("VIDEO_NOTSTARTED")},700)}function l(){a.removeEventListener("loadeddata",l,!1);var v=a.play();Z.xb(a);"undefined"===typeof v?r():v.then(function(){r()}).catch(function(){h("VIDEO_PLAYPROMISEREJECTED")})}
"undefined"!==typeof a.srcObject?a.srcObject=u:(a.src=window.URL.createObjectURL(u),a.videoStream=u);Z.xb(a);a.addEventListener("loadeddata",l,!1)}).catch(function(u){h(u)})},rf:function(a,c){var d=c||Z.Cd();return new Promise(function(e,h){Z.get(d,e,h,a)})},get:function(a,c,d,e){if(!a)return d&&d("VIDEO_NOTPROVIDED"),!1;if(!Z.gd())return d&&d("MEDIASTREAMAPI_NOTFOUND"),!1;if(e&&e.video&&Z.dd()){var h=Z.df();0!==h[0]&&(12>h[0]||12===h[0]&&2>h[1])&&Z.pg(e)}Z.Ra(a,"autoplay");Z.Ra(a,"playsinline");
e&&e.audio?a.volume=0:Z.Ra(a,"muted");Z.Bd(a,c,function(){function n(r){if(0===r.length)d("INVALID_FALLBACKCONSTRAINTS");else{var l=r.shift();Z.Bd(a,c,function(){n(r)},l)}}var u=Z.Qe(e);n(u)},e)},sf:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&c.length&&0<c.length?a(c,
!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},Hg:function(a,c,d){var e={};e[c]=d;c=[];c.push(e);a.applyConstraints({advanced:c}).catch(function(){})}},Ca=function(){function a(G,g,w,B,f,C,p){if(!q)if(p===C.length)f();else{switch(C[p]){case "A":w();break;case "D":G();break;case "S":g().then(function(D,x){K.Jb();a(G,g,w,x?null:B,f,C,++p)}).catch(function(D){console.log("An error occurred in the WebAR loop: ",D);f()});return;case "R":B&&B()}a(G,g,w,B,f,C,++p)}}var c={n:5,tc:1,
Td:0,jb:[35,49],fb:[2,200],k:.7,vg:200,Sf:.05},d=-1,e=null,h=-1,n=-1,u=0,r=-1,l=-1,v=0,A=0,E=c.fb[1],y=Math.log(2),q=!0,K={pf:function(){switch(d){case -1:return-1;case 0:return l+e.Td;case 1:return v}},nh:function(G){return Math.pow(Math.min(Math.max(r,0),e.n-1)/(e.n-1),G||1)},i:function(G){e=Object.assign({},c,G);r=l=e.tc;d=0;K.reset()},Jb:function(G){G=("undefined"===typeof G?Date.now():G)||0;var g=Math.min(Math.max(G-A,e.fb[0]),e.fb[1]);E=g;A=G;var w=-1===h?0:e.k;h=Math.min(Math.max(1E3/g,5),
120)*(1-w)+h*w;G-n>e.vg&&5<++u&&(g=e.k,r=r*(1-g)+(h<e.jb[0]?l-1:h>e.jb[1]?l+1:l)*g,Math.abs(r-l)>1-e.Sf&&(g=Math.min(Math.max(Math.round(r),0),e.n-1),g!==l&&(r=l=g,h=(e.jb[1]-e.jb[0])/2)),n=G)},Ac:function(G,g,w,B,f,C){q=!1;a(G,g,w,B,f,C,0)},stop:function(){q=!0},Ec:function(G){v=G;d=1},Oc:function(){d=0;K.reset()},reset:function(){E=c.fb[1];n=h=-1;u=0},oi:function(G,g,w){w=Math.exp(-y*E/w);return(1-w)*G+w*g},gf:function(){return E}};return K}(),eb=function(){function a(){d(G+q.sc);g.port.postMessage("DONE")}
function c(){C.Za=0===q.Ya?B(d):B(e)}function d(z){f.Fa&&null!==K&&(z-=G,z=Math.min(Math.max(z,q.kd[0]),q.kd[1]),G+=z,n(),p.isEnabled&&p.Ua&&f.V&&G-p.oc>q.Sc&&(v(),p.oc=G),K(G))}function e(z){f.Fa&&(C.timeout=setTimeout(d.bind(null,z),q.Ya))}function h(){K=null;f.Fa=!1;n()}function n(){C.Za&&(window.cancelAnimationFrame(C.Za),C.Za=null);C.timeout&&(window.clearTimeout(C.timeout),C.timeout=null)}function u(z){z&&!f.V?(f.V=!0,w&&Ca.Oc(),g.port.postMessage("STOP"),ia.re(!0),c()):!z&&f.V&&(f.V=!1,w&&
Ca.Ec(1),ia.re(!1),g.port.postMessage("START"))}function r(z){z.target.hidden?x():D()}function l(z,t,m){t=z.createShader(t);z.shaderSource(t,m);z.compileShader(t);return t}function v(){p.Ua=!1;var z=p.ea,t=p.ob,m=p.pb,k=p.U;z.uniform1f(p.Dd,Math.random());p.Ga?t.beginQueryEXT(k,m):z.beginQuery(k,m);z.drawElements(z.POINTS,1,z.UNSIGNED_SHORT,0);p.Ga?t.endQueryEXT(k):z.endQuery(k);ia.flush();E().then(function(H){0===H||isNaN(H)?(p.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",
H)):(H=q.ye*q.Rc*1E3/H,p.Mb=(p.Mb+1)%q.Ka,p.pc[p.Mb]=H,++p.Qd>q.Ka&&(p.vb.set(p.pc),p.vb.sort(function(Q,R){return Q-R}),H=p.vb[Math.floor(q.Ka/2)],p.hb=Math.max(p.hb,H),q.Qc(H/p.hb)),p.Ua=!0)}).catch(function(){p.Ua=!0})}function A(z){var t=p.ea,m=p.ob,k=p.pb,H=!1;p.Ga?H=m.kh(k,m.QUERY_RESULT_AVAILABLE_EXT):H=t.getQueryParameter(k,t.QUERY_RESULT_AVAILABLE);t=t.getParameter(m.GPU_DISJOINT_EXT);H?z(!t):setTimeout(A.bind(null,z),.1)}function E(){return new Promise(function(z,t){A(function(m){if(m){m=
p.ea;var k=p.ob,H=p.pb;m=p.Ga?k.getQueryObjectEXT(H,k.QUERY_RESULT_EXT):m.getQueryParameter(H,m.QUERY_RESULT);z(m)}else t()})})}var y={Ld:!0,kd:[1,200],sc:20,Ya:0,Rc:50,ye:240,Sc:3E3,Ka:3,Qc:null},q=null,K=null,G=0,g=null,w=!1,B=null,f={qa:!1,V:!0,nc:!1,mc:!1,lc:!1,Fa:!1},C={Za:null,timeout:null},p={isEnabled:!1,Ua:!1,ea:null,ob:null,pb:null,U:null,Dd:null,Ga:!0,oc:0,Qd:0,pc:null,vb:null,Mb:0,hb:0},D=u.bind(null,!0),x=u.bind(null,!1),O={i:function(z){q=Object.assign(y,z);Object.assign(f,{V:!0,qa:!0,
Fa:!1});B=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==q.Qc){z=document.createElement("canvas");z.setAttribute("width","1");z.setAttribute("height","1");var t={antialias:!1};z=z.getContext("webgl2",t)||z.getContext("webgl",t);if(t=z.getExtension("EXT_disjoint_timer_query")||z.getExtension("EXT_disjoint_timer_query_webgl2")){p.ea=z;p.ob=t;p.isEnabled=!0;p.Ga=t.beginQueryEXT?!0:!1;var m=l(z,z.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),k=l(z,z.FRAGMENT_SHADER,
"precision lowp float;uniform float u36;void main(){vec4 a=u36*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",q.Rc.toString())),H=z.createProgram();z.attachShader(H,m);z.attachShader(H,k);z.linkProgram(H);m=z.getAttribLocation(H,"a0");p.Dd=z.getUniformLocation(H,"u36");z.useProgram(H);z.enableVertexAttribArray(m);H=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,H);z.bufferData(z.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),z.STATIC_DRAW);z.vertexAttribPointer(m,4,z.FLOAT,
!1,16,0);H=z.createBuffer();z.bindBuffer(z.ELEMENT_ARRAY_BUFFER,H);z.bufferData(z.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),z.STATIC_DRAW);z.disable(z.DEPTH_TEST);z.disable(z.DITHER);z.disable(z.STENCIL_TEST);z.viewport(0,0,1,1);H=p.Ga?t.createQueryEXT():z.createQuery();p.pb=H;p.U=t.TIME_ELAPSED_EXT||z.TIME_ELAPSED;p.oc=-q.Sc;p.pc=new Float32Array(q.Ka);p.vb=new Float32Array(q.Ka);p.hb=0;p.Mb=0;p.Qd=0;p.Ua=!0}}if(q.Ld){z=!1;try{if("undefined"===typeof SharedWorker){var Q=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
q.sc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),R=new Worker(Q);R.addEventListener("message",a);g={$d:R,port:R};f.nc=!0}else{var ca=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
q.sc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),xa=new SharedWorker(ca);xa.port.start();xa.port.addEventListener("message",a);g={$d:xa,port:xa.port};f.mc=!0}z=!0}catch(Ha){}z&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",r):(window.addEventListener("blur",x),window.addEventListener("focus",D)),window.addEventListener("pagehide",
x),window.addEventListener("pageshow",D),f.lc=!0)}w="undefined"!==typeof Ca},h:function(){h();f.lc&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",r):(window.removeEventListener("blur",x),window.removeEventListener("focus",D)),window.removeEventListener("pagehide",x),window.removeEventListener("pageshow",D),f.lc=!1);f.mc?(g.port.close(),f.mc=!1):f.nc&&(g.$d.terminate(),f.nc=!1);Object.assign(f,{V:!0,qa:!1,Fa:!1});K=null},Sh:function(){return f.V},update:function(z){Object.assign(q,
z)},Ac:function(z){f.qa||O.i({});n();f.Fa=!0;K=z;f.V&&c()},stop:h};return O}(),ib=function(){function a(E,y){var q=E[0]-.5;E=E[1]-.5;var K=y[0]-.5;y=y[1]-.5;return q*q+E*E-(K*K+y*y)}var c={Wd:4,Cb:[1.5,1.5,2],M:[.1,.1,.1],fe:1,A:-1,J:-1,og:2,Rf:1,Dc:!0,Xe:.8},d=null,e=[],h=[],n=[],u=[0],r=[.5,.5,1],l=null,v=0,A=[0,0,0];return{i:function(E){d=Object.assign({},c,E);e.splice(0);h.splice(0);n.splice(0);v=0;E=d.Cb[0]*d.M[0];var y=d.Cb[1]*d.M[1],q=1/(1+d.Cb[2]*d.M[2]),K=d.fe*Math.min(d.A,d.J),G=K/d.A;K/=
d.J;var g=.5*d.Xe;g*=g;for(var w=0;w<d.Wd;++w){var B=[];h.push(B);var f=Math.pow(q,w),C=G*f,p=K*f;f=C*d.Rf;n.push(f);var D=C*E,x=p*y;C/=2;p/=2;for(var O=1+(1-C-C)/D,z=1+(1-p-p)/x,t=0;t<z;++t)for(var m=p+t*x,k=m-.5,H=0;H<O;++H){var Q=C+H*D,R=Q-.5;R*R+k*k>g||(Q=[Q,m,f],e.push(Q),B.push(Q))}d.Dc&&B.sort(a);l=e}d.Dc&&e.sort(a)},get:function(E){var y=l.length;if(0===y)return r;for(;E>=u.length;)u.push(0);u[E]>=y&&(u[E]=0);var q=l[Math.floor(u[E])%y];u[E]=(u[E]+1/d.og)%y;if(0===v)return q;A[0]=q[0];A[1]=
q[1];A[2]=v;return A},Yh:function(E){E>=u.length||(u[E]=Math.floor(Math.random()*l.length))},Fc:function(E){v=E;if(0===v)l=e;else{for(var y=n.length,q=y-1,K=0;K<y;++K)if(n[K]<=E){q=K;break}l=h[q]}},reset:function(){for(var E=e.length/u.length,y=0;y<u.length;++y)u[y]=Math.floor(y*E);v=0;l=e}}}(),na=function(){function a(w,B,f,C){return Math.max(0,f>w?w+B/2-(f-C/2):f+C/2-(w-B/2))}function c(w){return!l.Id(w)}function d(w,B,f){for(var C=w.length;G.length<C;)G.push({ha:[0,0],wb:[0,0],ba:[0,0],ta:0,scale:0,
Qa:0,Xa:0});C=w.length;for(var p=0;p<C;++p){var D=w[p],x=G[p],O=B[p].rz,z=Math.cos(O),t=Math.sin(O);x.ta=O;x.Qa=z;x.Xa=t;x.ba[0]=D.x;x.ba[1]=D.y/f;x.scale=D.W;x.ha[0]=D.W*l.md[0];x.ha[1]=D.W*l.md[1];x.wb[0]=x.ha[0]*x.ha[0];x.wb[1]=x.ha[1]*x.ha[1]}}function e(w,B,f){var C=Math.abs(-w.Xa*(f-w.ba[1])-w.Qa*(B-w.ba[0]));B=Math.abs(w.Qa*(f-w.ba[1])-w.Xa*(B-w.ba[0]));return 1>=C*C/w.wb[0]+B*B/w.wb[1]}function h(w,B,f,C){var p=w[f];d(w,B,C);var D=G[f];return w.some(function(x,O){if(!(x=O===f||p.ra>x.ra||
3>x.ra||!(0<a(p.x,p.W*K,x.x,x.W*K))||!(0<a(p.y,p.W*C*K,x.y,x.W*C*K)))){x=G[O];D.scale>x.scale?O=D:(O=x,x=D);for(var z=0,t=0,m=l.Ye,k=0;k<m;++k)for(var H=((k+.5)/m*2-1)*x.ha[1],Q=0;Q<m;++Q){var R=((Q+.5)/m*2-1)*x.ha[0],ca=x.ba[0]+(-H*x.Xa+R*x.Qa);R=x.ba[1]+(H*x.Qa+R*x.Xa);e(x,ca,R)&&(++z,e(O,ca,R)&&++t)}x=t/z<l.Ud}return x?!1:!0})}function n(w){return w.isDetected}function u(w){var B={},f;for(f in w){var C=f;var p=w[f];var D=typeof p;p=["string","boolean","number"].includes(D)?p:"object"!==D?null:
ArrayBuffer.isView(p)?p.slice():JSON.parse(JSON.stringify(p));B[C]=p}return B}var r={L:1,Ud:.3,md:[1,1],Ye:6,he:.3,Id:null,Df:!0},l=null,v=0,A=null,E=!1,y=0,q=0,K=Math.sqrt(2),G=[],g={i:function(w){l=Object.assign({},r,w);A=[0]},Od:function(){return 1!==l.L},yd:function(){return v},Gf:function(){return E},oa:function(){return l.L},Dh:function(){return A},Hf:function(w){return A.includes(w)},update:function(w,B){var f=A;if(f.length>w)f.splice(0,f.length-w);else for(;f.length<w;)f.push(0);if(1!==l.L)if(B.every(c)){B=
y;for(var C=0;C<w;++C)f[C]=B,B=(B+1)%l.L;y=B}else{C=Math.round(l.he*w);C=Math.max(1,C);for(var p=y,D=0,x=0;D<w;++D){if(c(B[p])&&++x>C){do++p===l.L&&(p=0);while(c(B[p]))}f[D]=p;p=(p+1)%l.L}y=p}},Jb:function(w){v=A[w];q=(.5+v)/l.L;E=A.lastIndexOf(v)===w;return v},mg:function(w,B,f){return 1===l.L?!1:h(w,B,v,f)},qe:function(w){l.Df&&1===l.L||I.C(w,q)},af:function(w){return w.find(n)},ih:function(w){return w.findIndex(n)},gh:function(w){var B=g.af(w);if(!B||w.every(n))return ib.Fc(0),!1;ib.Fc(B.s);return!0},
We:function(w){for(var B=new Float32Array(w.length*l.L),f=0,C;f<l.L;++f)for(C=0;C<w.length;++C)B[f*w.length+C]=w[C];return B},Yb:function(w){for(var B=[],f=0;f<l.L;++f)B.push(u(w));return B}};return g}(),wa={Y:0,$f:{threshold:.9,nScaleLevels:2,scale0Factor:.8,nDetectsPerLoopRange:[1,4],overlapFactors:[2,2,3],scanCenterFirst:!0,nDetectsPerLoop:-1,multiDetectionThresholdFactors:[.5,.6],translationScalingFactors:[.2,.2,.5],isCleanGLStateAtEachIteration:!0,enableAsyncReadPixels:!1,animateProcessOrder:"DSAR"},
rg:50,Nf:.4,Mf:8,Of:.3,ng:{translationFactorRange:[.002,.005],rotationFactorRange:[.015,.1],qualityFactorRange:[.8,.95],alphaRange:[.03,1],followZRotAlphaFactor:.01,minDisplacementPx:1},Ae:.2,Be:2,Pf:8,xg:20},Ba={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1920,minHeight:480,maxHeight:1920,rotate:0,flipX:!1},qa={vc:-3,If:-1,error:-2,ready:1,play:2,pause:3},va=qa.vc,L=null,tc={rb:!1,Ic:null,element:null,D:null,B:[0,0],j:[.5,0,0,.5],Eb:0,Oa:null,qb:!1},T=null,uc={outputScaleFactor:2,
Na:null,Ob:null,antialias:!0,Wc:"./",Vc:null,Uc:"./",Tc:null,aa:null,Y:wa.Y,Zd:wa.Y,sb:!1,Ba:!0},ja=null,Da=null,Xa=1,yb={Tb:-1},ea=null,vc={A:0,J:0,B:[0,0],O:null},ma={va:null,buffer:null,M:null,ee:null,ge:1},Ga={O:null,Ha:null},Aa={track:null,depth:null},hb=null,La=null,vb=[],xb=[],Gb={VERSION:"1.0.2",init:function(a){function c(){va!==qa.error&&2===++e&&($a(),Ob(),Za(),T.Na&&(va=qa.ready,T.Na(!1,{GL:b,canvasElement:T.aa,videoTexture:L.D.get(),videoTransformMat2:L.j,maxFacesDetected:na.oa(),videoElement:L.element}),
za()),V())}if(va!==qa.vc)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;va=qa.If;L=Object.assign({},tc);T=Object.assign({},uc);ea=Object.assign({},vc);"undefined"!==typeof a.antialias&&(T.antialias=a.antialias);a.callbackReady&&(T.Na=a.callbackReady);a.callbackTrack&&(T.Ob=a.callbackTrack);"undefined"!==typeof a.animateDelay&&(T.Y=a.animateDelay);"undefined"!==typeof a.NNTrackPath&&(T.Wc=a.NNTrackPath);"undefined"!==typeof a.NNTrack&&(T.Vc=a.NNTrack);"undefined"!==typeof a.NNDepthPath&&
(T.Uc=a.NNDepthPath);"undefined"!==typeof a.NNDepth&&(T.Tc=a.NNDepth);"undefined"!==typeof a.followZRot&&(T.Ba=a.followZRot?!0:!1);if(!a.canvasId&&!a.canvas)return Ya("NO_CANVASID"),!1;T.aa=a.canvas?a.canvas:document.getElementById(a.canvasId);if(!T.aa)return Ya("INVALID_CANVASID"),!1;ea.A=T.aa.width;ea.J=T.aa.height;if(!ea.A||!ea.J)return Ya("INVALID_CANVASDIMENSIONS"),!1;ja=Object.create(wa.$f);a.scanSettings&&Object.assign(ja,a.scanSettings);var d=1;"undefined"!==typeof a.maxFacesDetected&&(d=
Math.max(1,a.maxFacesDetected));if(d>wa.Mf)return Ya("MAXFACES_TOOHIGH"),!1;na.i({L:d,Ud:wa.Nf,he:wa.Of,Id:Lb});for(d=0;d<na.oa();++d)vb.push(new Float32Array(wa.Pf)),xb.push(0);eb.i({Ld:a.isKeepRunningOnWinFocusLost||!1,Ya:T.Y});Ca.i({tc:0,n:ja.nDetectsPerLoopRange[1]-ja.nDetectsPerLoopRange[0]+1,Td:ja.nDetectsPerLoopRange[0]});-1!==ja.nDetectsPerLoop?Ca.Ec(ja.nDetectsPerLoop):Ca.Oc();ma.M=ja.translationScalingFactors.slice(0);Da=Object.create(wa.ng);a.stabilizationSettings&&Object.assign(Da,a.stabilizationSettings);
var e=0;a.videoSettings&&a.videoSettings.videoElement?pb(a.videoSettings.videoElement,c):(a.videoSettings&&Object.assign(Ba,a.videoSettings),Qb(a.onWebcamAsk,a.onWebcamGet,function(h){pb(h,c)}));Promise.all([Nb(T.Vc,T.Wc,ec),Nb(T.Tc,T.Uc,fc)]).then(function(h){if(!gc())return!1;var n=h[1];Aa.track=new J({Va:h[0].layers,Bb:"gpuRawAvg",zb:hc});Aa.depth=new J({Va:n.layers,Bb:"gpuRawAvg",xc:!0,zb:ic});I.$c([{id:"s53",name:"_",wa:"attribute vec2 a0;uniform mat2 u37;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u37*a0;}",
xa:["a0"],ma:[2],a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:["u1","u37"],precision:"lowp"},{id:"s54",name:"_",a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",wa:"attribute vec2 a0;uniform sampler2D u38;uniform mat2 u37;uniform vec2 u39;uniform float u40,u41;varying vec2 vv0;void main(){vec4 a=texture2D(u38,vec2(.25,u40));vec2 d=a.gb,f=a.a*u39;float b=cos(u41),c=sin(u41);vec2 g=mat2(b,c,-c,b)*a0,h=d+g*.5*f,i=h-.5;vv0=vec2(.5,.5)+2.*u37*i,gl_Position=vec4(a0,0.,1.);}",
xa:["a0"],ma:[2],c:"u1 u38 u39 u40 u41 u37".split(" "),precision:"lowp"},{id:"s55",name:"_",a:"uniform sampler2D u42,u38;uniform vec3 u43,u44;uniform float u45,u46,u40,u47,u41,u48;const vec4 e=vec4(.25);void main(){vec4 d=texture2D(u42,vec2(.625,.625)),a=texture2D(u38,vec2(.25,u40));float f=dot(d,e);bool g=f>u46;a.r<-.5?a.r+=1.:g?a.r=2.:a.r>u45?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r=mix(-2.,a.r,u47);if(a.r<.9)a=vec4(1.,u43);else{a.r*=step(1.9,a.r);float h=dot(e,texture2D(u42,vec2(.875,.875))),i=dot(e,texture2D(u42,vec2(.125,.625))),j=dot(e,texture2D(u42,vec2(.375,.625))),b=cos(u41),c=sin(u41);vec2 k=mat2(b,c*u48,-c/u48,b)*vec2(h,i);a.gba+=vec3(k,j)*u44*a.a;}gl_FragColor=a;}",
wa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"u42 u38 u43 u45 u44 u47 u41 u48 u46 u40".split(" ")},{id:"s56",name:"_",wa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",a:"uniform sampler2D u42;uniform float u47;const vec4 e=vec4(.25);void main(){float a=dot(e,texture2D(u42,vec2(.125,.875))),b=dot(e,texture2D(u42,vec2(.375,.875))),c=dot(e,texture2D(u42,vec2(.625,.875))),d=dot(e,texture2D(u42,vec2(.625,.625)));vec3 f=vec3(a,b,c);gl_FragColor=vec4(f,d*u47);}",c:["u42",
"u47"]},{id:"s52",name:"_",a:"uniform sampler2D u38;uniform vec2 u49;uniform float u50;varying vec2 vv0;void main(){float f=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.5,vv0.x);vec4 a=texture2D(u38,vv0+u49);a.a=mix(a.a*u50,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",c:["u38","u50","u49"]},{id:"s57",name:"_",a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",wa:"attribute vec2 a0;uniform mat2 u37;uniform vec3 u51;uniform vec2 u39;uniform float u41;varying vec2 vv0;void main(){vec2 c=u51.xy*.5+vec2(.5),d=u51.z*u39;float a=cos(u41),b=sin(u41);vec2 f=mat2(a,b,-b,a)*a0,g=c+f*.5*d,h=g-.5;vv0=vec2(.5,.5)+2.*u37*h,gl_Position=vec4(a0,0.,1.);}",
xa:["a0"],ma:[2],c:["u1","u51","u39","u41","u37"],precision:"lowp"},{id:"s58",name:"_",a:"uniform sampler2D u52,u53;varying vec2 vv0;void main(){vec3 a=texture2D(u52,vv0).rgb;float b=dot(texture2D(u53,vv0),vec4(.25));gl_FragColor=vec4(a,b*.5+.5);}",xa:["a0"],ma:[2],c:["u52","u53"],precision:"lowp"}]);Mb();h=na.oa();if(1!==h)throw Error("Multi detection is not implemented for depth retrieval");ma.buffer=new Uint8Array(16*h);hb=na.Yb({cb:0,x:0,y:0,W:1,Bc:0,Cc:0,ta:0,ra:0});h=Aa.depth.Ad()*T.outputScaleFactor;
La=na.Yb({detected:0,isDetected:!1,x:0,y:0,s:1,xRaw:0,yRaw:0,sRaw:1,rx:0,ry:0,rz:0,RGBDBuf:new Uint8Array(h*h*4),RGBDRes:h});na.Yb({Zb:0,$b:0,Xb:0,Ub:0,Vb:0,Wb:0});Ab();zb();c()});return!0},destroy:function(){eb.h();return new Promise(function(a){Gb.toggle_pause(!0,!0).finally(function(){Aa.track&&Aa.track.h();Aa.depth&&Aa.depth.h();Wa.h();La=hb=null;Aa.track=null;Aa.depth=null;vb.splice(0);xb.splice(0);ea.O=null;ma.va=null;L.D=null;va=qa.vc;Ga.O=null;Ga.Ha=null;a()}).catch(function(){})})},toggle_videoStream:function(a){return L.qb||
!L.element?Promise.resolve():Z.se(L.element,a,L.Oa)},toggle_pause:function(a,c){if(!P())return Promise.reject("NOT_READY");c=c?Gb.toggle_videoStream(!a):Promise.resolve();a?ha():c.then(function(){V()});return c},update_videoSettings:function(a){ha();return new Promise(function(c,d){Z.se(L.element,!1,L.Oa).then(function(){Object.assign(Ba,a);Qb(null,null,function(e){pb(e,function(){$a();Za();V();c()})})}).catch(d)})},toggle_slow:function(a){P()&&va===qa.play&&(a&&!T.sb?(T.Zd=T.Y,ja.nDetectsPerLoop=
1,this.set_animateDelay(wa.zg),T.sb=!0):!a&&T.sb&&(ja.nDetectsPerLoop=-1,this.set_animateDelay(T.Zd),T.sb=!1))},set_animateDelay:function(a){T.Y=a;eb.update({Ya:T.Y})},resize:function(){if(!P())return!1;var a=T.aa.width,c=T.aa.height;if(!Bb()&&a===ea.A&&c===ea.J)return!1;ea.A=a;ea.J=c;I.N();Ab();zb();$a();Za();return!0},set_inputTexture:function(a,c,d){L.B[0]=c;L.B[1]=d;L.D=da.instance({width:c,height:d,hc:a});L.rb=!0;$a();za();Za()},reset_GLState:function(){za();ea.O.remove();ma.va.remove();Ga.O.remove();
Ga.Ha.remove();Mb()},render_video:function(){Fa.I();I.set("s53");b.viewport(0,0,ea.A,ea.J);L.D.b(0);Y.g(!0,!0)},reset_inputTexture:function(){L.rb=!1;L.D=L.Ic;Bb();$a();Za()},get_videoDevices:function(a){return Z.sf(a)},set_scanSettings:function(a){Object.assign(ja,a);-1!==ja.nDetectsPerLoop?Ca.Ec(ja.nDetectsPerLoop):Ca.Oc();Ab();zb()},set_stabilizationSettings:function(a){Object.assign(Da,a)},set_videoOrientation:function(a,c){P()&&(Ba.flipX=c,Ba.rotate=a,$a(),Za())},update_videoElement:function(a,
c){pb(a?a:L.element,function(){Ob();$a();Za();c&&c()})},create_new:function(){return WEBARROCKSFACEDEPTHGEN()}};return Gb};const WEBARROCKSFACEDEPTH=WEBARROCKSFACEDEPTHGEN();
if(typeof(module)!=='undefined'){module.exports=WEBARROCKSFACEDEPTH;}
